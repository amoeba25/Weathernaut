(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var EM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function s0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var o0={exports:{}},ph={},a0={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bl=Symbol.for("react.element"),TM=Symbol.for("react.portal"),AM=Symbol.for("react.fragment"),CM=Symbol.for("react.strict_mode"),LM=Symbol.for("react.profiler"),RM=Symbol.for("react.provider"),PM=Symbol.for("react.context"),NM=Symbol.for("react.forward_ref"),IM=Symbol.for("react.suspense"),DM=Symbol.for("react.memo"),OM=Symbol.for("react.lazy"),Ig=Symbol.iterator;function FM(e){return e===null||typeof e!="object"?null:(e=Ig&&e[Ig]||e["@@iterator"],typeof e=="function"?e:null)}var l0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},c0=Object.assign,u0={};function Oo(e,t,n){this.props=e,this.context=t,this.refs=u0,this.updater=n||l0}Oo.prototype.isReactComponent={};Oo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Oo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function h0(){}h0.prototype=Oo.prototype;function zp(e,t,n){this.props=e,this.context=t,this.refs=u0,this.updater=n||l0}var Up=zp.prototype=new h0;Up.constructor=zp;c0(Up,Oo.prototype);Up.isPureReactComponent=!0;var Dg=Array.isArray,f0=Object.prototype.hasOwnProperty,Hp={current:null},d0={key:!0,ref:!0,__self:!0,__source:!0};function p0(e,t,n){var i,r={},s=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)f0.call(t,i)&&!d0.hasOwnProperty(i)&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:bl,type:e,key:s,ref:o,props:r,_owner:Hp.current}}function BM(e,t){return{$$typeof:bl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Gp(e){return typeof e=="object"&&e!==null&&e.$$typeof===bl}function kM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Og=/\/+/g;function Yh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?kM(""+e.key):t.toString(36)}function Yc(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case bl:case TM:o=!0}}if(o)return o=e,r=r(o),e=i===""?"."+Yh(o,0):i,Dg(r)?(n="",e!=null&&(n=e.replace(Og,"$&/")+"/"),Yc(r,t,n,"",function(c){return c})):r!=null&&(Gp(r)&&(r=BM(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Og,"$&/")+"/")+e)),t.push(r)),1;if(o=0,i=i===""?".":i+":",Dg(e))for(var a=0;a<e.length;a++){s=e[a];var l=i+Yh(s,a);o+=Yc(s,t,n,l,r)}else if(l=FM(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=i+Yh(s,a++),o+=Yc(s,t,n,l,r);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Gl(e,t,n){if(e==null)return e;var i=[],r=0;return Yc(e,i,"","",function(s){return t.call(n,s,r++)}),i}function zM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Zt={current:null},$c={transition:null},UM={ReactCurrentDispatcher:Zt,ReactCurrentBatchConfig:$c,ReactCurrentOwner:Hp};Oe.Children={map:Gl,forEach:function(e,t,n){Gl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Gl(e,function(){t++}),t},toArray:function(e){return Gl(e,function(t){return t})||[]},only:function(e){if(!Gp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Oe.Component=Oo;Oe.Fragment=AM;Oe.Profiler=LM;Oe.PureComponent=zp;Oe.StrictMode=CM;Oe.Suspense=IM;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UM;Oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=c0({},e.props),r=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Hp.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)f0.call(t,l)&&!d0.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:bl,type:e.type,key:r,ref:s,props:i,_owner:o}};Oe.createContext=function(e){return e={$$typeof:PM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:RM,_context:e},e.Consumer=e};Oe.createElement=p0;Oe.createFactory=function(e){var t=p0.bind(null,e);return t.type=e,t};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(e){return{$$typeof:NM,render:e}};Oe.isValidElement=Gp;Oe.lazy=function(e){return{$$typeof:OM,_payload:{_status:-1,_result:e},_init:zM}};Oe.memo=function(e,t){return{$$typeof:DM,type:e,compare:t===void 0?null:t}};Oe.startTransition=function(e){var t=$c.transition;$c.transition={};try{e()}finally{$c.transition=t}};Oe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Oe.useCallback=function(e,t){return Zt.current.useCallback(e,t)};Oe.useContext=function(e){return Zt.current.useContext(e)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(e){return Zt.current.useDeferredValue(e)};Oe.useEffect=function(e,t){return Zt.current.useEffect(e,t)};Oe.useId=function(){return Zt.current.useId()};Oe.useImperativeHandle=function(e,t,n){return Zt.current.useImperativeHandle(e,t,n)};Oe.useInsertionEffect=function(e,t){return Zt.current.useInsertionEffect(e,t)};Oe.useLayoutEffect=function(e,t){return Zt.current.useLayoutEffect(e,t)};Oe.useMemo=function(e,t){return Zt.current.useMemo(e,t)};Oe.useReducer=function(e,t,n){return Zt.current.useReducer(e,t,n)};Oe.useRef=function(e){return Zt.current.useRef(e)};Oe.useState=function(e){return Zt.current.useState(e)};Oe.useSyncExternalStore=function(e,t,n){return Zt.current.useSyncExternalStore(e,t,n)};Oe.useTransition=function(){return Zt.current.useTransition()};Oe.version="18.2.0";a0.exports=Oe;var pt=a0.exports;const or=s0(pt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HM=pt,GM=Symbol.for("react.element"),VM=Symbol.for("react.fragment"),WM=Object.prototype.hasOwnProperty,jM=HM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qM={key:!0,ref:!0,__self:!0,__source:!0};function m0(e,t,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)WM.call(t,i)&&!qM.hasOwnProperty(i)&&(r[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)r[i]===void 0&&(r[i]=t[i]);return{$$typeof:GM,type:e,key:s,ref:o,props:r,_owner:jM.current}}ph.Fragment=VM;ph.jsx=m0;ph.jsxs=m0;o0.exports=ph;var ue=o0.exports,nd={},g0={exports:{}},_n={},y0={exports:{}},v0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,G){var q=F.length;F.push(G);e:for(;0<q;){var Z=q-1>>>1,he=F[Z];if(0<r(he,G))F[Z]=G,F[q]=he,q=Z;else break e}}function n(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var G=F[0],q=F.pop();if(q!==G){F[0]=q;e:for(var Z=0,he=F.length,Ee=he>>>1;Z<Ee;){var Ue=2*(Z+1)-1,W=F[Ue],nt=Ue+1,ve=F[nt];if(0>r(W,q))nt<he&&0>r(ve,W)?(F[Z]=ve,F[nt]=q,Z=nt):(F[Z]=W,F[Ue]=q,Z=Ue);else if(nt<he&&0>r(ve,q))F[Z]=ve,F[nt]=q,Z=nt;else break e}}return G}function r(F,G){var q=F.sortIndex-G.sortIndex;return q!==0?q:F.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,u=null,f=3,d=!1,m=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(F){for(var G=n(c);G!==null;){if(G.callback===null)i(c);else if(G.startTime<=F)i(c),G.sortIndex=G.expirationTime,t(l,G);else break;G=n(c)}}function w(F){if(y=!1,x(F),!m)if(n(l)!==null)m=!0,z(M);else{var G=n(c);G!==null&&Y(w,G.startTime-F)}}function M(F,G){m=!1,y&&(y=!1,g(C),C=-1),d=!0;var q=f;try{for(x(G),u=n(l);u!==null&&(!(u.expirationTime>G)||F&&!I());){var Z=u.callback;if(typeof Z=="function"){u.callback=null,f=u.priorityLevel;var he=Z(u.expirationTime<=G);G=e.unstable_now(),typeof he=="function"?u.callback=he:u===n(l)&&i(l),x(G)}else i(l);u=n(l)}if(u!==null)var Ee=!0;else{var Ue=n(c);Ue!==null&&Y(w,Ue.startTime-G),Ee=!1}return Ee}finally{u=null,f=q,d=!1}}var _=!1,S=null,C=-1,L=5,D=-1;function I(){return!(e.unstable_now()-D<L)}function O(){if(S!==null){var F=e.unstable_now();D=F;var G=!0;try{G=S(!0,F)}finally{G?B():(_=!1,S=null)}}else _=!1}var B;if(typeof p=="function")B=function(){p(O)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,N=P.port2;P.port1.onmessage=O,B=function(){N.postMessage(null)}}else B=function(){v(O,0)};function z(F){S=F,_||(_=!0,B())}function Y(F,G){C=v(function(){F(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){m||d||(m=!0,z(M))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(F){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var q=f;f=G;try{return F()}finally{f=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,G){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var q=f;f=F;try{return G()}finally{f=q}},e.unstable_scheduleCallback=function(F,G,q){var Z=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Z+q:Z):q=Z,F){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=q+he,F={id:h++,callback:G,priorityLevel:F,startTime:q,expirationTime:he,sortIndex:-1},q>Z?(F.sortIndex=q,t(c,F),n(l)===null&&F===n(c)&&(y?(g(C),C=-1):y=!0,Y(w,q-Z))):(F.sortIndex=he,t(l,F),m||d||(m=!0,z(M))),F},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(F){var G=f;return function(){var q=f;f=G;try{return F.apply(this,arguments)}finally{f=q}}}})(v0);y0.exports=v0;var XM=y0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0=pt,yn=XM;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _0=new Set,Da={};function ys(e,t){po(e,t),po(e+"Capture",t)}function po(e,t){for(Da[e]=t,e=0;e<t.length;e++)_0.add(t[e])}var Oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),id=Object.prototype.hasOwnProperty,YM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fg={},Bg={};function $M(e){return id.call(Bg,e)?!0:id.call(Fg,e)?!1:YM.test(e)?Bg[e]=!0:(Fg[e]=!0,!1)}function JM(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ZM(e,t,n,i){if(t===null||typeof t>"u"||JM(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Qt(e,t,n,i,r,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){It[e]=new Qt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];It[t]=new Qt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){It[e]=new Qt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){It[e]=new Qt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){It[e]=new Qt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){It[e]=new Qt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){It[e]=new Qt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){It[e]=new Qt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){It[e]=new Qt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Vp=/[\-:]([a-z])/g;function Wp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Vp,Wp);It[t]=new Qt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Vp,Wp);It[t]=new Qt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Vp,Wp);It[t]=new Qt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){It[e]=new Qt(e,1,!1,e.toLowerCase(),null,!1,!1)});It.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){It[e]=new Qt(e,1,!1,e.toLowerCase(),null,!0,!0)});function jp(e,t,n,i){var r=It.hasOwnProperty(t)?It[t]:null;(r!==null?r.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ZM(t,n,r,i)&&(n=null),i||r===null?$M(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,i=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Hi=x0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vl=Symbol.for("react.element"),Hs=Symbol.for("react.portal"),Gs=Symbol.for("react.fragment"),qp=Symbol.for("react.strict_mode"),rd=Symbol.for("react.profiler"),w0=Symbol.for("react.provider"),M0=Symbol.for("react.context"),Xp=Symbol.for("react.forward_ref"),sd=Symbol.for("react.suspense"),od=Symbol.for("react.suspense_list"),Yp=Symbol.for("react.memo"),Ki=Symbol.for("react.lazy"),b0=Symbol.for("react.offscreen"),kg=Symbol.iterator;function $o(e){return e===null||typeof e!="object"?null:(e=kg&&e[kg]||e["@@iterator"],typeof e=="function"?e:null)}var ct=Object.assign,$h;function pa(e){if($h===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$h=t&&t[1]||""}return`
`+$h+e}var Jh=!1;function Zh(e,t){if(!e||Jh)return"";Jh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Jh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?pa(e):""}function QM(e){switch(e.tag){case 5:return pa(e.type);case 16:return pa("Lazy");case 13:return pa("Suspense");case 19:return pa("SuspenseList");case 0:case 2:case 15:return e=Zh(e.type,!1),e;case 11:return e=Zh(e.type.render,!1),e;case 1:return e=Zh(e.type,!0),e;default:return""}}function ad(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gs:return"Fragment";case Hs:return"Portal";case rd:return"Profiler";case qp:return"StrictMode";case sd:return"Suspense";case od:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case M0:return(e.displayName||"Context")+".Consumer";case w0:return(e._context.displayName||"Context")+".Provider";case Xp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Yp:return t=e.displayName||null,t!==null?t:ad(e.type)||"Memo";case Ki:t=e._payload,e=e._init;try{return ad(e(t))}catch{}}return null}function KM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ad(t);case 8:return t===qp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function S0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function eb(e){var t=S0(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wl(e){e._valueTracker||(e._valueTracker=eb(e))}function E0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=S0(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function fu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ld(e,t){var n=t.checked;return ct({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function zg(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=xr(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function T0(e,t){t=t.checked,t!=null&&jp(e,"checked",t,!1)}function cd(e,t){T0(e,t);var n=xr(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ud(e,t.type,n):t.hasOwnProperty("defaultValue")&&ud(e,t.type,xr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ug(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ud(e,t,n){(t!=="number"||fu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ma=Array.isArray;function ro(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+xr(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function hd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return ct({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Hg(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error($(92));if(ma(n)){if(1<n.length)throw Error($(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:xr(n)}}function A0(e,t){var n=xr(t.value),i=xr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function Gg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function C0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?C0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var jl,L0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(jl=jl||document.createElement("div"),jl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=jl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Oa(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var xa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tb=["Webkit","ms","Moz","O"];Object.keys(xa).forEach(function(e){tb.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xa[t]=xa[e]})});function R0(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||xa.hasOwnProperty(e)&&xa[e]?(""+t).trim():t+"px"}function P0(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=R0(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}var nb=ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dd(e,t){if(t){if(nb[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function pd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var md=null;function $p(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gd=null,so=null,oo=null;function Vg(e){if(e=Tl(e)){if(typeof gd!="function")throw Error($(280));var t=e.stateNode;t&&(t=xh(t),gd(e.stateNode,e.type,t))}}function N0(e){so?oo?oo.push(e):oo=[e]:so=e}function I0(){if(so){var e=so,t=oo;if(oo=so=null,Vg(e),t)for(e=0;e<t.length;e++)Vg(t[e])}}function D0(e,t){return e(t)}function O0(){}var Qh=!1;function F0(e,t,n){if(Qh)return e(t,n);Qh=!0;try{return D0(e,t,n)}finally{Qh=!1,(so!==null||oo!==null)&&(O0(),I0())}}function Fa(e,t){var n=e.stateNode;if(n===null)return null;var i=xh(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($(231,t,typeof n));return n}var yd=!1;if(Oi)try{var Jo={};Object.defineProperty(Jo,"passive",{get:function(){yd=!0}}),window.addEventListener("test",Jo,Jo),window.removeEventListener("test",Jo,Jo)}catch{yd=!1}function ib(e,t,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(h){this.onError(h)}}var _a=!1,du=null,pu=!1,vd=null,rb={onError:function(e){_a=!0,du=e}};function sb(e,t,n,i,r,s,o,a,l){_a=!1,du=null,ib.apply(rb,arguments)}function ob(e,t,n,i,r,s,o,a,l){if(sb.apply(this,arguments),_a){if(_a){var c=du;_a=!1,du=null}else throw Error($(198));pu||(pu=!0,vd=c)}}function vs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function B0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Wg(e){if(vs(e)!==e)throw Error($(188))}function ab(e){var t=e.alternate;if(!t){if(t=vs(e),t===null)throw Error($(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Wg(r),e;if(s===i)return Wg(r),t;s=s.sibling}throw Error($(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==i)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?e:t}function k0(e){return e=ab(e),e!==null?z0(e):null}function z0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=z0(e);if(t!==null)return t;e=e.sibling}return null}var U0=yn.unstable_scheduleCallback,jg=yn.unstable_cancelCallback,lb=yn.unstable_shouldYield,cb=yn.unstable_requestPaint,mt=yn.unstable_now,ub=yn.unstable_getCurrentPriorityLevel,Jp=yn.unstable_ImmediatePriority,H0=yn.unstable_UserBlockingPriority,mu=yn.unstable_NormalPriority,hb=yn.unstable_LowPriority,G0=yn.unstable_IdlePriority,mh=null,li=null;function fb(e){if(li&&typeof li.onCommitFiberRoot=="function")try{li.onCommitFiberRoot(mh,e,void 0,(e.current.flags&128)===128)}catch{}}var jn=Math.clz32?Math.clz32:mb,db=Math.log,pb=Math.LN2;function mb(e){return e>>>=0,e===0?32:31-(db(e)/pb|0)|0}var ql=64,Xl=4194304;function ga(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gu(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=ga(a):(s&=o,s!==0&&(i=ga(s)))}else o=n&~r,o!==0?i=ga(o):s!==0&&(i=ga(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&r)&&(r=i&-i,s=t&-t,r>=s||r===16&&(s&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-jn(t),r=1<<n,i|=e[n],t&=~r;return i}function gb(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yb(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-jn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=gb(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function xd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function V0(){var e=ql;return ql<<=1,!(ql&4194240)&&(ql=64),e}function Kh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Sl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-jn(t),e[t]=n}function vb(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-jn(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}function Zp(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-jn(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var Ge=0;function W0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var j0,Qp,q0,X0,Y0,_d=!1,Yl=[],ar=null,lr=null,cr=null,Ba=new Map,ka=new Map,tr=[],xb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qg(e,t){switch(e){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":Ba.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ka.delete(t.pointerId)}}function Zo(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=Tl(t),t!==null&&Qp(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function _b(e,t,n,i,r){switch(t){case"focusin":return ar=Zo(ar,e,t,n,i,r),!0;case"dragenter":return lr=Zo(lr,e,t,n,i,r),!0;case"mouseover":return cr=Zo(cr,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Ba.set(s,Zo(Ba.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ka.set(s,Zo(ka.get(s)||null,e,t,n,i,r)),!0}return!1}function $0(e){var t=qr(e.target);if(t!==null){var n=vs(t);if(n!==null){if(t=n.tag,t===13){if(t=B0(n),t!==null){e.blockedOn=t,Y0(e.priority,function(){q0(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=wd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);md=i,n.target.dispatchEvent(i),md=null}else return t=Tl(n),t!==null&&Qp(t),e.blockedOn=n,!1;t.shift()}return!0}function Xg(e,t,n){Jc(e)&&n.delete(t)}function wb(){_d=!1,ar!==null&&Jc(ar)&&(ar=null),lr!==null&&Jc(lr)&&(lr=null),cr!==null&&Jc(cr)&&(cr=null),Ba.forEach(Xg),ka.forEach(Xg)}function Qo(e,t){e.blockedOn===t&&(e.blockedOn=null,_d||(_d=!0,yn.unstable_scheduleCallback(yn.unstable_NormalPriority,wb)))}function za(e){function t(r){return Qo(r,e)}if(0<Yl.length){Qo(Yl[0],e);for(var n=1;n<Yl.length;n++){var i=Yl[n];i.blockedOn===e&&(i.blockedOn=null)}}for(ar!==null&&Qo(ar,e),lr!==null&&Qo(lr,e),cr!==null&&Qo(cr,e),Ba.forEach(t),ka.forEach(t),n=0;n<tr.length;n++)i=tr[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<tr.length&&(n=tr[0],n.blockedOn===null);)$0(n),n.blockedOn===null&&tr.shift()}var ao=Hi.ReactCurrentBatchConfig,yu=!0;function Mb(e,t,n,i){var r=Ge,s=ao.transition;ao.transition=null;try{Ge=1,Kp(e,t,n,i)}finally{Ge=r,ao.transition=s}}function bb(e,t,n,i){var r=Ge,s=ao.transition;ao.transition=null;try{Ge=4,Kp(e,t,n,i)}finally{Ge=r,ao.transition=s}}function Kp(e,t,n,i){if(yu){var r=wd(e,t,n,i);if(r===null)uf(e,t,i,vu,n),qg(e,i);else if(_b(r,e,t,n,i))i.stopPropagation();else if(qg(e,i),t&4&&-1<xb.indexOf(e)){for(;r!==null;){var s=Tl(r);if(s!==null&&j0(s),s=wd(e,t,n,i),s===null&&uf(e,t,i,vu,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else uf(e,t,i,null,n)}}var vu=null;function wd(e,t,n,i){if(vu=null,e=$p(i),e=qr(e),e!==null)if(t=vs(e),t===null)e=null;else if(n=t.tag,n===13){if(e=B0(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vu=e,null}function J0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ub()){case Jp:return 1;case H0:return 4;case mu:case hb:return 16;case G0:return 536870912;default:return 16}default:return 16}}var ir=null,em=null,Zc=null;function Z0(){if(Zc)return Zc;var e,t=em,n=t.length,i,r="value"in ir?ir.value:ir.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var o=n-e;for(i=1;i<=o&&t[n-i]===r[s-i];i++);return Zc=r.slice(e,1<i?1-i:void 0)}function Qc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $l(){return!0}function Yg(){return!1}function wn(e){function t(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$l:Yg,this.isPropagationStopped=Yg,this}return ct(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$l)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$l)},persist:function(){},isPersistent:$l}),t}var Fo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tm=wn(Fo),El=ct({},Fo,{view:0,detail:0}),Sb=wn(El),ef,tf,Ko,gh=ct({},El,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ko&&(Ko&&e.type==="mousemove"?(ef=e.screenX-Ko.screenX,tf=e.screenY-Ko.screenY):tf=ef=0,Ko=e),ef)},movementY:function(e){return"movementY"in e?e.movementY:tf}}),$g=wn(gh),Eb=ct({},gh,{dataTransfer:0}),Tb=wn(Eb),Ab=ct({},El,{relatedTarget:0}),nf=wn(Ab),Cb=ct({},Fo,{animationName:0,elapsedTime:0,pseudoElement:0}),Lb=wn(Cb),Rb=ct({},Fo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pb=wn(Rb),Nb=ct({},Fo,{data:0}),Jg=wn(Nb),Ib={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Db={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ob={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ob[e])?!!t[e]:!1}function nm(){return Fb}var Bb=ct({},El,{key:function(e){if(e.key){var t=Ib[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Db[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nm,charCode:function(e){return e.type==="keypress"?Qc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),kb=wn(Bb),zb=ct({},gh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zg=wn(zb),Ub=ct({},El,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nm}),Hb=wn(Ub),Gb=ct({},Fo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vb=wn(Gb),Wb=ct({},gh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jb=wn(Wb),qb=[9,13,27,32],im=Oi&&"CompositionEvent"in window,wa=null;Oi&&"documentMode"in document&&(wa=document.documentMode);var Xb=Oi&&"TextEvent"in window&&!wa,Q0=Oi&&(!im||wa&&8<wa&&11>=wa),Qg=" ",Kg=!1;function K0(e,t){switch(e){case"keyup":return qb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ex(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vs=!1;function Yb(e,t){switch(e){case"compositionend":return ex(t);case"keypress":return t.which!==32?null:(Kg=!0,Qg);case"textInput":return e=t.data,e===Qg&&Kg?null:e;default:return null}}function $b(e,t){if(Vs)return e==="compositionend"||!im&&K0(e,t)?(e=Z0(),Zc=em=ir=null,Vs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Q0&&t.locale!=="ko"?null:t.data;default:return null}}var Jb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ey(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Jb[e.type]:t==="textarea"}function tx(e,t,n,i){N0(i),t=xu(t,"onChange"),0<t.length&&(n=new tm("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Ma=null,Ua=null;function Zb(e){fx(e,0)}function yh(e){var t=qs(e);if(E0(t))return e}function Qb(e,t){if(e==="change")return t}var nx=!1;if(Oi){var rf;if(Oi){var sf="oninput"in document;if(!sf){var ty=document.createElement("div");ty.setAttribute("oninput","return;"),sf=typeof ty.oninput=="function"}rf=sf}else rf=!1;nx=rf&&(!document.documentMode||9<document.documentMode)}function ny(){Ma&&(Ma.detachEvent("onpropertychange",ix),Ua=Ma=null)}function ix(e){if(e.propertyName==="value"&&yh(Ua)){var t=[];tx(t,Ua,e,$p(e)),F0(Zb,t)}}function Kb(e,t,n){e==="focusin"?(ny(),Ma=t,Ua=n,Ma.attachEvent("onpropertychange",ix)):e==="focusout"&&ny()}function eS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return yh(Ua)}function tS(e,t){if(e==="click")return yh(t)}function nS(e,t){if(e==="input"||e==="change")return yh(t)}function iS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xn=typeof Object.is=="function"?Object.is:iS;function Ha(e,t){if(Xn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!id.call(t,r)||!Xn(e[r],t[r]))return!1}return!0}function iy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ry(e,t){var n=iy(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=iy(n)}}function rx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function sx(){for(var e=window,t=fu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=fu(e.document)}return t}function rm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function rS(e){var t=sx(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&rx(n.ownerDocument.documentElement,n)){if(i!==null&&rm(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=ry(n,s);var o=ry(n,i);r&&o&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sS=Oi&&"documentMode"in document&&11>=document.documentMode,Ws=null,Md=null,ba=null,bd=!1;function sy(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bd||Ws==null||Ws!==fu(i)||(i=Ws,"selectionStart"in i&&rm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ba&&Ha(ba,i)||(ba=i,i=xu(Md,"onSelect"),0<i.length&&(t=new tm("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Ws)))}function Jl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var js={animationend:Jl("Animation","AnimationEnd"),animationiteration:Jl("Animation","AnimationIteration"),animationstart:Jl("Animation","AnimationStart"),transitionend:Jl("Transition","TransitionEnd")},of={},ox={};Oi&&(ox=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function vh(e){if(of[e])return of[e];if(!js[e])return e;var t=js[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ox)return of[e]=t[n];return e}var ax=vh("animationend"),lx=vh("animationiteration"),cx=vh("animationstart"),ux=vh("transitionend"),hx=new Map,oy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){hx.set(e,t),ys(t,[e])}for(var af=0;af<oy.length;af++){var lf=oy[af],oS=lf.toLowerCase(),aS=lf[0].toUpperCase()+lf.slice(1);Rr(oS,"on"+aS)}Rr(ax,"onAnimationEnd");Rr(lx,"onAnimationIteration");Rr(cx,"onAnimationStart");Rr("dblclick","onDoubleClick");Rr("focusin","onFocus");Rr("focusout","onBlur");Rr(ux,"onTransitionEnd");po("onMouseEnter",["mouseout","mouseover"]);po("onMouseLeave",["mouseout","mouseover"]);po("onPointerEnter",["pointerout","pointerover"]);po("onPointerLeave",["pointerout","pointerover"]);ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lS=new Set("cancel close invalid load scroll toggle".split(" ").concat(ya));function ay(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,ob(i,t,void 0,e),e.currentTarget=null}function fx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;ay(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;ay(r,a,c),s=l}}}if(pu)throw e=vd,pu=!1,vd=null,e}function Qe(e,t){var n=t[Cd];n===void 0&&(n=t[Cd]=new Set);var i=e+"__bubble";n.has(i)||(dx(t,e,2,!1),n.add(i))}function cf(e,t,n){var i=0;t&&(i|=4),dx(n,e,i,t)}var Zl="_reactListening"+Math.random().toString(36).slice(2);function Ga(e){if(!e[Zl]){e[Zl]=!0,_0.forEach(function(n){n!=="selectionchange"&&(lS.has(n)||cf(n,!1,e),cf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Zl]||(t[Zl]=!0,cf("selectionchange",!1,t))}}function dx(e,t,n,i){switch(J0(t)){case 1:var r=Mb;break;case 4:r=bb;break;default:r=Kp}n=r.bind(null,t,n,e),r=void 0,!yd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function uf(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=qr(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}F0(function(){var c=s,h=$p(n),u=[];e:{var f=hx.get(e);if(f!==void 0){var d=tm,m=e;switch(e){case"keypress":if(Qc(n)===0)break e;case"keydown":case"keyup":d=kb;break;case"focusin":m="focus",d=nf;break;case"focusout":m="blur",d=nf;break;case"beforeblur":case"afterblur":d=nf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=$g;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=Tb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=Hb;break;case ax:case lx:case cx:d=Lb;break;case ux:d=Vb;break;case"scroll":d=Sb;break;case"wheel":d=jb;break;case"copy":case"cut":case"paste":d=Pb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Zg}var y=(t&4)!==0,v=!y&&e==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var p=c,x;p!==null;){x=p;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,g!==null&&(w=Fa(p,g),w!=null&&y.push(Va(p,w,x)))),v)break;p=p.return}0<y.length&&(f=new d(f,m,null,n,h),u.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",d=e==="mouseout"||e==="pointerout",f&&n!==md&&(m=n.relatedTarget||n.fromElement)&&(qr(m)||m[Fi]))break e;if((d||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,d?(m=n.relatedTarget||n.toElement,d=c,m=m?qr(m):null,m!==null&&(v=vs(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(d=null,m=c),d!==m)){if(y=$g,w="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(y=Zg,w="onPointerLeave",g="onPointerEnter",p="pointer"),v=d==null?f:qs(d),x=m==null?f:qs(m),f=new y(w,p+"leave",d,n,h),f.target=v,f.relatedTarget=x,w=null,qr(h)===c&&(y=new y(g,p+"enter",m,n,h),y.target=x,y.relatedTarget=v,w=y),v=w,d&&m)t:{for(y=d,g=m,p=0,x=y;x;x=Ms(x))p++;for(x=0,w=g;w;w=Ms(w))x++;for(;0<p-x;)y=Ms(y),p--;for(;0<x-p;)g=Ms(g),x--;for(;p--;){if(y===g||g!==null&&y===g.alternate)break t;y=Ms(y),g=Ms(g)}y=null}else y=null;d!==null&&ly(u,f,d,y,!1),m!==null&&v!==null&&ly(u,v,m,y,!0)}}e:{if(f=c?qs(c):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var M=Qb;else if(ey(f))if(nx)M=nS;else{M=eS;var _=Kb}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=tS);if(M&&(M=M(e,c))){tx(u,M,n,h);break e}_&&_(e,f,c),e==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&ud(f,"number",f.value)}switch(_=c?qs(c):window,e){case"focusin":(ey(_)||_.contentEditable==="true")&&(Ws=_,Md=c,ba=null);break;case"focusout":ba=Md=Ws=null;break;case"mousedown":bd=!0;break;case"contextmenu":case"mouseup":case"dragend":bd=!1,sy(u,n,h);break;case"selectionchange":if(sS)break;case"keydown":case"keyup":sy(u,n,h)}var S;if(im)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Vs?K0(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Q0&&n.locale!=="ko"&&(Vs||C!=="onCompositionStart"?C==="onCompositionEnd"&&Vs&&(S=Z0()):(ir=h,em="value"in ir?ir.value:ir.textContent,Vs=!0)),_=xu(c,C),0<_.length&&(C=new Jg(C,e,null,n,h),u.push({event:C,listeners:_}),S?C.data=S:(S=ex(n),S!==null&&(C.data=S)))),(S=Xb?Yb(e,n):$b(e,n))&&(c=xu(c,"onBeforeInput"),0<c.length&&(h=new Jg("onBeforeInput","beforeinput",null,n,h),u.push({event:h,listeners:c}),h.data=S))}fx(u,t)})}function Va(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xu(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Fa(e,n),s!=null&&i.unshift(Va(e,s,r)),s=Fa(e,t),s!=null&&i.push(Va(e,s,r))),e=e.return}return i}function Ms(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ly(e,t,n,i,r){for(var s=t._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Fa(n,s),l!=null&&o.unshift(Va(n,l,a))):r||(l=Fa(n,s),l!=null&&o.push(Va(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var cS=/\r\n?/g,uS=/\u0000|\uFFFD/g;function cy(e){return(typeof e=="string"?e:""+e).replace(cS,`
`).replace(uS,"")}function Ql(e,t,n){if(t=cy(t),cy(e)!==t&&n)throw Error($(425))}function _u(){}var Sd=null,Ed=null;function Td(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ad=typeof setTimeout=="function"?setTimeout:void 0,hS=typeof clearTimeout=="function"?clearTimeout:void 0,uy=typeof Promise=="function"?Promise:void 0,fS=typeof queueMicrotask=="function"?queueMicrotask:typeof uy<"u"?function(e){return uy.resolve(null).then(e).catch(dS)}:Ad;function dS(e){setTimeout(function(){throw e})}function hf(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){e.removeChild(r),za(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);za(t)}function ur(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Bo=Math.random().toString(36).slice(2),si="__reactFiber$"+Bo,Wa="__reactProps$"+Bo,Fi="__reactContainer$"+Bo,Cd="__reactEvents$"+Bo,pS="__reactListeners$"+Bo,mS="__reactHandles$"+Bo;function qr(e){var t=e[si];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Fi]||n[si]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=hy(e);e!==null;){if(n=e[si])return n;e=hy(e)}return t}e=n,n=e.parentNode}return null}function Tl(e){return e=e[si]||e[Fi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function xh(e){return e[Wa]||null}var Ld=[],Xs=-1;function Pr(e){return{current:e}}function et(e){0>Xs||(e.current=Ld[Xs],Ld[Xs]=null,Xs--)}function Je(e,t){Xs++,Ld[Xs]=e.current,e.current=t}var _r={},Ht=Pr(_r),rn=Pr(!1),ts=_r;function mo(e,t){var n=e.type.contextTypes;if(!n)return _r;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function sn(e){return e=e.childContextTypes,e!=null}function wu(){et(rn),et(Ht)}function fy(e,t,n){if(Ht.current!==_r)throw Error($(168));Je(Ht,t),Je(rn,n)}function px(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in t))throw Error($(108,KM(e)||"Unknown",r));return ct({},n,i)}function Mu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_r,ts=Ht.current,Je(Ht,e),Je(rn,rn.current),!0}function dy(e,t,n){var i=e.stateNode;if(!i)throw Error($(169));n?(e=px(e,t,ts),i.__reactInternalMemoizedMergedChildContext=e,et(rn),et(Ht),Je(Ht,e)):et(rn),Je(rn,n)}var Ti=null,_h=!1,ff=!1;function mx(e){Ti===null?Ti=[e]:Ti.push(e)}function gS(e){_h=!0,mx(e)}function Nr(){if(!ff&&Ti!==null){ff=!0;var e=0,t=Ge;try{var n=Ti;for(Ge=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}Ti=null,_h=!1}catch(r){throw Ti!==null&&(Ti=Ti.slice(e+1)),U0(Jp,Nr),r}finally{Ge=t,ff=!1}}return null}var Ys=[],$s=0,bu=null,Su=0,Mn=[],bn=0,ns=null,Ci=1,Li="";function Gr(e,t){Ys[$s++]=Su,Ys[$s++]=bu,bu=e,Su=t}function gx(e,t,n){Mn[bn++]=Ci,Mn[bn++]=Li,Mn[bn++]=ns,ns=e;var i=Ci;e=Li;var r=32-jn(i)-1;i&=~(1<<r),n+=1;var s=32-jn(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Ci=1<<32-jn(t)+r|n<<r|i,Li=s+e}else Ci=1<<s|n<<r|i,Li=e}function sm(e){e.return!==null&&(Gr(e,1),gx(e,1,0))}function om(e){for(;e===bu;)bu=Ys[--$s],Ys[$s]=null,Su=Ys[--$s],Ys[$s]=null;for(;e===ns;)ns=Mn[--bn],Mn[bn]=null,Li=Mn[--bn],Mn[bn]=null,Ci=Mn[--bn],Mn[bn]=null}var dn=null,hn=null,it=!1,Gn=null;function yx(e,t){var n=En(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function py(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,dn=e,hn=ur(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,dn=e,hn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ns!==null?{id:Ci,overflow:Li}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=En(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,dn=e,hn=null,!0):!1;default:return!1}}function Rd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Pd(e){if(it){var t=hn;if(t){var n=t;if(!py(e,t)){if(Rd(e))throw Error($(418));t=ur(n.nextSibling);var i=dn;t&&py(e,t)?yx(i,n):(e.flags=e.flags&-4097|2,it=!1,dn=e)}}else{if(Rd(e))throw Error($(418));e.flags=e.flags&-4097|2,it=!1,dn=e}}}function my(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;dn=e}function Kl(e){if(e!==dn)return!1;if(!it)return my(e),it=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Td(e.type,e.memoizedProps)),t&&(t=hn)){if(Rd(e))throw vx(),Error($(418));for(;t;)yx(e,t),t=ur(t.nextSibling)}if(my(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){hn=ur(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}hn=null}}else hn=dn?ur(e.stateNode.nextSibling):null;return!0}function vx(){for(var e=hn;e;)e=ur(e.nextSibling)}function go(){hn=dn=null,it=!1}function am(e){Gn===null?Gn=[e]:Gn.push(e)}var yS=Hi.ReactCurrentBatchConfig;function Un(e,t){if(e&&e.defaultProps){t=ct({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Eu=Pr(null),Tu=null,Js=null,lm=null;function cm(){lm=Js=Tu=null}function um(e){var t=Eu.current;et(Eu),e._currentValue=t}function Nd(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function lo(e,t){Tu=e,lm=Js=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(nn=!0),e.firstContext=null)}function Ln(e){var t=e._currentValue;if(lm!==e)if(e={context:e,memoizedValue:t,next:null},Js===null){if(Tu===null)throw Error($(308));Js=e,Tu.dependencies={lanes:0,firstContext:e}}else Js=Js.next=e;return t}var Xr=null;function hm(e){Xr===null?Xr=[e]:Xr.push(e)}function xx(e,t,n,i){var r=t.interleaved;return r===null?(n.next=n,hm(t)):(n.next=r.next,r.next=n),t.interleaved=n,Bi(e,i)}function Bi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var er=!1;function fm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _x(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hr(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,ze&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Bi(e,n)}return r=i.interleaved,r===null?(t.next=t,hm(i)):(t.next=r.next,r.next=t),i.interleaved=t,Bi(e,n)}function Kc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Zp(e,n)}}function gy(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Au(e,t,n,i){var r=e.updateQueue;er=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var u=r.baseState;o=0,h=c=l=null,a=s;do{var f=a.lane,d=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=e,y=a;switch(f=t,d=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){u=m.call(d,u,f);break e}u=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(d,u,f):m,f==null)break e;u=ct({},u,f);break e;case 2:er=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=d,l=u):h=h.next=d,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(l=u),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,t=r.shared.interleaved,t!==null){r=t;do o|=r.lane,r=r.next;while(r!==t)}else s===null&&(r.shared.lanes=0);rs|=o,e.lanes=o,e.memoizedState=u}}function yy(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error($(191,r));r.call(i)}}}var wx=new x0.Component().refs;function Id(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:ct({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var wh={isMounted:function(e){return(e=e._reactInternals)?vs(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Xt(),r=dr(e),s=Pi(i,r);s.payload=t,n!=null&&(s.callback=n),t=hr(e,s,r),t!==null&&(qn(t,e,r,i),Kc(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Xt(),r=dr(e),s=Pi(i,r);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=hr(e,s,r),t!==null&&(qn(t,e,r,i),Kc(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xt(),i=dr(e),r=Pi(n,i);r.tag=2,t!=null&&(r.callback=t),t=hr(e,r,i),t!==null&&(qn(t,e,i,n),Kc(t,e,i))}};function vy(e,t,n,i,r,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,o):t.prototype&&t.prototype.isPureReactComponent?!Ha(n,i)||!Ha(r,s):!0}function Mx(e,t,n){var i=!1,r=_r,s=t.contextType;return typeof s=="object"&&s!==null?s=Ln(s):(r=sn(t)?ts:Ht.current,i=t.contextTypes,s=(i=i!=null)?mo(e,r):_r),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=wh,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function xy(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&wh.enqueueReplaceState(t,t.state,null)}function Dd(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=wx,fm(e);var s=t.contextType;typeof s=="object"&&s!==null?r.context=Ln(s):(s=sn(t)?ts:Ht.current,r.context=mo(e,s)),r.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Id(e,t,s,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&wh.enqueueReplaceState(r,r.state,null),Au(e,n,r,i),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function ea(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var i=n.stateNode}if(!i)throw Error($(147,e));var r=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=r.refs;a===wx&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error($(284));if(!n._owner)throw Error($(290,e))}return e}function ec(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _y(e){var t=e._init;return t(e._payload)}function bx(e){function t(g,p){if(e){var x=g.deletions;x===null?(g.deletions=[p],g.flags|=16):x.push(p)}}function n(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function i(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function r(g,p){return g=pr(g,p),g.index=0,g.sibling=null,g}function s(g,p,x){return g.index=x,e?(x=g.alternate,x!==null?(x=x.index,x<p?(g.flags|=2,p):x):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,p,x,w){return p===null||p.tag!==6?(p=xf(x,g.mode,w),p.return=g,p):(p=r(p,x),p.return=g,p)}function l(g,p,x,w){var M=x.type;return M===Gs?h(g,p,x.props.children,w,x.key):p!==null&&(p.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ki&&_y(M)===p.type)?(w=r(p,x.props),w.ref=ea(g,p,x),w.return=g,w):(w=su(x.type,x.key,x.props,null,g.mode,w),w.ref=ea(g,p,x),w.return=g,w)}function c(g,p,x,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==x.containerInfo||p.stateNode.implementation!==x.implementation?(p=_f(x,g.mode,w),p.return=g,p):(p=r(p,x.children||[]),p.return=g,p)}function h(g,p,x,w,M){return p===null||p.tag!==7?(p=Qr(x,g.mode,w,M),p.return=g,p):(p=r(p,x),p.return=g,p)}function u(g,p,x){if(typeof p=="string"&&p!==""||typeof p=="number")return p=xf(""+p,g.mode,x),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Vl:return x=su(p.type,p.key,p.props,null,g.mode,x),x.ref=ea(g,null,p),x.return=g,x;case Hs:return p=_f(p,g.mode,x),p.return=g,p;case Ki:var w=p._init;return u(g,w(p._payload),x)}if(ma(p)||$o(p))return p=Qr(p,g.mode,x,null),p.return=g,p;ec(g,p)}return null}function f(g,p,x,w){var M=p!==null?p.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return M!==null?null:a(g,p,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Vl:return x.key===M?l(g,p,x,w):null;case Hs:return x.key===M?c(g,p,x,w):null;case Ki:return M=x._init,f(g,p,M(x._payload),w)}if(ma(x)||$o(x))return M!==null?null:h(g,p,x,w,null);ec(g,x)}return null}function d(g,p,x,w,M){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(x)||null,a(p,g,""+w,M);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Vl:return g=g.get(w.key===null?x:w.key)||null,l(p,g,w,M);case Hs:return g=g.get(w.key===null?x:w.key)||null,c(p,g,w,M);case Ki:var _=w._init;return d(g,p,x,_(w._payload),M)}if(ma(w)||$o(w))return g=g.get(x)||null,h(p,g,w,M,null);ec(p,w)}return null}function m(g,p,x,w){for(var M=null,_=null,S=p,C=p=0,L=null;S!==null&&C<x.length;C++){S.index>C?(L=S,S=null):L=S.sibling;var D=f(g,S,x[C],w);if(D===null){S===null&&(S=L);break}e&&S&&D.alternate===null&&t(g,S),p=s(D,p,C),_===null?M=D:_.sibling=D,_=D,S=L}if(C===x.length)return n(g,S),it&&Gr(g,C),M;if(S===null){for(;C<x.length;C++)S=u(g,x[C],w),S!==null&&(p=s(S,p,C),_===null?M=S:_.sibling=S,_=S);return it&&Gr(g,C),M}for(S=i(g,S);C<x.length;C++)L=d(S,g,C,x[C],w),L!==null&&(e&&L.alternate!==null&&S.delete(L.key===null?C:L.key),p=s(L,p,C),_===null?M=L:_.sibling=L,_=L);return e&&S.forEach(function(I){return t(g,I)}),it&&Gr(g,C),M}function y(g,p,x,w){var M=$o(x);if(typeof M!="function")throw Error($(150));if(x=M.call(x),x==null)throw Error($(151));for(var _=M=null,S=p,C=p=0,L=null,D=x.next();S!==null&&!D.done;C++,D=x.next()){S.index>C?(L=S,S=null):L=S.sibling;var I=f(g,S,D.value,w);if(I===null){S===null&&(S=L);break}e&&S&&I.alternate===null&&t(g,S),p=s(I,p,C),_===null?M=I:_.sibling=I,_=I,S=L}if(D.done)return n(g,S),it&&Gr(g,C),M;if(S===null){for(;!D.done;C++,D=x.next())D=u(g,D.value,w),D!==null&&(p=s(D,p,C),_===null?M=D:_.sibling=D,_=D);return it&&Gr(g,C),M}for(S=i(g,S);!D.done;C++,D=x.next())D=d(S,g,C,D.value,w),D!==null&&(e&&D.alternate!==null&&S.delete(D.key===null?C:D.key),p=s(D,p,C),_===null?M=D:_.sibling=D,_=D);return e&&S.forEach(function(O){return t(g,O)}),it&&Gr(g,C),M}function v(g,p,x,w){if(typeof x=="object"&&x!==null&&x.type===Gs&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Vl:e:{for(var M=x.key,_=p;_!==null;){if(_.key===M){if(M=x.type,M===Gs){if(_.tag===7){n(g,_.sibling),p=r(_,x.props.children),p.return=g,g=p;break e}}else if(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ki&&_y(M)===_.type){n(g,_.sibling),p=r(_,x.props),p.ref=ea(g,_,x),p.return=g,g=p;break e}n(g,_);break}else t(g,_);_=_.sibling}x.type===Gs?(p=Qr(x.props.children,g.mode,w,x.key),p.return=g,g=p):(w=su(x.type,x.key,x.props,null,g.mode,w),w.ref=ea(g,p,x),w.return=g,g=w)}return o(g);case Hs:e:{for(_=x.key;p!==null;){if(p.key===_)if(p.tag===4&&p.stateNode.containerInfo===x.containerInfo&&p.stateNode.implementation===x.implementation){n(g,p.sibling),p=r(p,x.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else t(g,p);p=p.sibling}p=_f(x,g.mode,w),p.return=g,g=p}return o(g);case Ki:return _=x._init,v(g,p,_(x._payload),w)}if(ma(x))return m(g,p,x,w);if($o(x))return y(g,p,x,w);ec(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,p!==null&&p.tag===6?(n(g,p.sibling),p=r(p,x),p.return=g,g=p):(n(g,p),p=xf(x,g.mode,w),p.return=g,g=p),o(g)):n(g,p)}return v}var yo=bx(!0),Sx=bx(!1),Al={},ci=Pr(Al),ja=Pr(Al),qa=Pr(Al);function Yr(e){if(e===Al)throw Error($(174));return e}function dm(e,t){switch(Je(qa,t),Je(ja,e),Je(ci,Al),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fd(t,e)}et(ci),Je(ci,t)}function vo(){et(ci),et(ja),et(qa)}function Ex(e){Yr(qa.current);var t=Yr(ci.current),n=fd(t,e.type);t!==n&&(Je(ja,e),Je(ci,n))}function pm(e){ja.current===e&&(et(ci),et(ja))}var ot=Pr(0);function Cu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var df=[];function mm(){for(var e=0;e<df.length;e++)df[e]._workInProgressVersionPrimary=null;df.length=0}var eu=Hi.ReactCurrentDispatcher,pf=Hi.ReactCurrentBatchConfig,is=0,lt=null,wt=null,Tt=null,Lu=!1,Sa=!1,Xa=0,vS=0;function Ot(){throw Error($(321))}function gm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xn(e[n],t[n]))return!1;return!0}function ym(e,t,n,i,r,s){if(is=s,lt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,eu.current=e===null||e.memoizedState===null?MS:bS,e=n(i,r),Sa){s=0;do{if(Sa=!1,Xa=0,25<=s)throw Error($(301));s+=1,Tt=wt=null,t.updateQueue=null,eu.current=SS,e=n(i,r)}while(Sa)}if(eu.current=Ru,t=wt!==null&&wt.next!==null,is=0,Tt=wt=lt=null,Lu=!1,t)throw Error($(300));return e}function vm(){var e=Xa!==0;return Xa=0,e}function ni(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?lt.memoizedState=Tt=e:Tt=Tt.next=e,Tt}function Rn(){if(wt===null){var e=lt.alternate;e=e!==null?e.memoizedState:null}else e=wt.next;var t=Tt===null?lt.memoizedState:Tt.next;if(t!==null)Tt=t,wt=e;else{if(e===null)throw Error($(310));wt=e,e={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},Tt===null?lt.memoizedState=Tt=e:Tt=Tt.next=e}return Tt}function Ya(e,t){return typeof t=="function"?t(e):t}function mf(e){var t=Rn(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var i=wt,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((is&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var u={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=u,o=i):l=l.next=u,lt.lanes|=h,rs|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Xn(i,t.memoizedState)||(nn=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=l,n.lastRenderedState=i}if(e=n.interleaved,e!==null){r=e;do s=r.lane,lt.lanes|=s,rs|=s,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function gf(e){var t=Rn(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=e(s,o.action),o=o.next;while(o!==r);Xn(s,t.memoizedState)||(nn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function Tx(){}function Ax(e,t){var n=lt,i=Rn(),r=t(),s=!Xn(i.memoizedState,r);if(s&&(i.memoizedState=r,nn=!0),i=i.queue,xm(Rx.bind(null,n,i,e),[e]),i.getSnapshot!==t||s||Tt!==null&&Tt.memoizedState.tag&1){if(n.flags|=2048,$a(9,Lx.bind(null,n,i,r,t),void 0,null),Ct===null)throw Error($(349));is&30||Cx(n,t,r)}return r}function Cx(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=lt.updateQueue,t===null?(t={lastEffect:null,stores:null},lt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Lx(e,t,n,i){t.value=n,t.getSnapshot=i,Px(t)&&Nx(e)}function Rx(e,t,n){return n(function(){Px(t)&&Nx(e)})}function Px(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xn(e,n)}catch{return!0}}function Nx(e){var t=Bi(e,1);t!==null&&qn(t,e,1,-1)}function wy(e){var t=ni();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:e},t.queue=e,e=e.dispatch=wS.bind(null,lt,e),[t.memoizedState,e]}function $a(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=lt.updateQueue,t===null?(t={lastEffect:null,stores:null},lt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function Ix(){return Rn().memoizedState}function tu(e,t,n,i){var r=ni();lt.flags|=e,r.memoizedState=$a(1|t,n,void 0,i===void 0?null:i)}function Mh(e,t,n,i){var r=Rn();i=i===void 0?null:i;var s=void 0;if(wt!==null){var o=wt.memoizedState;if(s=o.destroy,i!==null&&gm(i,o.deps)){r.memoizedState=$a(t,n,s,i);return}}lt.flags|=e,r.memoizedState=$a(1|t,n,s,i)}function My(e,t){return tu(8390656,8,e,t)}function xm(e,t){return Mh(2048,8,e,t)}function Dx(e,t){return Mh(4,2,e,t)}function Ox(e,t){return Mh(4,4,e,t)}function Fx(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Bx(e,t,n){return n=n!=null?n.concat([e]):null,Mh(4,4,Fx.bind(null,t,e),n)}function _m(){}function kx(e,t){var n=Rn();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&gm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function zx(e,t){var n=Rn();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&gm(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ux(e,t,n){return is&21?(Xn(n,t)||(n=V0(),lt.lanes|=n,rs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,nn=!0),e.memoizedState=n)}function xS(e,t){var n=Ge;Ge=n!==0&&4>n?n:4,e(!0);var i=pf.transition;pf.transition={};try{e(!1),t()}finally{Ge=n,pf.transition=i}}function Hx(){return Rn().memoizedState}function _S(e,t,n){var i=dr(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Gx(e))Vx(t,n);else if(n=xx(e,t,n,i),n!==null){var r=Xt();qn(n,e,i,r),Wx(n,t,i)}}function wS(e,t,n){var i=dr(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gx(e))Vx(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Xn(a,o)){var l=t.interleaved;l===null?(r.next=r,hm(t)):(r.next=l.next,l.next=r),t.interleaved=r;return}}catch{}finally{}n=xx(e,t,r,i),n!==null&&(r=Xt(),qn(n,e,i,r),Wx(n,t,i))}}function Gx(e){var t=e.alternate;return e===lt||t!==null&&t===lt}function Vx(e,t){Sa=Lu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wx(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Zp(e,n)}}var Ru={readContext:Ln,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},MS={readContext:Ln,useCallback:function(e,t){return ni().memoizedState=[e,t===void 0?null:t],e},useContext:Ln,useEffect:My,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,tu(4194308,4,Fx.bind(null,t,e),n)},useLayoutEffect:function(e,t){return tu(4194308,4,e,t)},useInsertionEffect:function(e,t){return tu(4,2,e,t)},useMemo:function(e,t){var n=ni();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=ni();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=_S.bind(null,lt,e),[i.memoizedState,e]},useRef:function(e){var t=ni();return e={current:e},t.memoizedState=e},useState:wy,useDebugValue:_m,useDeferredValue:function(e){return ni().memoizedState=e},useTransition:function(){var e=wy(!1),t=e[0];return e=xS.bind(null,e[1]),ni().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=lt,r=ni();if(it){if(n===void 0)throw Error($(407));n=n()}else{if(n=t(),Ct===null)throw Error($(349));is&30||Cx(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,My(Rx.bind(null,i,s,e),[e]),i.flags|=2048,$a(9,Lx.bind(null,i,s,n,t),void 0,null),n},useId:function(){var e=ni(),t=Ct.identifierPrefix;if(it){var n=Li,i=Ci;n=(i&~(1<<32-jn(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=Xa++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=vS++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},bS={readContext:Ln,useCallback:kx,useContext:Ln,useEffect:xm,useImperativeHandle:Bx,useInsertionEffect:Dx,useLayoutEffect:Ox,useMemo:zx,useReducer:mf,useRef:Ix,useState:function(){return mf(Ya)},useDebugValue:_m,useDeferredValue:function(e){var t=Rn();return Ux(t,wt.memoizedState,e)},useTransition:function(){var e=mf(Ya)[0],t=Rn().memoizedState;return[e,t]},useMutableSource:Tx,useSyncExternalStore:Ax,useId:Hx,unstable_isNewReconciler:!1},SS={readContext:Ln,useCallback:kx,useContext:Ln,useEffect:xm,useImperativeHandle:Bx,useInsertionEffect:Dx,useLayoutEffect:Ox,useMemo:zx,useReducer:gf,useRef:Ix,useState:function(){return gf(Ya)},useDebugValue:_m,useDeferredValue:function(e){var t=Rn();return wt===null?t.memoizedState=e:Ux(t,wt.memoizedState,e)},useTransition:function(){var e=gf(Ya)[0],t=Rn().memoizedState;return[e,t]},useMutableSource:Tx,useSyncExternalStore:Ax,useId:Hx,unstable_isNewReconciler:!1};function xo(e,t){try{var n="",i=t;do n+=QM(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:r,digest:null}}function yf(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Od(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ES=typeof WeakMap=="function"?WeakMap:Map;function jx(e,t,n){n=Pi(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Nu||(Nu=!0,jd=i),Od(e,t)},n}function qx(e,t,n){n=Pi(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){Od(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Od(e,t),typeof i!="function"&&(fr===null?fr=new Set([this]):fr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function by(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new ES;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=zS.bind(null,e,t,n),t.then(e,e))}function Sy(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ey(e,t,n,i,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Pi(-1,1),t.tag=2,hr(n,t,1))),n.lanes|=1),e)}var TS=Hi.ReactCurrentOwner,nn=!1;function Wt(e,t,n,i){t.child=e===null?Sx(t,null,n,i):yo(t,e.child,n,i)}function Ty(e,t,n,i,r){n=n.render;var s=t.ref;return lo(t,r),i=ym(e,t,n,i,s,r),n=vm(),e!==null&&!nn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,ki(e,t,r)):(it&&n&&sm(t),t.flags|=1,Wt(e,t,i,r),t.child)}function Ay(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!Cm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Xx(e,t,s,i,r)):(e=su(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ha,n(o,i)&&e.ref===t.ref)return ki(e,t,r)}return t.flags|=1,e=pr(s,i),e.ref=t.ref,e.return=t,t.child=e}function Xx(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(Ha(s,i)&&e.ref===t.ref)if(nn=!1,t.pendingProps=i=s,(e.lanes&r)!==0)e.flags&131072&&(nn=!0);else return t.lanes=e.lanes,ki(e,t,r)}return Fd(e,t,n,i,r)}function Yx(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(Qs,un),un|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Je(Qs,un),un|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Je(Qs,un),un|=i}else s!==null?(i=s.baseLanes|n,t.memoizedState=null):i=n,Je(Qs,un),un|=i;return Wt(e,t,r,n),t.child}function $x(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Fd(e,t,n,i,r){var s=sn(n)?ts:Ht.current;return s=mo(t,s),lo(t,r),n=ym(e,t,n,i,s,r),i=vm(),e!==null&&!nn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,ki(e,t,r)):(it&&i&&sm(t),t.flags|=1,Wt(e,t,n,r),t.child)}function Cy(e,t,n,i,r){if(sn(n)){var s=!0;Mu(t)}else s=!1;if(lo(t,r),t.stateNode===null)nu(e,t),Mx(t,n,i),Dd(t,n,i,r),i=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ln(c):(c=sn(n)?ts:Ht.current,c=mo(t,c));var h=n.getDerivedStateFromProps,u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&xy(t,o,i,c),er=!1;var f=t.memoizedState;o.state=f,Au(t,i,o,r),l=t.memoizedState,a!==i||f!==l||rn.current||er?(typeof h=="function"&&(Id(t,n,h,i),l=t.memoizedState),(a=er||vy(t,n,a,i,f,l,c))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,_x(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Un(t.type,a),o.props=c,u=t.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ln(l):(l=sn(n)?ts:Ht.current,l=mo(t,l));var d=n.getDerivedStateFromProps;(h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||f!==l)&&xy(t,o,i,l),er=!1,f=t.memoizedState,o.state=f,Au(t,i,o,r);var m=t.memoizedState;a!==u||f!==m||rn.current||er?(typeof d=="function"&&(Id(t,n,d,i),m=t.memoizedState),(c=er||vy(t,n,c,i,f,m,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,m,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=m),o.props=i,o.state=m,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),i=!1)}return Bd(e,t,n,i,s,r)}function Bd(e,t,n,i,r,s){$x(e,t);var o=(t.flags&128)!==0;if(!i&&!o)return r&&dy(t,n,!1),ki(e,t,s);i=t.stateNode,TS.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&o?(t.child=yo(t,e.child,null,s),t.child=yo(t,null,a,s)):Wt(e,t,a,s),t.memoizedState=i.state,r&&dy(t,n,!0),t.child}function Jx(e){var t=e.stateNode;t.pendingContext?fy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fy(e,t.context,!1),dm(e,t.containerInfo)}function Ly(e,t,n,i,r){return go(),am(r),t.flags|=256,Wt(e,t,n,i),t.child}var kd={dehydrated:null,treeContext:null,retryLane:0};function zd(e){return{baseLanes:e,cachePool:null,transitions:null}}function Zx(e,t,n){var i=t.pendingProps,r=ot.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(r&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),Je(ot,r&1),e===null)return Pd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Eh(o,i,0,null),e=Qr(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=zd(n),t.memoizedState=kd,e):wm(t,o));if(r=e.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return AS(e,t,o,i,a,r,n);if(s){s=i.fallback,o=t.mode,r=e.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&t.child!==r?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=pr(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=pr(a,s):(s=Qr(s,o,n,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,o=e.child.memoizedState,o=o===null?zd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=kd,i}return s=e.child,e=s.sibling,i=pr(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function wm(e,t){return t=Eh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function tc(e,t,n,i){return i!==null&&am(i),yo(t,e.child,null,n),e=wm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function AS(e,t,n,i,r,s,o){if(n)return t.flags&256?(t.flags&=-257,i=yf(Error($(422))),tc(e,t,o,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,r=t.mode,i=Eh({mode:"visible",children:i.children},r,0,null),s=Qr(s,r,o,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&yo(t,e.child,null,o),t.child.memoizedState=zd(o),t.memoizedState=kd,s);if(!(t.mode&1))return tc(e,t,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error($(419)),i=yf(s,i,void 0),tc(e,t,o,i)}if(a=(o&e.childLanes)!==0,nn||a){if(i=Ct,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Bi(e,r),qn(i,e,r,-1))}return Am(),i=yf(Error($(421))),tc(e,t,o,i)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=US.bind(null,e),r._reactRetry=t,null):(e=s.treeContext,hn=ur(r.nextSibling),dn=t,it=!0,Gn=null,e!==null&&(Mn[bn++]=Ci,Mn[bn++]=Li,Mn[bn++]=ns,Ci=e.id,Li=e.overflow,ns=t),t=wm(t,i.children),t.flags|=4096,t)}function Ry(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Nd(e.return,t,n)}function vf(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Qx(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(Wt(e,t,i.children,n),i=ot.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ry(e,n,t);else if(e.tag===19)Ry(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Je(ot,i),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Cu(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),vf(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Cu(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}vf(t,!0,n,null,s);break;case"together":vf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function nu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ki(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),rs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,n=pr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=pr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function CS(e,t,n){switch(t.tag){case 3:Jx(t),go();break;case 5:Ex(t);break;case 1:sn(t.type)&&Mu(t);break;case 4:dm(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Je(Eu,i._currentValue),i._currentValue=r;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Je(ot,ot.current&1),t.flags|=128,null):n&t.child.childLanes?Zx(e,t,n):(Je(ot,ot.current&1),e=ki(e,t,n),e!==null?e.sibling:null);Je(ot,ot.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return Qx(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Je(ot,ot.current),i)break;return null;case 22:case 23:return t.lanes=0,Yx(e,t,n)}return ki(e,t,n)}var Kx,Ud,e_,t_;Kx=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ud=function(){};e_=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Yr(ci.current);var s=null;switch(n){case"input":r=ld(e,r),i=ld(e,i),s=[];break;case"select":r=ct({},r,{value:void 0}),i=ct({},i,{value:void 0}),s=[];break;case"textarea":r=hd(e,r),i=hd(e,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=_u)}dd(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Da.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Da.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Qe("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};t_=function(e,t,n,i){n!==i&&(t.flags|=4)};function ta(e,t){if(!it)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function LS(e,t,n){var i=t.pendingProps;switch(om(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(t),null;case 1:return sn(t.type)&&wu(),Ft(t),null;case 3:return i=t.stateNode,vo(),et(rn),et(Ht),mm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Kl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Gn!==null&&(Yd(Gn),Gn=null))),Ud(e,t),Ft(t),null;case 5:pm(t);var r=Yr(qa.current);if(n=t.type,e!==null&&t.stateNode!=null)e_(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error($(166));return Ft(t),null}if(e=Yr(ci.current),Kl(t)){i=t.stateNode,n=t.type;var s=t.memoizedProps;switch(i[si]=t,i[Wa]=s,e=(t.mode&1)!==0,n){case"dialog":Qe("cancel",i),Qe("close",i);break;case"iframe":case"object":case"embed":Qe("load",i);break;case"video":case"audio":for(r=0;r<ya.length;r++)Qe(ya[r],i);break;case"source":Qe("error",i);break;case"img":case"image":case"link":Qe("error",i),Qe("load",i);break;case"details":Qe("toggle",i);break;case"input":zg(i,s),Qe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Qe("invalid",i);break;case"textarea":Hg(i,s),Qe("invalid",i)}dd(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ql(i.textContent,a,e),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ql(i.textContent,a,e),r=["children",""+a]):Da.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Qe("scroll",i)}switch(n){case"input":Wl(i),Ug(i,s,!0);break;case"textarea":Wl(i),Gg(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=_u)}i=r,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=C0(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=o.createElement(n,{is:i.is}):(e=o.createElement(n),n==="select"&&(o=e,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):e=o.createElementNS(e,n),e[si]=t,e[Wa]=i,Kx(e,t,!1,!1),t.stateNode=e;e:{switch(o=pd(n,i),n){case"dialog":Qe("cancel",e),Qe("close",e),r=i;break;case"iframe":case"object":case"embed":Qe("load",e),r=i;break;case"video":case"audio":for(r=0;r<ya.length;r++)Qe(ya[r],e);r=i;break;case"source":Qe("error",e),r=i;break;case"img":case"image":case"link":Qe("error",e),Qe("load",e),r=i;break;case"details":Qe("toggle",e),r=i;break;case"input":zg(e,i),r=ld(e,i),Qe("invalid",e);break;case"option":r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=ct({},i,{value:void 0}),Qe("invalid",e);break;case"textarea":Hg(e,i),r=hd(e,i),Qe("invalid",e);break;default:r=i}dd(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?P0(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&L0(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Oa(e,l):typeof l=="number"&&Oa(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Da.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Qe("scroll",e):l!=null&&jp(e,s,l,o))}switch(n){case"input":Wl(e),Ug(e,i,!1);break;case"textarea":Wl(e),Gg(e);break;case"option":i.value!=null&&e.setAttribute("value",""+xr(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?ro(e,!!i.multiple,s,!1):i.defaultValue!=null&&ro(e,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=_u)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ft(t),null;case 6:if(e&&t.stateNode!=null)t_(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error($(166));if(n=Yr(qa.current),Yr(ci.current),Kl(t)){if(i=t.stateNode,n=t.memoizedProps,i[si]=t,(s=i.nodeValue!==n)&&(e=dn,e!==null))switch(e.tag){case 3:Ql(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ql(i.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[si]=t,t.stateNode=i}return Ft(t),null;case 13:if(et(ot),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(it&&hn!==null&&t.mode&1&&!(t.flags&128))vx(),go(),t.flags|=98560,s=!1;else if(s=Kl(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error($(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[si]=t}else go(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ft(t),s=!1}else Gn!==null&&(Yd(Gn),Gn=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||ot.current&1?bt===0&&(bt=3):Am())),t.updateQueue!==null&&(t.flags|=4),Ft(t),null);case 4:return vo(),Ud(e,t),e===null&&Ga(t.stateNode.containerInfo),Ft(t),null;case 10:return um(t.type._context),Ft(t),null;case 17:return sn(t.type)&&wu(),Ft(t),null;case 19:if(et(ot),s=t.memoizedState,s===null)return Ft(t),null;if(i=(t.flags&128)!==0,o=s.rendering,o===null)if(i)ta(s,!1);else{if(bt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Cu(e),o!==null){for(t.flags|=128,ta(s,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)s=n,e=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Je(ot,ot.current&1|2),t.child}e=e.sibling}s.tail!==null&&mt()>_o&&(t.flags|=128,i=!0,ta(s,!1),t.lanes=4194304)}else{if(!i)if(e=Cu(o),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ta(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!it)return Ft(t),null}else 2*mt()-s.renderingStartTime>_o&&n!==1073741824&&(t.flags|=128,i=!0,ta(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=mt(),t.sibling=null,n=ot.current,Je(ot,i?n&1|2:n&1),t):(Ft(t),null);case 22:case 23:return Tm(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?un&1073741824&&(Ft(t),t.subtreeFlags&6&&(t.flags|=8192)):Ft(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function RS(e,t){switch(om(t),t.tag){case 1:return sn(t.type)&&wu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vo(),et(rn),et(Ht),mm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return pm(t),null;case 13:if(et(ot),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));go()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return et(ot),null;case 4:return vo(),null;case 10:return um(t.type._context),null;case 22:case 23:return Tm(),null;case 24:return null;default:return null}}var nc=!1,kt=!1,PS=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Zs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ht(e,t,i)}else n.current=null}function Hd(e,t,n){try{n()}catch(i){ht(e,t,i)}}var Py=!1;function NS(e,t){if(Sd=yu,e=sx(),rm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,u=e,f=null;t:for(;;){for(var d;u!==n||r!==0&&u.nodeType!==3||(a=o+r),u!==s||i!==0&&u.nodeType!==3||(l=o+i),u.nodeType===3&&(o+=u.nodeValue.length),(d=u.firstChild)!==null;)f=u,u=d;for(;;){if(u===e)break t;if(f===n&&++c===r&&(a=o),f===s&&++h===i&&(l=o),(d=u.nextSibling)!==null)break;u=f,f=u.parentNode}u=d}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ed={focusedElem:e,selectionRange:n},yu=!1,ce=t;ce!==null;)if(t=ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ce=e;else for(;ce!==null;){t=ce;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,v=m.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:Un(t.type,y),v);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(w){ht(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,ce=e;break}ce=t.return}return m=Py,Py=!1,m}function Ea(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,s!==void 0&&Hd(t,n,s)}r=r.next}while(r!==i)}}function bh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function Gd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function n_(e){var t=e.alternate;t!==null&&(e.alternate=null,n_(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[si],delete t[Wa],delete t[Cd],delete t[pS],delete t[mS])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function i_(e){return e.tag===5||e.tag===3||e.tag===4}function Ny(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||i_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vd(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=_u));else if(i!==4&&(e=e.child,e!==null))for(Vd(e,t,n),e=e.sibling;e!==null;)Vd(e,t,n),e=e.sibling}function Wd(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Wd(e,t,n),e=e.sibling;e!==null;)Wd(e,t,n),e=e.sibling}var Rt=null,Hn=!1;function Vi(e,t,n){for(n=n.child;n!==null;)r_(e,t,n),n=n.sibling}function r_(e,t,n){if(li&&typeof li.onCommitFiberUnmount=="function")try{li.onCommitFiberUnmount(mh,n)}catch{}switch(n.tag){case 5:kt||Zs(n,t);case 6:var i=Rt,r=Hn;Rt=null,Vi(e,t,n),Rt=i,Hn=r,Rt!==null&&(Hn?(e=Rt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Rt.removeChild(n.stateNode));break;case 18:Rt!==null&&(Hn?(e=Rt,n=n.stateNode,e.nodeType===8?hf(e.parentNode,n):e.nodeType===1&&hf(e,n),za(e)):hf(Rt,n.stateNode));break;case 4:i=Rt,r=Hn,Rt=n.stateNode.containerInfo,Hn=!0,Vi(e,t,n),Rt=i,Hn=r;break;case 0:case 11:case 14:case 15:if(!kt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Hd(n,t,o),r=r.next}while(r!==i)}Vi(e,t,n);break;case 1:if(!kt&&(Zs(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){ht(n,t,a)}Vi(e,t,n);break;case 21:Vi(e,t,n);break;case 22:n.mode&1?(kt=(i=kt)||n.memoizedState!==null,Vi(e,t,n),kt=i):Vi(e,t,n);break;default:Vi(e,t,n)}}function Iy(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new PS),t.forEach(function(i){var r=HS.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}}function On(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Rt=a.stateNode,Hn=!1;break e;case 3:Rt=a.stateNode.containerInfo,Hn=!0;break e;case 4:Rt=a.stateNode.containerInfo,Hn=!0;break e}a=a.return}if(Rt===null)throw Error($(160));r_(s,o,r),Rt=null,Hn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){ht(r,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)s_(t,e),t=t.sibling}function s_(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(On(t,e),Kn(e),i&4){try{Ea(3,e,e.return),bh(3,e)}catch(y){ht(e,e.return,y)}try{Ea(5,e,e.return)}catch(y){ht(e,e.return,y)}}break;case 1:On(t,e),Kn(e),i&512&&n!==null&&Zs(n,n.return);break;case 5:if(On(t,e),Kn(e),i&512&&n!==null&&Zs(n,n.return),e.flags&32){var r=e.stateNode;try{Oa(r,"")}catch(y){ht(e,e.return,y)}}if(i&4&&(r=e.stateNode,r!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&T0(r,s),pd(a,o);var c=pd(a,s);for(o=0;o<l.length;o+=2){var h=l[o],u=l[o+1];h==="style"?P0(r,u):h==="dangerouslySetInnerHTML"?L0(r,u):h==="children"?Oa(r,u):jp(r,h,u,c)}switch(a){case"input":cd(r,s);break;case"textarea":A0(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?ro(r,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?ro(r,!!s.multiple,s.defaultValue,!0):ro(r,!!s.multiple,s.multiple?[]:"",!1))}r[Wa]=s}catch(y){ht(e,e.return,y)}}break;case 6:if(On(t,e),Kn(e),i&4){if(e.stateNode===null)throw Error($(162));r=e.stateNode,s=e.memoizedProps;try{r.nodeValue=s}catch(y){ht(e,e.return,y)}}break;case 3:if(On(t,e),Kn(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{za(t.containerInfo)}catch(y){ht(e,e.return,y)}break;case 4:On(t,e),Kn(e);break;case 13:On(t,e),Kn(e),r=e.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Sm=mt())),i&4&&Iy(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(kt=(c=kt)||h,On(t,e),kt=c):On(t,e),Kn(e),i&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!h&&e.mode&1)for(ce=e,h=e.child;h!==null;){for(u=ce=h;ce!==null;){switch(f=ce,d=f.child,f.tag){case 0:case 11:case 14:case 15:Ea(4,f,f.return);break;case 1:Zs(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){i=f,n=f.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(y){ht(i,n,y)}}break;case 5:Zs(f,f.return);break;case 22:if(f.memoizedState!==null){Oy(u);continue}}d!==null?(d.return=f,ce=d):Oy(u)}h=h.sibling}e:for(h=null,u=e;;){if(u.tag===5){if(h===null){h=u;try{r=u.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,l=u.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=R0("display",o))}catch(y){ht(e,e.return,y)}}}else if(u.tag===6){if(h===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(y){ht(e,e.return,y)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:On(t,e),Kn(e),i&4&&Iy(e);break;case 21:break;default:On(t,e),Kn(e)}}function Kn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(i_(n)){var i=n;break e}n=n.return}throw Error($(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Oa(r,""),i.flags&=-33);var s=Ny(e);Wd(e,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Ny(e);Vd(e,a,o);break;default:throw Error($(161))}}catch(l){ht(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function IS(e,t,n){ce=e,o_(e)}function o_(e,t,n){for(var i=(e.mode&1)!==0;ce!==null;){var r=ce,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||nc;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||kt;a=nc;var c=kt;if(nc=o,(kt=l)&&!c)for(ce=r;ce!==null;)o=ce,l=o.child,o.tag===22&&o.memoizedState!==null?Fy(r):l!==null?(l.return=o,ce=l):Fy(r);for(;s!==null;)ce=s,o_(s),s=s.sibling;ce=r,nc=a,kt=c}Dy(e)}else r.subtreeFlags&8772&&s!==null?(s.return=r,ce=s):Dy(e)}}function Dy(e){for(;ce!==null;){var t=ce;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:kt||bh(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!kt)if(n===null)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Un(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&yy(t,s,i);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}yy(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var u=h.dehydrated;u!==null&&za(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}kt||t.flags&512&&Gd(t)}catch(f){ht(t,t.return,f)}}if(t===e){ce=null;break}if(n=t.sibling,n!==null){n.return=t.return,ce=n;break}ce=t.return}}function Oy(e){for(;ce!==null;){var t=ce;if(t===e){ce=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ce=n;break}ce=t.return}}function Fy(e){for(;ce!==null;){var t=ce;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{bh(4,t)}catch(l){ht(t,n,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var r=t.return;try{i.componentDidMount()}catch(l){ht(t,r,l)}}var s=t.return;try{Gd(t)}catch(l){ht(t,s,l)}break;case 5:var o=t.return;try{Gd(t)}catch(l){ht(t,o,l)}}}catch(l){ht(t,t.return,l)}if(t===e){ce=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ce=a;break}ce=t.return}}var DS=Math.ceil,Pu=Hi.ReactCurrentDispatcher,Mm=Hi.ReactCurrentOwner,Tn=Hi.ReactCurrentBatchConfig,ze=0,Ct=null,vt=null,Nt=0,un=0,Qs=Pr(0),bt=0,Ja=null,rs=0,Sh=0,bm=0,Ta=null,tn=null,Sm=0,_o=1/0,Ei=null,Nu=!1,jd=null,fr=null,ic=!1,rr=null,Iu=0,Aa=0,qd=null,iu=-1,ru=0;function Xt(){return ze&6?mt():iu!==-1?iu:iu=mt()}function dr(e){return e.mode&1?ze&2&&Nt!==0?Nt&-Nt:yS.transition!==null?(ru===0&&(ru=V0()),ru):(e=Ge,e!==0||(e=window.event,e=e===void 0?16:J0(e.type)),e):1}function qn(e,t,n,i){if(50<Aa)throw Aa=0,qd=null,Error($(185));Sl(e,n,i),(!(ze&2)||e!==Ct)&&(e===Ct&&(!(ze&2)&&(Sh|=n),bt===4&&nr(e,Nt)),on(e,i),n===1&&ze===0&&!(t.mode&1)&&(_o=mt()+500,_h&&Nr()))}function on(e,t){var n=e.callbackNode;yb(e,t);var i=gu(e,e===Ct?Nt:0);if(i===0)n!==null&&jg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&jg(n),t===1)e.tag===0?gS(By.bind(null,e)):mx(By.bind(null,e)),fS(function(){!(ze&6)&&Nr()}),n=null;else{switch(W0(i)){case 1:n=Jp;break;case 4:n=H0;break;case 16:n=mu;break;case 536870912:n=G0;break;default:n=mu}n=p_(n,a_.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function a_(e,t){if(iu=-1,ru=0,ze&6)throw Error($(327));var n=e.callbackNode;if(co()&&e.callbackNode!==n)return null;var i=gu(e,e===Ct?Nt:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Du(e,i);else{t=i;var r=ze;ze|=2;var s=c_();(Ct!==e||Nt!==t)&&(Ei=null,_o=mt()+500,Zr(e,t));do try{BS();break}catch(a){l_(e,a)}while(!0);cm(),Pu.current=s,ze=r,vt!==null?t=0:(Ct=null,Nt=0,t=bt)}if(t!==0){if(t===2&&(r=xd(e),r!==0&&(i=r,t=Xd(e,r))),t===1)throw n=Ja,Zr(e,0),nr(e,i),on(e,mt()),n;if(t===6)nr(e,i);else{if(r=e.current.alternate,!(i&30)&&!OS(r)&&(t=Du(e,i),t===2&&(s=xd(e),s!==0&&(i=s,t=Xd(e,s))),t===1))throw n=Ja,Zr(e,0),nr(e,i),on(e,mt()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error($(345));case 2:Vr(e,tn,Ei);break;case 3:if(nr(e,i),(i&130023424)===i&&(t=Sm+500-mt(),10<t)){if(gu(e,0)!==0)break;if(r=e.suspendedLanes,(r&i)!==i){Xt(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Ad(Vr.bind(null,e,tn,Ei),t);break}Vr(e,tn,Ei);break;case 4:if(nr(e,i),(i&4194240)===i)break;for(t=e.eventTimes,r=-1;0<i;){var o=31-jn(i);s=1<<o,o=t[o],o>r&&(r=o),i&=~s}if(i=r,i=mt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*DS(i/1960))-i,10<i){e.timeoutHandle=Ad(Vr.bind(null,e,tn,Ei),i);break}Vr(e,tn,Ei);break;case 5:Vr(e,tn,Ei);break;default:throw Error($(329))}}}return on(e,mt()),e.callbackNode===n?a_.bind(null,e):null}function Xd(e,t){var n=Ta;return e.current.memoizedState.isDehydrated&&(Zr(e,t).flags|=256),e=Du(e,t),e!==2&&(t=tn,tn=n,t!==null&&Yd(t)),e}function Yd(e){tn===null?tn=e:tn.push.apply(tn,e)}function OS(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Xn(s(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function nr(e,t){for(t&=~bm,t&=~Sh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-jn(t),i=1<<n;e[n]=-1,t&=~i}}function By(e){if(ze&6)throw Error($(327));co();var t=gu(e,0);if(!(t&1))return on(e,mt()),null;var n=Du(e,t);if(e.tag!==0&&n===2){var i=xd(e);i!==0&&(t=i,n=Xd(e,i))}if(n===1)throw n=Ja,Zr(e,0),nr(e,t),on(e,mt()),n;if(n===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vr(e,tn,Ei),on(e,mt()),null}function Em(e,t){var n=ze;ze|=1;try{return e(t)}finally{ze=n,ze===0&&(_o=mt()+500,_h&&Nr())}}function ss(e){rr!==null&&rr.tag===0&&!(ze&6)&&co();var t=ze;ze|=1;var n=Tn.transition,i=Ge;try{if(Tn.transition=null,Ge=1,e)return e()}finally{Ge=i,Tn.transition=n,ze=t,!(ze&6)&&Nr()}}function Tm(){un=Qs.current,et(Qs)}function Zr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,hS(n)),vt!==null)for(n=vt.return;n!==null;){var i=n;switch(om(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&wu();break;case 3:vo(),et(rn),et(Ht),mm();break;case 5:pm(i);break;case 4:vo();break;case 13:et(ot);break;case 19:et(ot);break;case 10:um(i.type._context);break;case 22:case 23:Tm()}n=n.return}if(Ct=e,vt=e=pr(e.current,null),Nt=un=t,bt=0,Ja=null,bm=Sh=rs=0,tn=Ta=null,Xr!==null){for(t=0;t<Xr.length;t++)if(n=Xr[t],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Xr=null}return e}function l_(e,t){do{var n=vt;try{if(cm(),eu.current=Ru,Lu){for(var i=lt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Lu=!1}if(is=0,Tt=wt=lt=null,Sa=!1,Xa=0,Mm.current=null,n===null||n.return===null){bt=1,Ja=t,vt=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=Nt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,u=h.tag;if(!(h.mode&1)&&(u===0||u===11||u===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var d=Sy(o);if(d!==null){d.flags&=-257,Ey(d,o,a,s,t),d.mode&1&&by(s,c,t),t=d,l=c;var m=t.updateQueue;if(m===null){var y=new Set;y.add(l),t.updateQueue=y}else m.add(l);break e}else{if(!(t&1)){by(s,c,t),Am();break e}l=Error($(426))}}else if(it&&a.mode&1){var v=Sy(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Ey(v,o,a,s,t),am(xo(l,a));break e}}s=l=xo(l,a),bt!==4&&(bt=2),Ta===null?Ta=[s]:Ta.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var g=jx(s,l,t);gy(s,g);break e;case 1:a=l;var p=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(fr===null||!fr.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=qx(s,a,t);gy(s,w);break e}}s=s.return}while(s!==null)}h_(n)}catch(M){t=M,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(!0)}function c_(){var e=Pu.current;return Pu.current=Ru,e===null?Ru:e}function Am(){(bt===0||bt===3||bt===2)&&(bt=4),Ct===null||!(rs&268435455)&&!(Sh&268435455)||nr(Ct,Nt)}function Du(e,t){var n=ze;ze|=2;var i=c_();(Ct!==e||Nt!==t)&&(Ei=null,Zr(e,t));do try{FS();break}catch(r){l_(e,r)}while(!0);if(cm(),ze=n,Pu.current=i,vt!==null)throw Error($(261));return Ct=null,Nt=0,bt}function FS(){for(;vt!==null;)u_(vt)}function BS(){for(;vt!==null&&!lb();)u_(vt)}function u_(e){var t=d_(e.alternate,e,un);e.memoizedProps=e.pendingProps,t===null?h_(e):vt=t,Mm.current=null}function h_(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=RS(n,t),n!==null){n.flags&=32767,vt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{bt=6,vt=null;return}}else if(n=LS(n,t,un),n!==null){vt=n;return}if(t=t.sibling,t!==null){vt=t;return}vt=t=e}while(t!==null);bt===0&&(bt=5)}function Vr(e,t,n){var i=Ge,r=Tn.transition;try{Tn.transition=null,Ge=1,kS(e,t,n,i)}finally{Tn.transition=r,Ge=i}return null}function kS(e,t,n,i){do co();while(rr!==null);if(ze&6)throw Error($(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(vb(e,s),e===Ct&&(vt=Ct=null,Nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ic||(ic=!0,p_(mu,function(){return co(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Tn.transition,Tn.transition=null;var o=Ge;Ge=1;var a=ze;ze|=4,Mm.current=null,NS(e,n),s_(n,e),rS(Ed),yu=!!Sd,Ed=Sd=null,e.current=n,IS(n),cb(),ze=a,Ge=o,Tn.transition=s}else e.current=n;if(ic&&(ic=!1,rr=e,Iu=r),s=e.pendingLanes,s===0&&(fr=null),fb(n.stateNode),on(e,mt()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Nu)throw Nu=!1,e=jd,jd=null,e;return Iu&1&&e.tag!==0&&co(),s=e.pendingLanes,s&1?e===qd?Aa++:(Aa=0,qd=e):Aa=0,Nr(),null}function co(){if(rr!==null){var e=W0(Iu),t=Tn.transition,n=Ge;try{if(Tn.transition=null,Ge=16>e?16:e,rr===null)var i=!1;else{if(e=rr,rr=null,Iu=0,ze&6)throw Error($(331));var r=ze;for(ze|=4,ce=e.current;ce!==null;){var s=ce,o=s.child;if(ce.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ce=c;ce!==null;){var h=ce;switch(h.tag){case 0:case 11:case 15:Ea(8,h,s)}var u=h.child;if(u!==null)u.return=h,ce=u;else for(;ce!==null;){h=ce;var f=h.sibling,d=h.return;if(n_(h),h===c){ce=null;break}if(f!==null){f.return=d,ce=f;break}ce=d}}}var m=s.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}ce=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ce=o;else e:for(;ce!==null;){if(s=ce,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ea(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,ce=g;break e}ce=s.return}}var p=e.current;for(ce=p;ce!==null;){o=ce;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ce=x;else e:for(o=p;ce!==null;){if(a=ce,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bh(9,a)}}catch(M){ht(a,a.return,M)}if(a===o){ce=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,ce=w;break e}ce=a.return}}if(ze=r,Nr(),li&&typeof li.onPostCommitFiberRoot=="function")try{li.onPostCommitFiberRoot(mh,e)}catch{}i=!0}return i}finally{Ge=n,Tn.transition=t}}return!1}function ky(e,t,n){t=xo(n,t),t=jx(e,t,1),e=hr(e,t,1),t=Xt(),e!==null&&(Sl(e,1,t),on(e,t))}function ht(e,t,n){if(e.tag===3)ky(e,e,n);else for(;t!==null;){if(t.tag===3){ky(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(fr===null||!fr.has(i))){e=xo(n,e),e=qx(t,e,1),t=hr(t,e,1),e=Xt(),t!==null&&(Sl(t,1,e),on(t,e));break}}t=t.return}}function zS(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=Xt(),e.pingedLanes|=e.suspendedLanes&n,Ct===e&&(Nt&n)===n&&(bt===4||bt===3&&(Nt&130023424)===Nt&&500>mt()-Sm?Zr(e,0):bm|=n),on(e,t)}function f_(e,t){t===0&&(e.mode&1?(t=Xl,Xl<<=1,!(Xl&130023424)&&(Xl=4194304)):t=1);var n=Xt();e=Bi(e,t),e!==null&&(Sl(e,t,n),on(e,n))}function US(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),f_(e,n)}function HS(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error($(314))}i!==null&&i.delete(t),f_(e,n)}var d_;d_=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||rn.current)nn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return nn=!1,CS(e,t,n);nn=!!(e.flags&131072)}else nn=!1,it&&t.flags&1048576&&gx(t,Su,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;nu(e,t),e=t.pendingProps;var r=mo(t,Ht.current);lo(t,n),r=ym(null,t,i,e,r,n);var s=vm();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,sn(i)?(s=!0,Mu(t)):s=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,fm(t),r.updater=wh,t.stateNode=r,r._reactInternals=t,Dd(t,i,e,n),t=Bd(null,t,i,!0,s,n)):(t.tag=0,it&&s&&sm(t),Wt(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(nu(e,t),e=t.pendingProps,r=i._init,i=r(i._payload),t.type=i,r=t.tag=VS(i),e=Un(i,e),r){case 0:t=Fd(null,t,i,e,n);break e;case 1:t=Cy(null,t,i,e,n);break e;case 11:t=Ty(null,t,i,e,n);break e;case 14:t=Ay(null,t,i,Un(i.type,e),n);break e}throw Error($(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Un(i,r),Fd(e,t,i,r,n);case 1:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Un(i,r),Cy(e,t,i,r,n);case 3:e:{if(Jx(t),e===null)throw Error($(387));i=t.pendingProps,s=t.memoizedState,r=s.element,_x(e,t),Au(t,i,null,n);var o=t.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){r=xo(Error($(423)),t),t=Ly(e,t,i,n,r);break e}else if(i!==r){r=xo(Error($(424)),t),t=Ly(e,t,i,n,r);break e}else for(hn=ur(t.stateNode.containerInfo.firstChild),dn=t,it=!0,Gn=null,n=Sx(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(go(),i===r){t=ki(e,t,n);break e}Wt(e,t,i,n)}t=t.child}return t;case 5:return Ex(t),e===null&&Pd(t),i=t.type,r=t.pendingProps,s=e!==null?e.memoizedProps:null,o=r.children,Td(i,r)?o=null:s!==null&&Td(i,s)&&(t.flags|=32),$x(e,t),Wt(e,t,o,n),t.child;case 6:return e===null&&Pd(t),null;case 13:return Zx(e,t,n);case 4:return dm(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=yo(t,null,i,n):Wt(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Un(i,r),Ty(e,t,i,r,n);case 7:return Wt(e,t,t.pendingProps,n),t.child;case 8:return Wt(e,t,t.pendingProps.children,n),t.child;case 12:return Wt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,o=r.value,Je(Eu,i._currentValue),i._currentValue=o,s!==null)if(Xn(s.value,o)){if(s.children===r.children&&!rn.current){t=ki(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Pi(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Nd(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Nd(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Wt(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,lo(t,n),r=Ln(r),i=i(r),t.flags|=1,Wt(e,t,i,n),t.child;case 14:return i=t.type,r=Un(i,t.pendingProps),r=Un(i.type,r),Ay(e,t,i,r,n);case 15:return Xx(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Un(i,r),nu(e,t),t.tag=1,sn(i)?(e=!0,Mu(t)):e=!1,lo(t,n),Mx(t,i,r),Dd(t,i,r,n),Bd(null,t,i,!0,e,n);case 19:return Qx(e,t,n);case 22:return Yx(e,t,n)}throw Error($(156,t.tag))};function p_(e,t){return U0(e,t)}function GS(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(e,t,n,i){return new GS(e,t,n,i)}function Cm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function VS(e){if(typeof e=="function")return Cm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Xp)return 11;if(e===Yp)return 14}return 2}function pr(e,t){var n=e.alternate;return n===null?(n=En(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function su(e,t,n,i,r,s){var o=2;if(i=e,typeof e=="function")Cm(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Gs:return Qr(n.children,r,s,t);case qp:o=8,r|=8;break;case rd:return e=En(12,n,t,r|2),e.elementType=rd,e.lanes=s,e;case sd:return e=En(13,n,t,r),e.elementType=sd,e.lanes=s,e;case od:return e=En(19,n,t,r),e.elementType=od,e.lanes=s,e;case b0:return Eh(n,r,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case w0:o=10;break e;case M0:o=9;break e;case Xp:o=11;break e;case Yp:o=14;break e;case Ki:o=16,i=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=En(o,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function Qr(e,t,n,i){return e=En(7,e,i,t),e.lanes=n,e}function Eh(e,t,n,i){return e=En(22,e,i,t),e.elementType=b0,e.lanes=n,e.stateNode={isHidden:!1},e}function xf(e,t,n){return e=En(6,e,null,t),e.lanes=n,e}function _f(e,t,n){return t=En(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function WS(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kh(0),this.expirationTimes=Kh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kh(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Lm(e,t,n,i,r,s,o,a,l){return e=new WS(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=En(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fm(s),e}function jS(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hs,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function m_(e){if(!e)return _r;e=e._reactInternals;e:{if(vs(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(sn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var n=e.type;if(sn(n))return px(e,n,t)}return t}function g_(e,t,n,i,r,s,o,a,l){return e=Lm(n,i,!0,e,r,s,o,a,l),e.context=m_(null),n=e.current,i=Xt(),r=dr(n),s=Pi(i,r),s.callback=t??null,hr(n,s,r),e.current.lanes=r,Sl(e,r,i),on(e,i),e}function Th(e,t,n,i){var r=t.current,s=Xt(),o=dr(r);return n=m_(n),t.context===null?t.context=n:t.pendingContext=n,t=Pi(s,o),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=hr(r,t,o),e!==null&&(qn(e,r,o,s),Kc(e,r,o)),o}function Ou(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Rm(e,t){zy(e,t),(e=e.alternate)&&zy(e,t)}function qS(){return null}var y_=typeof reportError=="function"?reportError:function(e){console.error(e)};function Pm(e){this._internalRoot=e}Ah.prototype.render=Pm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));Th(e,t,null,null)};Ah.prototype.unmount=Pm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ss(function(){Th(null,e,null,null)}),t[Fi]=null}};function Ah(e){this._internalRoot=e}Ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=X0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<tr.length&&t!==0&&t<tr[n].priority;n++);tr.splice(n,0,e),n===0&&$0(e)}};function Nm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ch(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Uy(){}function XS(e,t,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Ou(o);s.call(c)}}var o=g_(t,i,e,0,null,!1,!1,"",Uy);return e._reactRootContainer=o,e[Fi]=o.current,Ga(e.nodeType===8?e.parentNode:e),ss(),o}for(;r=e.lastChild;)e.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Ou(l);a.call(c)}}var l=Lm(e,0,!1,null,null,!1,!1,"",Uy);return e._reactRootContainer=l,e[Fi]=l.current,Ga(e.nodeType===8?e.parentNode:e),ss(function(){Th(t,l,n,i)}),l}function Lh(e,t,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Ou(o);a.call(l)}}Th(t,o,e,r)}else o=XS(n,t,e,r,i);return Ou(o)}j0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ga(t.pendingLanes);n!==0&&(Zp(t,n|1),on(t,mt()),!(ze&6)&&(_o=mt()+500,Nr()))}break;case 13:ss(function(){var i=Bi(e,1);if(i!==null){var r=Xt();qn(i,e,1,r)}}),Rm(e,1)}};Qp=function(e){if(e.tag===13){var t=Bi(e,134217728);if(t!==null){var n=Xt();qn(t,e,134217728,n)}Rm(e,134217728)}};q0=function(e){if(e.tag===13){var t=dr(e),n=Bi(e,t);if(n!==null){var i=Xt();qn(n,e,t,i)}Rm(e,t)}};X0=function(){return Ge};Y0=function(e,t){var n=Ge;try{return Ge=e,t()}finally{Ge=n}};gd=function(e,t,n){switch(t){case"input":if(cd(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=xh(i);if(!r)throw Error($(90));E0(i),cd(i,r)}}}break;case"textarea":A0(e,n);break;case"select":t=n.value,t!=null&&ro(e,!!n.multiple,t,!1)}};D0=Em;O0=ss;var YS={usingClientEntryPoint:!1,Events:[Tl,qs,xh,N0,I0,Em]},na={findFiberByHostInstance:qr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},$S={bundleType:na.bundleType,version:na.version,rendererPackageName:na.rendererPackageName,rendererConfig:na.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=k0(e),e===null?null:e.stateNode},findFiberByHostInstance:na.findFiberByHostInstance||qS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{mh=rc.inject($S),li=rc}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YS;_n.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nm(t))throw Error($(200));return jS(e,t,null,n)};_n.createRoot=function(e,t){if(!Nm(e))throw Error($(299));var n=!1,i="",r=y_;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Lm(e,1,!1,null,null,n,!1,i,r),e[Fi]=t.current,Ga(e.nodeType===8?e.parentNode:e),new Pm(t)};_n.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=k0(t),e=e===null?null:e.stateNode,e};_n.flushSync=function(e){return ss(e)};_n.hydrate=function(e,t,n){if(!Ch(t))throw Error($(200));return Lh(null,e,t,!0,n)};_n.hydrateRoot=function(e,t,n){if(!Nm(e))throw Error($(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=y_;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=g_(t,null,e,1,n??null,r,!1,s,o),e[Fi]=t.current,Ga(e),i)for(e=0;e<i.length;e++)n=i[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Ah(t)};_n.render=function(e,t,n){if(!Ch(t))throw Error($(200));return Lh(null,e,t,!1,n)};_n.unmountComponentAtNode=function(e){if(!Ch(e))throw Error($(40));return e._reactRootContainer?(ss(function(){Lh(null,null,e,!1,function(){e._reactRootContainer=null,e[Fi]=null})}),!0):!1};_n.unstable_batchedUpdates=Em;_n.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Ch(n))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return Lh(e,t,n,!1,i)};_n.version="18.2.0-next-9e3b772b8-20220608";function v_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(v_)}catch(e){console.error(e)}}v_(),g0.exports=_n;var JS=g0.exports,Hy=JS;nd.createRoot=Hy.createRoot,nd.hydrateRoot=Hy.hydrateRoot;var x_={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Gy=or.createContext&&or.createContext(x_),ZS=["attr","size","title"];function QS(e,t){if(e==null)return{};var n=KS(e,t),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)i=s[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function KS(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,s;for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function Fu(){return Fu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Fu.apply(this,arguments)}function Vy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Bu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vy(Object(n),!0).forEach(function(i){eE(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vy(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function eE(e,t,n){return t=tE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tE(e){var t=nE(e,"string");return typeof t=="symbol"?t:String(t)}function nE(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function __(e){return e&&e.map((t,n)=>or.createElement(t.tag,Bu({key:n},t.attr),__(t.child)))}function w_(e){return t=>or.createElement(iE,Fu({attr:Bu({},e.attr)},t),__(e.child))}function iE(e){var t=n=>{var{attr:i,size:r,title:s}=e,o=QS(e,ZS),a=r||n.size||"1em",l;return n.className&&(l=n.className),e.className&&(l=(l?l+" ":"")+e.className),or.createElement("svg",Fu({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,o,{className:l,style:Bu(Bu({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&or.createElement("title",null,s),e.children)};return Gy!==void 0?or.createElement(Gy.Consumer,null,n=>t(n)):t(x_)}function rE(e){return w_({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(e)}function sE(e){return w_({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"},child:[]}]})(e)}const oE=()=>ue.jsxs("div",{className:"heading flex justify-between text-4xl",children:[ue.jsx("h1",{className:"text-left text-azure-radiance-900 font-semibold",children:"Weathernaut"}),ue.jsx("a",{href:"https://github.com/amoeba25/Weathernaut",target:"_blank",children:ue.jsx(rE,{})})]}),aE=({cityData:e,currentCity:t,setCurrentCity:n,setPrevCity:i})=>{const[r,s]=pt.useState(""),o=pt.useRef(null),[a,l]=pt.useState(""),c=e.reduce((d,{country:m,cities:y})=>(y.filter(g=>g.toLowerCase().includes(r.toLowerCase())).forEach(g=>d.push(`${g}, ${m}`)),d),[]),h=d=>{s(d.target.value),l(d.target.value),o.current=d.target.value},u=d=>{d.preventDefault(),o.current&&(i(t),n(o.current),o.current=null,l(""))},f=c.slice(0,10);return ue.jsxs("div",{className:"box-border relative flex",children:[ue.jsx("input",{list:"cityData",className:"box-border w-full py-2 px-6 text-black rounded-full placeholder:text-grey",placeholder:"Search for location",onChange:h,value:a}),ue.jsx("div",{className:"btn-div flex self-center absolute right-0 mr-4",children:ue.jsx("button",{type:"submit",onClick:u,children:ue.jsx(sE,{className:"text-grey"})})}),r&&ue.jsx("datalist",{id:"cityData",children:f.map((d,m)=>ue.jsx("option",{children:d},m))})]})},lE=({cityData:e,currentCity:t,setCurrentCity:n,setPrevCity:i,unit:r,setUnit:s})=>ue.jsx("div",{className:"main-temp py-4",children:ue.jsx(aE,{cityData:e,currentCity:t,setCurrentCity:n,setPrevCity:i})});function M_(e,t){return function(){return e.apply(t,arguments)}}const{toString:cE}=Object.prototype,{getPrototypeOf:Im}=Object,Rh=(e=>t=>{const n=cE.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),mi=e=>(e=e.toLowerCase(),t=>Rh(t)===e),Ph=e=>t=>typeof t===e,{isArray:ko}=Array,Za=Ph("undefined");function uE(e){return e!==null&&!Za(e)&&e.constructor!==null&&!Za(e.constructor)&&An(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const b_=mi("ArrayBuffer");function hE(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&b_(e.buffer),t}const fE=Ph("string"),An=Ph("function"),S_=Ph("number"),Nh=e=>e!==null&&typeof e=="object",dE=e=>e===!0||e===!1,ou=e=>{if(Rh(e)!=="object")return!1;const t=Im(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},pE=mi("Date"),mE=mi("File"),gE=mi("Blob"),yE=mi("FileList"),vE=e=>Nh(e)&&An(e.pipe),xE=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||An(e.append)&&((t=Rh(e))==="formdata"||t==="object"&&An(e.toString)&&e.toString()==="[object FormData]"))},_E=mi("URLSearchParams"),wE=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Cl(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,r;if(typeof e!="object"&&(e=[e]),ko(e))for(i=0,r=e.length;i<r;i++)t.call(null,e[i],i,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let a;for(i=0;i<o;i++)a=s[i],t.call(null,e[a],a,e)}}function E_(e,t){t=t.toLowerCase();const n=Object.keys(e);let i=n.length,r;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const T_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,A_=e=>!Za(e)&&e!==T_;function $d(){const{caseless:e}=A_(this)&&this||{},t={},n=(i,r)=>{const s=e&&E_(t,r)||r;ou(t[s])&&ou(i)?t[s]=$d(t[s],i):ou(i)?t[s]=$d({},i):ko(i)?t[s]=i.slice():t[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Cl(arguments[i],n);return t}const ME=(e,t,n,{allOwnKeys:i}={})=>(Cl(t,(r,s)=>{n&&An(r)?e[s]=M_(r,n):e[s]=r},{allOwnKeys:i}),e),bE=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),SE=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},EE=(e,t,n,i)=>{let r,s,o;const a={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)o=r[s],(!i||i(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=n!==!1&&Im(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},TE=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},AE=e=>{if(!e)return null;if(ko(e))return e;let t=e.length;if(!S_(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},CE=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Im(Uint8Array)),LE=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=i.next())&&!r.done;){const s=r.value;t.call(e,s[0],s[1])}},RE=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},PE=mi("HTMLFormElement"),NE=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),Wy=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),IE=mi("RegExp"),C_=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};Cl(n,(r,s)=>{let o;(o=t(r,s,e))!==!1&&(i[s]=o||r)}),Object.defineProperties(e,i)},DE=e=>{C_(e,(t,n)=>{if(An(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(An(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},OE=(e,t)=>{const n={},i=r=>{r.forEach(s=>{n[s]=!0})};return ko(e)?i(e):i(String(e).split(t)),n},FE=()=>{},BE=(e,t)=>(e=+e,Number.isFinite(e)?e:t),wf="abcdefghijklmnopqrstuvwxyz",jy="0123456789",L_={DIGIT:jy,ALPHA:wf,ALPHA_DIGIT:wf+wf.toUpperCase()+jy},kE=(e=16,t=L_.ALPHA_DIGIT)=>{let n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n};function zE(e){return!!(e&&An(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const UE=e=>{const t=new Array(10),n=(i,r)=>{if(Nh(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[r]=i;const s=ko(i)?[]:{};return Cl(i,(o,a)=>{const l=n(o,r+1);!Za(l)&&(s[a]=l)}),t[r]=void 0,s}}return i};return n(e,0)},HE=mi("AsyncFunction"),GE=e=>e&&(Nh(e)||An(e))&&An(e.then)&&An(e.catch),H={isArray:ko,isArrayBuffer:b_,isBuffer:uE,isFormData:xE,isArrayBufferView:hE,isString:fE,isNumber:S_,isBoolean:dE,isObject:Nh,isPlainObject:ou,isUndefined:Za,isDate:pE,isFile:mE,isBlob:gE,isRegExp:IE,isFunction:An,isStream:vE,isURLSearchParams:_E,isTypedArray:CE,isFileList:yE,forEach:Cl,merge:$d,extend:ME,trim:wE,stripBOM:bE,inherits:SE,toFlatObject:EE,kindOf:Rh,kindOfTest:mi,endsWith:TE,toArray:AE,forEachEntry:LE,matchAll:RE,isHTMLForm:PE,hasOwnProperty:Wy,hasOwnProp:Wy,reduceDescriptors:C_,freezeMethods:DE,toObjectSet:OE,toCamelCase:NE,noop:FE,toFiniteNumber:BE,findKey:E_,global:T_,isContextDefined:A_,ALPHABET:L_,generateString:kE,isSpecCompliantForm:zE,toJSONObject:UE,isAsyncFn:HE,isThenable:GE};function Be(e,t,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}H.inherits(Be,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const R_=Be.prototype,P_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{P_[e]={value:e}});Object.defineProperties(Be,P_);Object.defineProperty(R_,"isAxiosError",{value:!0});Be.from=(e,t,n,i,r,s)=>{const o=Object.create(R_);return H.toFlatObject(e,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Be.call(o,e.message,t,n,i,r),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const VE=null;function Jd(e){return H.isPlainObject(e)||H.isArray(e)}function N_(e){return H.endsWith(e,"[]")?e.slice(0,-2):e}function qy(e,t,n){return e?e.concat(t).map(function(r,s){return r=N_(r),!n&&s?"["+r+"]":r}).join(n?".":""):t}function WE(e){return H.isArray(e)&&!e.some(Jd)}const jE=H.toFlatObject(H,{},null,function(t){return/^is[A-Z]/.test(t)});function Ih(e,t,n){if(!H.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=H.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,v){return!H.isUndefined(v[y])});const i=n.metaTokens,r=n.visitor||h,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(t);if(!H.isFunction(r))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(H.isDate(m))return m.toISOString();if(!l&&H.isBlob(m))throw new Be("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(m)||H.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function h(m,y,v){let g=m;if(m&&!v&&typeof m=="object"){if(H.endsWith(y,"{}"))y=i?y:y.slice(0,-2),m=JSON.stringify(m);else if(H.isArray(m)&&WE(m)||(H.isFileList(m)||H.endsWith(y,"[]"))&&(g=H.toArray(m)))return y=N_(y),g.forEach(function(x,w){!(H.isUndefined(x)||x===null)&&t.append(o===!0?qy([y],w,s):o===null?y:y+"[]",c(x))}),!1}return Jd(m)?!0:(t.append(qy(v,y,s),c(m)),!1)}const u=[],f=Object.assign(jE,{defaultVisitor:h,convertValue:c,isVisitable:Jd});function d(m,y){if(!H.isUndefined(m)){if(u.indexOf(m)!==-1)throw Error("Circular reference detected in "+y.join("."));u.push(m),H.forEach(m,function(g,p){(!(H.isUndefined(g)||g===null)&&r.call(t,g,H.isString(p)?p.trim():p,y,f))===!0&&d(g,y?y.concat(p):[p])}),u.pop()}}if(!H.isObject(e))throw new TypeError("data must be an object");return d(e),t}function Xy(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Dm(e,t){this._pairs=[],e&&Ih(e,this,t)}const I_=Dm.prototype;I_.append=function(t,n){this._pairs.push([t,n])};I_.toString=function(t){const n=t?function(i){return t.call(this,i,Xy)}:Xy;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function qE(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function D_(e,t,n){if(!t)return e;const i=n&&n.encode||qE,r=n&&n.serialize;let s;if(r?s=r(t,n):s=H.isURLSearchParams(t)?t.toString():new Dm(t,n).toString(i),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class XE{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){H.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Yy=XE,O_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},YE=typeof URLSearchParams<"u"?URLSearchParams:Dm,$E=typeof FormData<"u"?FormData:null,JE=typeof Blob<"u"?Blob:null,ZE={isBrowser:!0,classes:{URLSearchParams:YE,FormData:$E,Blob:JE},protocols:["http","https","file","blob","url","data"]},F_=typeof window<"u"&&typeof document<"u",QE=(e=>F_&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),KE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",eT=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:F_,hasStandardBrowserEnv:QE,hasStandardBrowserWebWorkerEnv:KE},Symbol.toStringTag,{value:"Module"})),oi={...eT,...ZE};function tT(e,t){return Ih(e,new oi.classes.URLSearchParams,Object.assign({visitor:function(n,i,r,s){return oi.isNode&&H.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function nT(e){return H.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function iT(e){const t={},n=Object.keys(e);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],t[s]=e[s];return t}function B_(e){function t(n,i,r,s){let o=n[s++];const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&H.isArray(r)?r.length:o,l?(H.hasOwnProp(r,o)?r[o]=[r[o],i]:r[o]=i,!a):((!r[o]||!H.isObject(r[o]))&&(r[o]=[]),t(n,i,r[o],s)&&H.isArray(r[o])&&(r[o]=iT(r[o])),!a)}if(H.isFormData(e)&&H.isFunction(e.entries)){const n={};return H.forEachEntry(e,(i,r)=>{t(nT(i),r,n,0)}),n}return null}function rT(e,t,n){if(H.isString(e))try{return(t||JSON.parse)(e),H.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const Om={transitional:O_,adapter:["xhr","http"],transformRequest:[function(t,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,s=H.isObject(t);if(s&&H.isHTMLForm(t)&&(t=new FormData(t)),H.isFormData(t))return r&&r?JSON.stringify(B_(t)):t;if(H.isArrayBuffer(t)||H.isBuffer(t)||H.isStream(t)||H.isFile(t)||H.isBlob(t))return t;if(H.isArrayBufferView(t))return t.buffer;if(H.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return tT(t,this.formSerializer).toString();if((a=H.isFileList(t))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ih(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),rT(t)):t}],transformResponse:[function(t){const n=this.transitional||Om.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(t&&H.isString(t)&&(i&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?Be.from(a,Be.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:oi.classes.FormData,Blob:oi.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],e=>{Om.headers[e]={}});const Fm=Om,sT=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oT=e=>{const t={};let n,i,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),i=o.substring(r+1).trim(),!(!n||t[n]&&sT[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},$y=Symbol("internals");function ia(e){return e&&String(e).trim().toLowerCase()}function au(e){return e===!1||e==null?e:H.isArray(e)?e.map(au):String(e)}function aT(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const lT=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Mf(e,t,n,i,r){if(H.isFunction(i))return i.call(this,t,n);if(r&&(t=n),!!H.isString(t)){if(H.isString(i))return t.indexOf(i)!==-1;if(H.isRegExp(i))return i.test(t)}}function cT(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function uT(e,t){const n=H.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(r,s,o){return this[i].call(this,t,r,s,o)},configurable:!0})})}class Dh{constructor(t){t&&this.set(t)}set(t,n,i){const r=this;function s(a,l,c){const h=ia(l);if(!h)throw new Error("header name must be a non-empty string");const u=H.findKey(r,h);(!u||r[u]===void 0||c===!0||c===void 0&&r[u]!==!1)&&(r[u||l]=au(a))}const o=(a,l)=>H.forEach(a,(c,h)=>s(c,h,l));return H.isPlainObject(t)||t instanceof this.constructor?o(t,n):H.isString(t)&&(t=t.trim())&&!lT(t)?o(oT(t),n):t!=null&&s(n,t,i),this}get(t,n){if(t=ia(t),t){const i=H.findKey(this,t);if(i){const r=this[i];if(!n)return r;if(n===!0)return aT(r);if(H.isFunction(n))return n.call(this,r,i);if(H.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ia(t),t){const i=H.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||Mf(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let r=!1;function s(o){if(o=ia(o),o){const a=H.findKey(i,o);a&&(!n||Mf(i,i[a],a,n))&&(delete i[a],r=!0)}}return H.isArray(t)?t.forEach(s):s(t),r}clear(t){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const s=n[i];(!t||Mf(this,this[s],s,t,!0))&&(delete this[s],r=!0)}return r}normalize(t){const n=this,i={};return H.forEach(this,(r,s)=>{const o=H.findKey(i,s);if(o){n[o]=au(r),delete n[s];return}const a=t?cT(s):String(s).trim();a!==s&&delete n[s],n[a]=au(r),i[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return H.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=t&&H.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(r=>i.set(r)),i}static accessor(t){const i=(this[$y]=this[$y]={accessors:{}}).accessors,r=this.prototype;function s(o){const a=ia(o);i[a]||(uT(r,o),i[a]=!0)}return H.isArray(t)?t.forEach(s):s(t),this}}Dh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(Dh.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});H.freezeMethods(Dh);const Ni=Dh;function bf(e,t){const n=this||Fm,i=t||n,r=Ni.from(i.headers);let s=i.data;return H.forEach(e,function(a){s=a.call(n,s,r.normalize(),t?t.status:void 0)}),r.normalize(),s}function k_(e){return!!(e&&e.__CANCEL__)}function Ll(e,t,n){Be.call(this,e??"canceled",Be.ERR_CANCELED,t,n),this.name="CanceledError"}H.inherits(Ll,Be,{__CANCEL__:!0});function hT(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new Be("Request failed with status code "+n.status,[Be.ERR_BAD_REQUEST,Be.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const fT=oi.hasStandardBrowserEnv?{write(e,t,n,i,r,s){const o=[e+"="+encodeURIComponent(t)];H.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),H.isString(i)&&o.push("path="+i),H.isString(r)&&o.push("domain="+r),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function dT(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function pT(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function z_(e,t){return e&&!dT(t)?pT(e,t):t}const mT=oi.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function r(s){let o=s;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=r(window.location.href),function(o){const a=H.isString(o)?r(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}();function gT(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function yT(e,t){e=e||10;const n=new Array(e),i=new Array(e);let r=0,s=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),h=i[s];o||(o=c),n[r]=l,i[r]=c;let u=s,f=0;for(;u!==r;)f+=n[u++],u=u%e;if(r=(r+1)%e,r===s&&(s=(s+1)%e),c-o<t)return;const d=h&&c-h;return d?Math.round(f*1e3/d):void 0}}function Jy(e,t){let n=0;const i=yT(50,250);return r=>{const s=r.loaded,o=r.lengthComputable?r.total:void 0,a=s-n,l=i(a),c=s<=o;n=s;const h={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-s)/l:void 0,event:r};h[t?"download":"upload"]=!0,e(h)}}const vT=typeof XMLHttpRequest<"u",xT=vT&&function(e){return new Promise(function(n,i){let r=e.data;const s=Ni.from(e.headers).normalize();let{responseType:o,withXSRFToken:a}=e,l;function c(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}let h;if(H.isFormData(r)){if(oi.hasStandardBrowserEnv||oi.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((h=s.getContentType())!==!1){const[y,...v]=h?h.split(";").map(g=>g.trim()).filter(Boolean):[];s.setContentType([y||"multipart/form-data",...v].join("; "))}}let u=new XMLHttpRequest;if(e.auth){const y=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.set("Authorization","Basic "+btoa(y+":"+v))}const f=z_(e.baseURL,e.url);u.open(e.method.toUpperCase(),D_(f,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function d(){if(!u)return;const y=Ni.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),g={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:y,config:e,request:u};hT(function(x){n(x),c()},function(x){i(x),c()},g),u=null}if("onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(d)},u.onabort=function(){u&&(i(new Be("Request aborted",Be.ECONNABORTED,e,u)),u=null)},u.onerror=function(){i(new Be("Network Error",Be.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let v=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const g=e.transitional||O_;e.timeoutErrorMessage&&(v=e.timeoutErrorMessage),i(new Be(v,g.clarifyTimeoutError?Be.ETIMEDOUT:Be.ECONNABORTED,e,u)),u=null},oi.hasStandardBrowserEnv&&(a&&H.isFunction(a)&&(a=a(e)),a||a!==!1&&mT(f))){const y=e.xsrfHeaderName&&e.xsrfCookieName&&fT.read(e.xsrfCookieName);y&&s.set(e.xsrfHeaderName,y)}r===void 0&&s.setContentType(null),"setRequestHeader"in u&&H.forEach(s.toJSON(),function(v,g){u.setRequestHeader(g,v)}),H.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),o&&o!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",Jy(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",Jy(e.onUploadProgress)),(e.cancelToken||e.signal)&&(l=y=>{u&&(i(!y||y.type?new Ll(null,e,u):y),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l)));const m=gT(f);if(m&&oi.protocols.indexOf(m)===-1){i(new Be("Unsupported protocol "+m+":",Be.ERR_BAD_REQUEST,e));return}u.send(r||null)})},Zd={http:VE,xhr:xT};H.forEach(Zd,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Zy=e=>`- ${e}`,_T=e=>H.isFunction(e)||e===null||e===!1,U_={getAdapter:e=>{e=H.isArray(e)?e:[e];const{length:t}=e;let n,i;const r={};for(let s=0;s<t;s++){n=e[s];let o;if(i=n,!_T(n)&&(i=Zd[(o=String(n)).toLowerCase()],i===void 0))throw new Be(`Unknown adapter '${o}'`);if(i)break;r[o||"#"+s]=i}if(!i){const s=Object.entries(r).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(Zy).join(`
`):" "+Zy(s[0]):"as no adapter specified";throw new Be("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:Zd};function Sf(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ll(null,e)}function Qy(e){return Sf(e),e.headers=Ni.from(e.headers),e.data=bf.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),U_.getAdapter(e.adapter||Fm.adapter)(e).then(function(i){return Sf(e),i.data=bf.call(e,e.transformResponse,i),i.headers=Ni.from(i.headers),i},function(i){return k_(i)||(Sf(e),i&&i.response&&(i.response.data=bf.call(e,e.transformResponse,i.response),i.response.headers=Ni.from(i.response.headers))),Promise.reject(i)})}const Ky=e=>e instanceof Ni?e.toJSON():e;function wo(e,t){t=t||{};const n={};function i(c,h,u){return H.isPlainObject(c)&&H.isPlainObject(h)?H.merge.call({caseless:u},c,h):H.isPlainObject(h)?H.merge({},h):H.isArray(h)?h.slice():h}function r(c,h,u){if(H.isUndefined(h)){if(!H.isUndefined(c))return i(void 0,c,u)}else return i(c,h,u)}function s(c,h){if(!H.isUndefined(h))return i(void 0,h)}function o(c,h){if(H.isUndefined(h)){if(!H.isUndefined(c))return i(void 0,c)}else return i(void 0,h)}function a(c,h,u){if(u in t)return i(c,h);if(u in e)return i(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h)=>r(Ky(c),Ky(h),!0)};return H.forEach(Object.keys(Object.assign({},e,t)),function(h){const u=l[h]||r,f=u(e[h],t[h],h);H.isUndefined(f)&&u!==a||(n[h]=f)}),n}const H_="1.6.2",Bm={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Bm[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const ev={};Bm.transitional=function(t,n,i){function r(s,o){return"[Axios v"+H_+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,a)=>{if(t===!1)throw new Be(r(o," has been removed"+(n?" in "+n:"")),Be.ERR_DEPRECATED);return n&&!ev[o]&&(ev[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,a):!0}};function wT(e,t,n){if(typeof e!="object")throw new Be("options must be an object",Be.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let r=i.length;for(;r-- >0;){const s=i[r],o=t[s];if(o){const a=e[s],l=a===void 0||o(a,s,e);if(l!==!0)throw new Be("option "+s+" must be "+l,Be.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Be("Unknown option "+s,Be.ERR_BAD_OPTION)}}const Qd={assertOptions:wT,validators:Bm},Wi=Qd.validators;class ku{constructor(t){this.defaults=t,this.interceptors={request:new Yy,response:new Yy}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=wo(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:s}=n;i!==void 0&&Qd.assertOptions(i,{silentJSONParsing:Wi.transitional(Wi.boolean),forcedJSONParsing:Wi.transitional(Wi.boolean),clarifyTimeoutError:Wi.transitional(Wi.boolean)},!1),r!=null&&(H.isFunction(r)?n.paramsSerializer={serialize:r}:Qd.assertOptions(r,{encode:Wi.function,serialize:Wi.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&H.merge(s.common,s[n.method]);s&&H.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),n.headers=Ni.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let h,u=0,f;if(!l){const m=[Qy.bind(this),void 0];for(m.unshift.apply(m,a),m.push.apply(m,c),f=m.length,h=Promise.resolve(n);u<f;)h=h.then(m[u++],m[u++]);return h}f=a.length;let d=n;for(u=0;u<f;){const m=a[u++],y=a[u++];try{d=m(d)}catch(v){y.call(this,v);break}}try{h=Qy.call(this,d)}catch(m){return Promise.reject(m)}for(u=0,f=c.length;u<f;)h=h.then(c[u++],c[u++]);return h}getUri(t){t=wo(this.defaults,t);const n=z_(t.baseURL,t.url);return D_(n,t.params,t.paramsSerializer)}}H.forEach(["delete","get","head","options"],function(t){ku.prototype[t]=function(n,i){return this.request(wo(i||{},{method:t,url:n,data:(i||{}).data}))}});H.forEach(["post","put","patch"],function(t){function n(i){return function(s,o,a){return this.request(wo(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ku.prototype[t]=n(),ku.prototype[t+"Form"]=n(!0)});const lu=ku;class km{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(a=>{i.subscribe(a),s=a}).then(r);return o.cancel=function(){i.unsubscribe(s)},o},t(function(s,o,a){i.reason||(i.reason=new Ll(s,o,a),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new km(function(r){t=r}),cancel:t}}}const MT=km;function bT(e){return function(n){return e.apply(null,n)}}function ST(e){return H.isObject(e)&&e.isAxiosError===!0}const Kd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Kd).forEach(([e,t])=>{Kd[t]=e});const ET=Kd;function G_(e){const t=new lu(e),n=M_(lu.prototype.request,t);return H.extend(n,lu.prototype,t,{allOwnKeys:!0}),H.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return G_(wo(e,r))},n}const xt=G_(Fm);xt.Axios=lu;xt.CanceledError=Ll;xt.CancelToken=MT;xt.isCancel=k_;xt.VERSION=H_;xt.toFormData=Ih;xt.AxiosError=Be;xt.Cancel=xt.CanceledError;xt.all=function(t){return Promise.all(t)};xt.spread=bT;xt.isAxiosError=ST;xt.mergeConfig=wo;xt.AxiosHeaders=Ni;xt.formToJSON=e=>B_(H.isHTMLForm(e)?new FormData(e):e);xt.getAdapter=U_.getAdapter;xt.HttpStatusCode=ET;xt.default=xt;const cu=xt;function tv(e,t){const n=new Date(e*1e3);n.setTime(n.getTime()+t*1e3);const i=String(n.getUTCHours()).padStart(2,"0"),r=String(n.getUTCMinutes()).padStart(2,"0");return`${i}:${r}`}function TT(e){let t=[];return e.filter((n,i)=>{i%8==0&&t.push(n.main)}),t}const AT=({lat:e,lon:t,isInitialMount:n,unit:i})=>{const[r,s]=pt.useState([]);return pt.useEffect(()=>{n||(async()=>{try{const a="e950e22f1eed08a058697a6dc48180a1",l=await cu.get(`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${t}&units=${i}&appid=${a}`);s(TT(l.data.list))}catch(a){console.error(a)}})()},[e,t,i]),r.length?ue.jsxs("div",{children:[ue.jsx("h3",{className:"font-bold",children:"Extended weather"}),r.map((o,a)=>ue.jsxs("p",{children:["Day ",a+1,": ",o.temp]},a))]}):ue.jsx(ue.Fragment,{})},CT=({weatherData:e})=>Object.keys(e).length===0?ue.jsx(ue.Fragment,{}):ue.jsxs("div",{children:[ue.jsx("div",{className:"card-header",children:ue.jsx("h3",{className:"font-bold",children:"Current Weather"})}),ue.jsxs("div",{className:"area-weather",children:[ue.jsxs("h3",{className:"font-bold",children:["Area name: ",e.name]}),ue.jsxs("p",{children:["Temp: ",e.main.temp]}),ue.jsxs("p",{children:["Type: ",e.weather[0].main]})]}),ue.jsxs("div",{className:"weather-details",children:[ue.jsx("h3",{className:"font-bold",children:"Weather details"}),ue.jsx("p",{children:"Feels like"}),ue.jsxs("p",{children:["max: ",e.main.temp_max]}),ue.jsxs("p",{children:["min: ",e.main.temp_min]}),ue.jsxs("p",{children:["humidity: ",e.main.humidity]}),ue.jsxs("p",{children:["pressure: ",e.main.pressure]})]})]}),LT=({weatherDataSun:e})=>Object.keys(e).length===0?ue.jsx(ue.Fragment,{}):ue.jsxs("div",{className:"weathercard",children:[ue.jsx("h3",{className:"font-bold",children:" Sun card"}),ue.jsxs("p",{children:["Sunrise:"," ",tv(e.sun.sunrise,e.timezone)]}),ue.jsxs("p",{children:["Sunset:"," ",tv(e.sun.sunset,e.timezone)]})]}),RT=({weatherDataWind:e})=>Object.keys(e).length===0?ue.jsx(ue.Fragment,{children:" "}):ue.jsxs("div",{className:"weathercard",children:[ue.jsx("h3",{className:"font-bold",children:" Wind card"}),ue.jsxs("p",{children:["Wind degree: ",e.deg]}),ue.jsxs("p",{children:["Wind speed: ",e.speed]})]}),PT=()=>ue.jsx("div",{className:"footer text-center",children:ue.jsxs("h4",{children:["Developed by"," ",ue.jsx("a",{href:"https://github.com/amoeba25",className:"text-white underline",target:"_blank",children:"Soham Shah"})]})});var V_={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(typeof self<"u"?self:EM,()=>(()=>{var n={d:(m,y)=>{for(var v in y)n.o(y,v)&&!n.o(m,v)&&Object.defineProperty(m,v,{enumerable:!0,get:y[v]})},o:(m,y)=>Object.prototype.hasOwnProperty.call(m,y),r:m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})}},i={};n.r(i),n.d(i,{default:()=>d}),Number.prototype.clamp=function(m,y){return Math.min(Math.max(this,m),y)};function r(m){for(;m.children&&m.children.length>0;)r(m.children[0]),m.remove(m.children[0]);m.geometry&&m.geometry.dispose(),m.material&&(Object.keys(m.material).forEach(y=>{m.material[y]&&m.material[y]!==null&&typeof m.material[y].dispose=="function"&&m.material[y].dispose()}),m.material.dispose())}const s=typeof window=="object";let o=s&&window.THREE||{};s&&!window.VANTA&&(window.VANTA={});const a=s&&window.VANTA||{};a.register=(m,y)=>a[m]=v=>new y(v),a.version="0.5.24";const l=function(){return Array.prototype.unshift.call(arguments,"[VANTA]"),console.error.apply(this,arguments)};a.VantaBase=class{constructor(m={}){if(!s)return!1;a.current=this,this.windowMouseMoveWrapper=this.windowMouseMoveWrapper.bind(this),this.windowTouchWrapper=this.windowTouchWrapper.bind(this),this.windowGyroWrapper=this.windowGyroWrapper.bind(this),this.resize=this.resize.bind(this),this.animationLoop=this.animationLoop.bind(this),this.restart=this.restart.bind(this);const y=typeof this.getDefaultOptions=="function"?this.getDefaultOptions():this.defaultOptions;if(this.options=Object.assign({mouseControls:!0,touchControls:!0,gyroControls:!1,minHeight:200,minWidth:200,scale:1,scaleMobile:1},y),(m instanceof HTMLElement||typeof m=="string")&&(m={el:m}),Object.assign(this.options,m),this.options.THREE&&(o=this.options.THREE),this.el=this.options.el,this.el==null)l('Instance needs "el" param!');else if(!(this.options.el instanceof HTMLElement)){const x=this.el;if(this.el=(v=x,document.querySelector(v)),!this.el)return void l("Cannot find element",x)}var v,g;this.prepareEl(),this.initThree(),this.setSize();try{this.init()}catch(x){return l("Init error",x),this.renderer&&this.renderer.domElement&&this.el.removeChild(this.renderer.domElement),void(this.options.backgroundColor&&(console.log("[VANTA] Falling back to backgroundColor"),this.el.style.background=(g=this.options.backgroundColor,typeof g=="number"?"#"+("00000"+g.toString(16)).slice(-6):g)))}this.initMouse(),this.resize(),this.animationLoop();const p=window.addEventListener;p("resize",this.resize),window.requestAnimationFrame(this.resize),this.options.mouseControls&&(p("scroll",this.windowMouseMoveWrapper),p("mousemove",this.windowMouseMoveWrapper)),this.options.touchControls&&(p("touchstart",this.windowTouchWrapper),p("touchmove",this.windowTouchWrapper)),this.options.gyroControls&&p("deviceorientation",this.windowGyroWrapper)}setOptions(m={}){Object.assign(this.options,m),this.triggerMouseMove()}prepareEl(){let m,y;if(typeof Node<"u"&&Node.TEXT_NODE)for(m=0;m<this.el.childNodes.length;m++){const v=this.el.childNodes[m];if(v.nodeType===Node.TEXT_NODE){const g=document.createElement("span");g.textContent=v.textContent,v.parentElement.insertBefore(g,v),v.remove()}}for(m=0;m<this.el.children.length;m++)y=this.el.children[m],getComputedStyle(y).position==="static"&&(y.style.position="relative"),getComputedStyle(y).zIndex==="auto"&&(y.style.zIndex=1);getComputedStyle(this.el).position==="static"&&(this.el.style.position="relative")}applyCanvasStyles(m,y={}){Object.assign(m.style,{position:"absolute",zIndex:0,top:0,left:0,background:""}),Object.assign(m.style,y),m.classList.add("vanta-canvas")}initThree(){o.WebGLRenderer?(this.renderer=new o.WebGLRenderer({alpha:!0,antialias:!0}),this.el.appendChild(this.renderer.domElement),this.applyCanvasStyles(this.renderer.domElement),isNaN(this.options.backgroundAlpha)&&(this.options.backgroundAlpha=1),this.scene=new o.Scene):console.warn("[VANTA] No THREE defined on window")}getCanvasElement(){return this.renderer?this.renderer.domElement:this.p5renderer?this.p5renderer.canvas:void 0}getCanvasRect(){const m=this.getCanvasElement();return!!m&&m.getBoundingClientRect()}windowMouseMoveWrapper(m){const y=this.getCanvasRect();if(!y)return!1;const v=m.clientX-y.left,g=m.clientY-y.top;v>=0&&g>=0&&v<=y.width&&g<=y.height&&(this.mouseX=v,this.mouseY=g,this.options.mouseEase||this.triggerMouseMove(v,g))}windowTouchWrapper(m){const y=this.getCanvasRect();if(!y)return!1;if(m.touches.length===1){const v=m.touches[0].clientX-y.left,g=m.touches[0].clientY-y.top;v>=0&&g>=0&&v<=y.width&&g<=y.height&&(this.mouseX=v,this.mouseY=g,this.options.mouseEase||this.triggerMouseMove(v,g))}}windowGyroWrapper(m){const y=this.getCanvasRect();if(!y)return!1;const v=Math.round(2*m.alpha)-y.left,g=Math.round(2*m.beta)-y.top;v>=0&&g>=0&&v<=y.width&&g<=y.height&&(this.mouseX=v,this.mouseY=g,this.options.mouseEase||this.triggerMouseMove(v,g))}triggerMouseMove(m,y){m===void 0&&y===void 0&&(this.options.mouseEase?(m=this.mouseEaseX,y=this.mouseEaseY):(m=this.mouseX,y=this.mouseY)),this.uniforms&&(this.uniforms.iMouse.value.x=m/this.scale,this.uniforms.iMouse.value.y=y/this.scale);const v=m/this.width,g=y/this.height;typeof this.onMouseMove=="function"&&this.onMouseMove(v,g)}setSize(){this.scale||(this.scale=1),typeof navigator<"u"&&(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<600)&&this.options.scaleMobile?this.scale=this.options.scaleMobile:this.options.scale&&(this.scale=this.options.scale),this.width=Math.max(this.el.offsetWidth,this.options.minWidth),this.height=Math.max(this.el.offsetHeight,this.options.minHeight)}initMouse(){(!this.mouseX&&!this.mouseY||this.mouseX===this.options.minWidth/2&&this.mouseY===this.options.minHeight/2)&&(this.mouseX=this.width/2,this.mouseY=this.height/2,this.triggerMouseMove(this.mouseX,this.mouseY))}resize(){this.setSize(),this.camera&&(this.camera.aspect=this.width/this.height,typeof this.camera.updateProjectionMatrix=="function"&&this.camera.updateProjectionMatrix()),this.renderer&&(this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(window.devicePixelRatio/this.scale)),typeof this.onResize=="function"&&this.onResize()}isOnScreen(){const m=this.el.offsetHeight,y=this.el.getBoundingClientRect(),v=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop,g=y.top+v;return g-window.innerHeight<=v&&v<=g+m}animationLoop(){this.t||(this.t=0),this.t2||(this.t2=0);const m=performance.now();if(this.prevNow){let y=(m-this.prevNow)/16.666666666666668;y=Math.max(.2,Math.min(y,5)),this.t+=y,this.t2+=(this.options.speed||1)*y,this.uniforms&&(this.uniforms.iTime.value=.016667*this.t2)}return this.prevNow=m,this.options.mouseEase&&(this.mouseEaseX=this.mouseEaseX||this.mouseX||0,this.mouseEaseY=this.mouseEaseY||this.mouseY||0,Math.abs(this.mouseEaseX-this.mouseX)+Math.abs(this.mouseEaseY-this.mouseY)>.1&&(this.mouseEaseX+=.05*(this.mouseX-this.mouseEaseX),this.mouseEaseY+=.05*(this.mouseY-this.mouseEaseY),this.triggerMouseMove(this.mouseEaseX,this.mouseEaseY))),(this.isOnScreen()||this.options.forceAnimate)&&(typeof this.onUpdate=="function"&&this.onUpdate(),this.scene&&this.camera&&(this.renderer.render(this.scene,this.camera),this.renderer.setClearColor(this.options.backgroundColor,this.options.backgroundAlpha)),this.fps&&this.fps.update&&this.fps.update(),typeof this.afterRender=="function"&&this.afterRender()),this.req=window.requestAnimationFrame(this.animationLoop)}restart(){if(this.scene)for(;this.scene.children.length;)this.scene.remove(this.scene.children[0]);typeof this.onRestart=="function"&&this.onRestart(),this.init()}init(){typeof this.onInit=="function"&&this.onInit()}destroy(){typeof this.onDestroy=="function"&&this.onDestroy();const m=window.removeEventListener;m("touchstart",this.windowTouchWrapper),m("touchmove",this.windowTouchWrapper),m("scroll",this.windowMouseMoveWrapper),m("mousemove",this.windowMouseMoveWrapper),m("deviceorientation",this.windowGyroWrapper),m("resize",this.resize),window.cancelAnimationFrame(this.req);const y=this.scene;y&&y.children&&r(y),this.renderer&&(this.renderer.domElement&&this.el.removeChild(this.renderer.domElement),this.renderer=null,this.scene=null),a.current===this&&(a.current=null)}};const c=a.VantaBase;let h=typeof window=="object"&&window.THREE;class u extends c{constructor(y){h=y.THREE||h,h.Color.prototype.toVector=function(){return new h.Vector3(this.r,this.g,this.b)},super(y),this.updateUniforms=this.updateUniforms.bind(this)}init(){this.mode="shader",this.uniforms={iTime:{type:"f",value:1},iResolution:{type:"v2",value:new h.Vector2(1,1)},iDpr:{type:"f",value:window.devicePixelRatio||1},iMouse:{type:"v2",value:new h.Vector2(this.mouseX||0,this.mouseY||0)}},super.init(),this.fragmentShader&&this.initBasicShader()}setOptions(y){super.setOptions(y),this.updateUniforms()}initBasicShader(y=this.fragmentShader,v=this.vertexShader){v||(v=`uniform float uTime;
uniform vec2 uResolution;
void main() {
  gl_Position = vec4( position, 1.0 );
}`),this.updateUniforms(),typeof this.valuesChanger=="function"&&this.valuesChanger();const g=new h.ShaderMaterial({uniforms:this.uniforms,vertexShader:v,fragmentShader:y}),p=this.options.texturePath;p&&(this.uniforms.iTex={type:"t",value:new h.TextureLoader().load(p)});const x=new h.Mesh(new h.PlaneGeometry(2,2),g);this.scene.add(x),this.camera=new h.Camera,this.camera.position.z=1}updateUniforms(){const y={};let v,g;for(v in this.options)g=this.options[v],v.toLowerCase().indexOf("color")!==-1?y[v]={type:"v3",value:new h.Color(g).toVector()}:typeof g=="number"&&(y[v]={type:"f",value:g});return Object.assign(this.uniforms,y)}resize(){super.resize(),this.uniforms.iResolution.value.x=this.width/this.scale,this.uniforms.iResolution.value.y=this.height/this.scale}}class f extends u{}const d=a.register("FOG",f);return f.prototype.defaultOptions={highlightColor:16761600,midtoneColor:16719616,lowlightColor:2949375,baseColor:16772075,blurFactor:.6,speed:1,zoom:1,scale:2,scaleMobile:4},f.prototype.fragmentShader=`uniform vec2 iResolution;
uniform vec2 iMouse;
uniform float iTime;

uniform float blurFactor;
uniform vec3 baseColor;
uniform vec3 lowlightColor;
uniform vec3 midtoneColor;
uniform vec3 highlightColor;
uniform float zoom;

float random (in vec2 _st) {
  return fract(sin(dot(_st.xy,
                     vec2(0.129898,0.78233)))*
        437.585453123);
}

// Based on Morgan McGuire @morgan3d
// https://www.shadertoy.com/view/4dS3Wd
float noise (in vec2 _st) {
  vec2 i = floor(_st);
  vec2 f = fract(_st);

  // Four corners in 2D of a tile
  float a = random(i);
  float b = random(i + vec2(1.0, 0.0));
  float c = random(i + vec2(0.0, 1.0));
  float d = random(i + vec2(1.0, 1.0));

  vec2 u = f * f * (3.0 - 2.0 * f);

  return mix(a, b, u.x) +
          (c - a)* u.y * (1.0 - u.x) +
          (d - b) * u.x * u.y;
}

#define NUM_OCTAVES 6

float fbm ( in vec2 _st) {
  float v = 0.0;
  float a = blurFactor;
  vec2 shift = vec2(100.0);
  // Rotate to reduce axial bias
  mat2 rot = mat2(cos(0.5), sin(0.5),
                  -sin(0.5), cos(0.50));
  for (int i = 0; i < NUM_OCTAVES; ++i) {
      v += a * noise(_st);
      _st = rot * _st * 2.0 + shift;
      a *= (1. - blurFactor);
  }
  return v;
}

void main() {
  vec2 st = gl_FragCoord.xy / iResolution.xy*3.;
  st.x *= 0.7 * iResolution.x / iResolution.y ; // Still keep it more landscape than square
  st *= zoom;

  // st += st * abs(sin(iTime*0.1)*3.0);
  vec3 color = vec3(0.0);

  vec2 q = vec2(0.);
  q.x = fbm( st + 0.00*iTime);
  q.y = fbm( st + vec2(1.0));

  vec2 dir = vec2(0.15,0.126);
  vec2 r = vec2(0.);
  r.x = fbm( st + 1.0*q + vec2(1.7,9.2)+ dir.x*iTime );
  r.y = fbm( st + 1.0*q + vec2(8.3,2.8)+ dir.y*iTime);

  float f = fbm(st+r);

  color = mix(baseColor,
              lowlightColor,
              clamp((f*f)*4.0,0.0,1.0));

  color = mix(color,
              midtoneColor,
              clamp(length(q),0.0,1.0));

  color = mix(color,
              highlightColor,
              clamp(length(r.x),0.0,1.0));

  vec3 finalColor = mix(baseColor, color, f*f*f+.6*f*f+.5*f);
  gl_FragColor = vec4(finalColor,1.0);
}
`,i})())})(V_);var NT=V_.exports;const IT=s0(NT),W_="121",DT={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},OT={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},j_=0,ep=1,q_=2,FT=3,BT=0,zm=1,X_=2,Ks=3,zo=0,_t=1,Rl=2,Um=1,kT=2,Ii=0,uo=1,tp=2,np=3,ip=4,Y_=5,jr=100,$_=101,J_=102,rp=103,sp=104,Z_=200,Q_=201,K_=202,ew=203,Hm=204,Gm=205,tw=206,nw=207,iw=208,rw=209,sw=210,ow=0,aw=1,lw=2,zu=3,cw=4,uw=5,hw=6,fw=7,Pl=0,dw=1,pw=2,Kr=0,mw=1,gw=2,yw=3,vw=4,xw=5,Oh=300,Nl=301,Il=302,Uu=303,Hu=304,Uo=306,Dl=307,Qa=1e3,jt=1001,Ka=1002,Mt=1003,Gu=1004,zT=1004,Vu=1005,UT=1005,At=1006,Vm=1007,HT=1007,Ho=1008,GT=1008,Go=1009,_w=1010,ww=1011,el=1012,Mw=1013,Ca=1014,Ai=1015,tl=1016,bw=1017,Sw=1018,Ew=1019,ho=1020,Tw=1021,mr=1022,pn=1023,Aw=1024,Cw=1025,Lw=pn,es=1026,Mo=1027,Rw=1028,Pw=1029,Nw=1030,Iw=1031,Dw=1032,Ow=1033,op=33776,ap=33777,lp=33778,cp=33779,up=35840,hp=35841,fp=35842,dp=35843,Fw=36196,pp=37492,mp=37496,Bw=37808,kw=37809,zw=37810,Uw=37811,Hw=37812,Gw=37813,Vw=37814,Ww=37815,jw=37816,qw=37817,Xw=37818,Yw=37819,$w=37820,Jw=37821,Zw=36492,Qw=37840,Kw=37841,e1=37842,t1=37843,n1=37844,i1=37845,r1=37846,s1=37847,o1=37848,a1=37849,l1=37850,c1=37851,u1=37852,h1=37853,f1=2200,d1=2201,p1=2202,nl=2300,La=2301,uu=2302,$r=2400,Jr=2401,il=2402,Fh=2500,Wm=2501,m1=0,VT=1,WT=2,Yt=3e3,Ol=3001,Bh=3007,kh=3002,g1=3003,jm=3004,qm=3005,Xm=3006,y1=3200,v1=3201,xs=0,x1=1,jT=0,hu=7680,qT=7681,XT=7682,YT=7683,$T=34055,JT=34056,ZT=5386,QT=512,KT=513,e2=514,t2=515,n2=516,i2=517,r2=518,_1=519,Fl=35044,os=35048,s2=35040,o2=35045,a2=35049,l2=35041,c2=35046,u2=35050,h2=35042,f2="100",gp="300 es";function gi(){}Object.assign(gi.prototype,{addEventListener:function(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)},hasEventListener:function(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const r=i.indexOf(t);r!==-1&&i.splice(r,1)}},dispatchEvent:function(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let r=0,s=i.length;r<s;r++)i[r].call(this,e)}}});const Lt=[];for(let e=0;e<256;e++)Lt[e]=(e<16?"0":"")+e.toString(16);let sc=1234567;const Se={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Lt[e&255]+Lt[e>>8&255]+Lt[e>>16&255]+Lt[e>>24&255]+"-"+Lt[t&255]+Lt[t>>8&255]+"-"+Lt[t>>16&15|64]+Lt[t>>24&255]+"-"+Lt[n&63|128]+Lt[n>>8&255]+"-"+Lt[n>>16&255]+Lt[n>>24&255]+Lt[i&255]+Lt[i>>8&255]+Lt[i>>16&255]+Lt[i>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(e*6-15)+10))},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return e!==void 0&&(sc=e%2147483647),sc=sc*16807%2147483647,(sc-1)/2147483646},degToRad:function(e){return e*Se.DEG2RAD},radToDeg:function(e){return e*Se.RAD2DEG},isPowerOfTwo:function(e){return(e&e-1)===0&&e!==0},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,i,r){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((t+i)/2),h=o((t+i)/2),u=s((t-i)/2),f=o((t-i)/2),d=s((i-t)/2),m=o((i-t)/2);switch(r){case"XYX":e.set(a*h,l*u,l*f,a*c);break;case"YZY":e.set(l*f,a*h,l*u,a*c);break;case"ZXZ":e.set(l*u,l*f,a*h,a*c);break;case"XZX":e.set(a*h,l*m,l*d,a*c);break;case"YXY":e.set(l*d,a*h,l*m,a*c);break;case"ZYZ":e.set(l*m,l*d,a*h,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};class j{constructor(t=0,n=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=n}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,n){return this.x=t,this.y=n,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,n){return n!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this}sub(t,n){return n!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const n=this.x,i=this.y,r=t.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this}clampLength(t,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,i=this.y-t.y;return n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this}lerpVectors(t,n,i){return this.x=t.x+(n.x-t.x)*i,this.y=t.y+(n.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,n){return n===void 0&&(n=0),this.x=t[n],this.y=t[n+1],this}toArray(t,n){return t===void 0&&(t=[]),n===void 0&&(n=0),t[n]=this.x,t[n+1]=this.y,t}fromBufferAttribute(t,n,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this}rotateAround(t,n){const i=Math.cos(n),r=Math.sin(n),s=this.x-t.x,o=this.y-t.y;return this.x=s*i-o*r+t.x,this.y=s*r+o*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class qt{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,n,i,r,s,o,a,l,c){const h=this.elements;return h[0]=t,h[1]=r,h[2]=a,h[3]=n,h[4]=s,h[5]=l,h[6]=i,h[7]=o,h[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return new this.constructor().fromArray(this.elements)}copy(t){const n=this.elements,i=t.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(t,n,i){return t.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const n=t.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const i=t.elements,r=n.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],h=i[4],u=i[7],f=i[2],d=i[5],m=i[8],y=r[0],v=r[3],g=r[6],p=r[1],x=r[4],w=r[7],M=r[2],_=r[5],S=r[8];return s[0]=o*y+a*p+l*M,s[3]=o*v+a*x+l*_,s[6]=o*g+a*w+l*S,s[1]=c*y+h*p+u*M,s[4]=c*v+h*x+u*_,s[7]=c*g+h*w+u*S,s[2]=f*y+d*p+m*M,s[5]=f*v+d*x+m*_,s[8]=f*g+d*w+m*S,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=t,n[4]*=t,n[7]*=t,n[2]*=t,n[5]*=t,n[8]*=t,this}determinant(){const t=this.elements,n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8];return n*o*h-n*a*c-i*s*h+i*a*l+r*s*c-r*o*l}getInverse(t,n){n!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");const i=t.elements,r=this.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],h=i[5],u=i[6],f=i[7],d=i[8],m=d*c-h*f,y=h*u-d*l,v=f*l-c*u,g=s*m+o*y+a*v;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const p=1/g;return r[0]=m*p,r[1]=(a*f-d*o)*p,r[2]=(h*o-a*c)*p,r[3]=y*p,r[4]=(d*s-a*u)*p,r[5]=(a*l-h*s)*p,r[6]=v*p,r[7]=(o*u-f*s)*p,r[8]=(c*s-o*l)*p,this}transpose(){let t;const n=this.elements;return t=n[1],n[1]=n[3],n[3]=t,t=n[2],n[2]=n[6],n[6]=t,t=n[5],n[5]=n[7],n[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).getInverse(this).transpose()}transposeIntoArray(t){const n=this.elements;return t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8],this}setUvTransform(t,n,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);this.set(i*l,i*c,-i*(l*o+c*a)+o+t,-r*c,r*l,-r*(-c*o+l*a)+a+n,0,0,1)}scale(t,n){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=n,i[4]*=n,i[7]*=n,this}rotate(t){const n=Math.cos(t),i=Math.sin(t),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],c=r[4],h=r[7];return r[0]=n*s+i*l,r[3]=n*o+i*c,r[6]=n*a+i*h,r[1]=-i*s+n*l,r[4]=-i*o+n*c,r[7]=-i*a+n*h,this}translate(t,n){const i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=n*i[2],i[4]+=n*i[5],i[7]+=n*i[8],this}equals(t){const n=this.elements,i=t.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(t,n){n===void 0&&(n=0);for(let i=0;i<9;i++)this.elements[i]=t[i+n];return this}toArray(t,n){t===void 0&&(t=[]),n===void 0&&(n=0);const i=this.elements;return t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3],t[n+4]=i[4],t[n+5]=i[5],t[n+6]=i[6],t[n+7]=i[7],t[n+8]=i[8],t}}let bs;const wr={getDataURL:function(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{bs===void 0&&(bs=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),bs.width=e.width,bs.height=e.height;const n=bs.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=bs}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}};let d2=0;function qe(e,t,n,i,r,s,o,a,l,c){Object.defineProperty(this,"id",{value:d2++}),this.uuid=Se.generateUUID(),this.name="",this.image=e!==void 0?e:qe.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=t!==void 0?t:qe.DEFAULT_MAPPING,this.wrapS=n!==void 0?n:jt,this.wrapT=i!==void 0?i:jt,this.magFilter=r!==void 0?r:At,this.minFilter=s!==void 0?s:Ho,this.anisotropy=l!==void 0?l:1,this.format=o!==void 0?o:pn,this.internalFormat=null,this.type=a!==void 0?a:Go,this.offset=new j(0,0),this.repeat=new j(1,1),this.center=new j(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new qt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c!==void 0?c:Yt,this.version=0,this.onUpdate=null}qe.DEFAULT_IMAGE=void 0;qe.DEFAULT_MAPPING=Oh;qe.prototype=Object.assign(Object.create(gi.prototype),{constructor:qe,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const i=this.image;if(i.uuid===void 0&&(i.uuid=Se.generateUUID()),!t&&e.images[i.uuid]===void 0){let r;if(Array.isArray(i)){r=[];for(let s=0,o=i.length;s<o;s++)r.push(wr.getDataURL(i[s]))}else r=wr.getDataURL(i);e.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==Oh)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Qa:e.x=e.x-Math.floor(e.x);break;case jt:e.x=e.x<0?0:1;break;case Ka:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Qa:e.y=e.y-Math.floor(e.y);break;case jt:e.y=e.y<0?0:1;break;case Ka:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}});Object.defineProperty(qe.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});class We{constructor(t=0,n=0,i=0,r=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=t,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,n,i,r){return this.x=t,this.y=n,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t,n){return n!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this.w=t.w+n.w,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this.w+=t.w*n,this}sub(t,n){return n!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this.w=t.w-n.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const n=this.x,i=this.y,r=this.z,s=this.w,o=t.elements;return this.x=o[0]*n+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*n+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*n+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*n+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const n=Math.sqrt(1-t.w*t.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/n,this.y=t.y/n,this.z=t.z/n),this}setAxisAngleFromRotationMatrix(t){let n,i,r,s;const l=t.elements,c=l[0],h=l[4],u=l[8],f=l[1],d=l[5],m=l[9],y=l[2],v=l[6],g=l[10];if(Math.abs(h-f)<.01&&Math.abs(u-y)<.01&&Math.abs(m-v)<.01){if(Math.abs(h+f)<.1&&Math.abs(u+y)<.1&&Math.abs(m+v)<.1&&Math.abs(c+d+g-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const x=(c+1)/2,w=(d+1)/2,M=(g+1)/2,_=(h+f)/4,S=(u+y)/4,C=(m+v)/4;return x>w&&x>M?x<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(x),r=_/i,s=S/i):w>M?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=_/r,s=C/r):M<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(M),i=S/s,r=C/s),this.set(i,r,s,n),this}let p=Math.sqrt((v-m)*(v-m)+(u-y)*(u-y)+(f-h)*(f-h));return Math.abs(p)<.001&&(p=1),this.x=(v-m)/p,this.y=(u-y)/p,this.z=(f-h)/p,this.w=Math.acos((c+d+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this.w=Math.max(t.w,Math.min(n.w,this.w)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this.w=Math.max(t,Math.min(n,this.w)),this}clampLength(t,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this.w+=(t.w-this.w)*n,this}lerpVectors(t,n,i){return this.x=t.x+(n.x-t.x)*i,this.y=t.y+(n.y-t.y)*i,this.z=t.z+(n.z-t.z)*i,this.w=t.w+(n.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,n){return n===void 0&&(n=0),this.x=t[n],this.y=t[n+1],this.z=t[n+2],this.w=t[n+3],this}toArray(t,n){return t===void 0&&(t=[]),n===void 0&&(n=0),t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t[n+3]=this.w,t}fromBufferAttribute(t,n,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this.w=t.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}function mn(e,t,n){this.width=e,this.height=t,this.scissor=new We(0,0,e,t),this.scissorTest=!1,this.viewport=new We(0,0,e,t),n=n||{},this.texture=new qe(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:At,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null}mn.prototype=Object.assign(Object.create(gi.prototype),{constructor:mn,isWebGLRenderTarget:!0,setSize:function(e,t){(this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function yp(e,t,n){mn.call(this,e,t,n),this.samples=4}yp.prototype=Object.assign(Object.create(mn.prototype),{constructor:yp,isWebGLMultisampleRenderTarget:!0,copy:function(e){return mn.prototype.copy.call(this,e),this.samples=e.samples,this}});class zt{constructor(t=0,n=0,i=0,r=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=n,this._z=i,this._w=r}static slerp(t,n,i,r){return i.copy(t).slerp(n,r)}static slerpFlat(t,n,i,r,s,o,a){let l=i[r+0],c=i[r+1],h=i[r+2],u=i[r+3];const f=s[o+0],d=s[o+1],m=s[o+2],y=s[o+3];if(u!==y||l!==f||c!==d||h!==m){let v=1-a;const g=l*f+c*d+h*m+u*y,p=g>=0?1:-1,x=1-g*g;if(x>Number.EPSILON){const M=Math.sqrt(x),_=Math.atan2(M,g*p);v=Math.sin(v*_)/M,a=Math.sin(a*_)/M}const w=a*p;if(l=l*v+f*w,c=c*v+d*w,h=h*v+m*w,u=u*v+y*w,v===1-a){const M=1/Math.sqrt(l*l+c*c+h*h+u*u);l*=M,c*=M,h*=M,u*=M}}t[n]=l,t[n+1]=c,t[n+2]=h,t[n+3]=u}static multiplyQuaternionsFlat(t,n,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],h=i[r+3],u=s[o],f=s[o+1],d=s[o+2],m=s[o+3];return t[n]=a*m+h*u+l*d-c*f,t[n+1]=l*m+h*f+c*u-a*d,t[n+2]=c*m+h*d+a*f-l*u,t[n+3]=h*m-a*u-l*f-c*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,n,i,r){return this._x=t,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,n){if(!(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=t._x,r=t._y,s=t._z,o=t._order,a=Math.cos,l=Math.sin,c=a(i/2),h=a(r/2),u=a(s/2),f=l(i/2),d=l(r/2),m=l(s/2);switch(o){case"XYZ":this._x=f*h*u+c*d*m,this._y=c*d*u-f*h*m,this._z=c*h*m+f*d*u,this._w=c*h*u-f*d*m;break;case"YXZ":this._x=f*h*u+c*d*m,this._y=c*d*u-f*h*m,this._z=c*h*m-f*d*u,this._w=c*h*u+f*d*m;break;case"ZXY":this._x=f*h*u-c*d*m,this._y=c*d*u+f*h*m,this._z=c*h*m+f*d*u,this._w=c*h*u-f*d*m;break;case"ZYX":this._x=f*h*u-c*d*m,this._y=c*d*u+f*h*m,this._z=c*h*m-f*d*u,this._w=c*h*u+f*d*m;break;case"YZX":this._x=f*h*u+c*d*m,this._y=c*d*u+f*h*m,this._z=c*h*m-f*d*u,this._w=c*h*u-f*d*m;break;case"XZY":this._x=f*h*u-c*d*m,this._y=c*d*u-f*h*m,this._z=c*h*m+f*d*u,this._w=c*h*u+f*d*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,n){const i=n/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const n=t.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],h=n[6],u=n[10],f=i+a+u;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(h-l)*d,this._y=(s-c)*d,this._z=(o-r)*d}else if(i>a&&i>u){const d=2*Math.sqrt(1+i-a-u);this._w=(h-l)/d,this._x=.25*d,this._y=(r+o)/d,this._z=(s+c)/d}else if(a>u){const d=2*Math.sqrt(1+a-i-u);this._w=(s-c)/d,this._x=(r+o)/d,this._y=.25*d,this._z=(l+h)/d}else{const d=2*Math.sqrt(1+u-i-a);this._w=(o-r)/d,this._x=(s+c)/d,this._y=(l+h)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(t,n){let r=t.dot(n)+1;return r<1e-6?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*n.z-t.z*n.y,this._y=t.z*n.x-t.x*n.z,this._z=t.x*n.y-t.y*n.x,this._w=r),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Se.clamp(this.dot(t),-1,1)))}rotateTowards(t,n){const i=this.angleTo(t);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}inverse(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,n){return n!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,n)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,n){const i=t._x,r=t._y,s=t._z,o=t._w,a=n._x,l=n._y,c=n._z,h=n._w;return this._x=i*h+o*a+r*c-s*l,this._y=r*h+o*l+s*a-i*c,this._z=s*h+o*c+i*l-r*a,this._w=o*h-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(t,n){if(n===0)return this;if(n===1)return this.copy(t);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*t._w+i*t._x+r*t._y+s*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const d=1-n;return this._w=d*o+n*this._w,this._x=d*i+n*this._x,this._y=d*r+n*this._y,this._z=d*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),h=Math.atan2(c,a),u=Math.sin((1-n)*h)/c,f=Math.sin(n*h)/c;return this._w=o*u+this._w*f,this._x=i*u+this._x*f,this._y=r*u+this._y*f,this._z=s*u+this._z*f,this._onChangeCallback(),this}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,n){return n===void 0&&(n=0),this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this._onChangeCallback(),this}toArray(t,n){return t===void 0&&(t=[]),n===void 0&&(n=0),t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w,t}fromBufferAttribute(t,n){return this._x=t.getX(n),this._y=t.getY(n),this._z=t.getZ(n),this._w=t.getW(n),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}class b{constructor(t=0,n=0,i=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=n,this.z=i}set(t,n,i){return i===void 0&&(i=this.z),this.x=t,this.y=n,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,n){return n!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this}sub(t,n){return n!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this}multiply(t,n){return n!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,n)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(nv.setFromEuler(t))}applyAxisAngle(t,n){return this.applyQuaternion(nv.setFromAxisAngle(t,n))}applyMatrix3(t){const n=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*n+s[3]*i+s[6]*r,this.y=s[1]*n+s[4]*i+s[7]*r,this.z=s[2]*n+s[5]*i+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const n=this.x,i=this.y,r=this.z,s=t.elements,o=1/(s[3]*n+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*n+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*n+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(t){const n=this.x,i=this.y,r=this.z,s=t.x,o=t.y,a=t.z,l=t.w,c=l*n+o*r-a*i,h=l*i+a*n-s*r,u=l*r+s*i-o*n,f=-s*n-o*i-a*r;return this.x=c*l+f*-s+h*-a-u*-o,this.y=h*l+f*-o+u*-s-c*-a,this.z=u*l+f*-a+c*-o-h*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const n=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*n+s[4]*i+s[8]*r,this.y=s[1]*n+s[5]*i+s[9]*r,this.z=s[2]*n+s[6]*i+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this}clampLength(t,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this}lerpVectors(t,n,i){return this.x=t.x+(n.x-t.x)*i,this.y=t.y+(n.y-t.y)*i,this.z=t.z+(n.z-t.z)*i,this}cross(t,n){return n!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,n)):this.crossVectors(this,t)}crossVectors(t,n){const i=t.x,r=t.y,s=t.z,o=n.x,a=n.y,l=n.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(t){const n=t.lengthSq();if(n===0)return this.set(0,0,0);const i=t.dot(this)/n;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return Ef.copy(this).projectOnVector(t),this.sub(Ef)}reflect(t){return this.sub(Ef.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(t)/n;return Math.acos(Se.clamp(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return n*n+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,n,i){const r=Math.sin(n)*t;return this.x=r*Math.sin(i),this.y=Math.cos(n)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,n,i){return this.x=t*Math.sin(n),this.y=i,this.z=t*Math.cos(n),this}setFromMatrixPosition(t){const n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(t){const n=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(t,n){return this.fromArray(t.elements,n*4)}setFromMatrix3Column(t,n){return this.fromArray(t.elements,n*3)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,n){return n===void 0&&(n=0),this.x=t[n],this.y=t[n+1],this.z=t[n+2],this}toArray(t,n){return t===void 0&&(t=[]),n===void 0&&(n=0),t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t}fromBufferAttribute(t,n,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const Ef=new b,nv=new zt;class yi{constructor(t,n){Object.defineProperty(this,"isBox3",{value:!0}),this.min=t!==void 0?t:new b(1/0,1/0,1/0),this.max=n!==void 0?n:new b(-1/0,-1/0,-1/0)}set(t,n){return this.min.copy(t),this.max.copy(n),this}setFromArray(t){let n=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=t.length;l<c;l+=3){const h=t[l],u=t[l+1],f=t[l+2];h<n&&(n=h),u<i&&(i=u),f<r&&(r=f),h>s&&(s=h),u>o&&(o=u),f>a&&(a=f)}return this.min.set(n,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(t){let n=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=t.count;l<c;l++){const h=t.getX(l),u=t.getY(l),f=t.getZ(l);h<n&&(n=h),u<i&&(i=u),f<r&&(r=f),h>s&&(s=h),u>o&&(o=u),f>a&&(a=f)}return this.min.set(n,i,r),this.max.set(s,o,a),this}setFromPoints(t){this.makeEmpty();for(let n=0,i=t.length;n<i;n++)this.expandByPoint(t[n]);return this}setFromCenterAndSize(t,n){const i=ra.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return t===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new b),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return t===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new b),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const n=t.geometry;n!==void 0&&(n.boundingBox===null&&n.computeBoundingBox(),Af.copy(n.boundingBox),Af.applyMatrix4(t.matrixWorld),this.union(Af));const i=t.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,n){return n===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),n=new b),n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,ra),ra.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let n,i;return t.normal.x>0?(n=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(n=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(n+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(n+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(n+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(n+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),n<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(sa),oc.subVectors(this.max,sa),Ss.subVectors(t.a,sa),Es.subVectors(t.b,sa),Ts.subVectors(t.c,sa),ji.subVectors(Es,Ss),qi.subVectors(Ts,Es),Dr.subVectors(Ss,Ts);let n=[0,-ji.z,ji.y,0,-qi.z,qi.y,0,-Dr.z,Dr.y,ji.z,0,-ji.x,qi.z,0,-qi.x,Dr.z,0,-Dr.x,-ji.y,ji.x,0,-qi.y,qi.x,0,-Dr.y,Dr.x,0];return!Tf(n,Ss,Es,Ts,oc)||(n=[1,0,0,0,1,0,0,0,1],!Tf(n,Ss,Es,Ts,oc))?!1:(ac.crossVectors(ji,qi),n=[ac.x,ac.y,ac.z],Tf(n,Ss,Es,Ts,oc))}clampPoint(t,n){return n===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),n=new b),n.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return ra.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return t===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=this.getSize(ra).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(_i[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),_i[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),_i[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),_i[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),_i[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),_i[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),_i[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),_i[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(_i),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}function Tf(e,t,n,i,r){for(let s=0,o=e.length-3;s<=o;s+=3){Or.fromArray(e,s);const a=r.x*Math.abs(Or.x)+r.y*Math.abs(Or.y)+r.z*Math.abs(Or.z),l=t.dot(Or),c=n.dot(Or),h=i.dot(Or);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>a)return!1}return!0}const _i=[new b,new b,new b,new b,new b,new b,new b,new b],ra=new b,Af=new yi,Ss=new b,Es=new b,Ts=new b,ji=new b,qi=new b,Dr=new b,sa=new b,oc=new b,ac=new b,Or=new b,p2=new yi;class Gi{constructor(t,n){this.center=t!==void 0?t:new b,this.radius=n!==void 0?n:-1}set(t,n){return this.center.copy(t),this.radius=n,this}setFromPoints(t,n){const i=this.center;n!==void 0?i.copy(n):p2.setFromPoints(t).getCenter(i);let r=0;for(let s=0,o=t.length;s<o;s++)r=Math.max(r,i.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const n=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=n*n}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,n){const i=this.center.distanceToSquared(t);return n===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),n=new b),n.copy(t),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(t){return t===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new yi),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}}const wi=new b,Cf=new b,lc=new b,Xi=new b,Lf=new b,cc=new b,Rf=new b;class Vo{constructor(t,n){this.origin=t!==void 0?t:new b,this.direction=n!==void 0?n:new b(0,0,-1)}set(t,n){return this.origin.copy(t),this.direction.copy(n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,n){return n===void 0&&(console.warn("THREE.Ray: .at() target is now required"),n=new b),n.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,wi)),this}closestPointToPoint(t,n){n===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),n=new b),n.subVectors(t,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const n=wi.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(wi.copy(this.direction).multiplyScalar(n).add(this.origin),wi.distanceToSquared(t))}distanceSqToSegment(t,n,i,r){Cf.copy(t).add(n).multiplyScalar(.5),lc.copy(n).sub(t).normalize(),Xi.copy(this.origin).sub(Cf);const s=t.distanceTo(n)*.5,o=-this.direction.dot(lc),a=Xi.dot(this.direction),l=-Xi.dot(lc),c=Xi.lengthSq(),h=Math.abs(1-o*o);let u,f,d,m;if(h>0)if(u=o*l-a,f=o*a-l,m=s*h,u>=0)if(f>=-m)if(f<=m){const y=1/h;u*=y,f*=y,d=u*(u+o*f+2*a)+f*(o*u+f+2*l)+c}else f=s,u=Math.max(0,-(o*f+a)),d=-u*u+f*(f+2*l)+c;else f=-s,u=Math.max(0,-(o*f+a)),d=-u*u+f*(f+2*l)+c;else f<=-m?(u=Math.max(0,-(-o*s+a)),f=u>0?-s:Math.min(Math.max(-s,-l),s),d=-u*u+f*(f+2*l)+c):f<=m?(u=0,f=Math.min(Math.max(-s,-l),s),d=f*(f+2*l)+c):(u=Math.max(0,-(o*s+a)),f=u>0?s:Math.min(Math.max(-s,-l),s),d=-u*u+f*(f+2*l)+c);else f=o>0?-s:s,u=Math.max(0,-(o*f+a)),d=-u*u+f*(f+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(lc).multiplyScalar(f).add(Cf),d}intersectSphere(t,n){wi.subVectors(t.center,this.origin);const i=wi.dot(this.direction),r=wi.dot(wi)-i*i,s=t.radius*t.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return a<0&&l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const n=t.normal.dot(this.direction);if(n===0)return t.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/n;return i>=0?i:null}intersectPlane(t,n){const i=this.distanceToPlane(t);return i===null?null:this.at(i,n)}intersectsPlane(t){const n=t.distanceToPoint(this.origin);return n===0||t.normal.dot(this.direction)*n<0}intersectBox(t,n){let i,r,s,o,a,l;const c=1/this.direction.x,h=1/this.direction.y,u=1/this.direction.z,f=this.origin;return c>=0?(i=(t.min.x-f.x)*c,r=(t.max.x-f.x)*c):(i=(t.max.x-f.x)*c,r=(t.min.x-f.x)*c),h>=0?(s=(t.min.y-f.y)*h,o=(t.max.y-f.y)*h):(s=(t.max.y-f.y)*h,o=(t.min.y-f.y)*h),i>o||s>r||((s>i||i!==i)&&(i=s),(o<r||r!==r)&&(r=o),u>=0?(a=(t.min.z-f.z)*u,l=(t.max.z-f.z)*u):(a=(t.max.z-f.z)*u,l=(t.min.z-f.z)*u),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(t){return this.intersectBox(t,wi)!==null}intersectTriangle(t,n,i,r,s){Lf.subVectors(n,t),cc.subVectors(i,t),Rf.crossVectors(Lf,cc);let o=this.direction.dot(Rf),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Xi.subVectors(this.origin,t);const l=a*this.direction.dot(cc.crossVectors(Xi,cc));if(l<0)return null;const c=a*this.direction.dot(Lf.cross(Xi));if(c<0||l+c>o)return null;const h=-a*Xi.dot(Rf);return h<0?null:this.at(h/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}class Le{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,n,i,r,s,o,a,l,c,h,u,f,d,m,y,v){const g=this.elements;return g[0]=t,g[4]=n,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=h,g[10]=u,g[14]=f,g[3]=d,g[7]=m,g[11]=y,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Le().fromArray(this.elements)}copy(t){const n=this.elements,i=t.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(t){const n=this.elements,i=t.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}extractBasis(t,n,i){return t.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,n,i){return this.set(t.x,n.x,i.x,0,t.y,n.y,i.y,0,t.z,n.z,i.z,0,0,0,0,1),this}extractRotation(t){const n=this.elements,i=t.elements,r=1/As.setFromMatrixColumn(t,0).length(),s=1/As.setFromMatrixColumn(t,1).length(),o=1/As.setFromMatrixColumn(t,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const n=this.elements,i=t.x,r=t.y,s=t.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),h=Math.cos(s),u=Math.sin(s);if(t.order==="XYZ"){const f=o*h,d=o*u,m=a*h,y=a*u;n[0]=l*h,n[4]=-l*u,n[8]=c,n[1]=d+m*c,n[5]=f-y*c,n[9]=-a*l,n[2]=y-f*c,n[6]=m+d*c,n[10]=o*l}else if(t.order==="YXZ"){const f=l*h,d=l*u,m=c*h,y=c*u;n[0]=f+y*a,n[4]=m*a-d,n[8]=o*c,n[1]=o*u,n[5]=o*h,n[9]=-a,n[2]=d*a-m,n[6]=y+f*a,n[10]=o*l}else if(t.order==="ZXY"){const f=l*h,d=l*u,m=c*h,y=c*u;n[0]=f-y*a,n[4]=-o*u,n[8]=m+d*a,n[1]=d+m*a,n[5]=o*h,n[9]=y-f*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(t.order==="ZYX"){const f=o*h,d=o*u,m=a*h,y=a*u;n[0]=l*h,n[4]=m*c-d,n[8]=f*c+y,n[1]=l*u,n[5]=y*c+f,n[9]=d*c-m,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(t.order==="YZX"){const f=o*l,d=o*c,m=a*l,y=a*c;n[0]=l*h,n[4]=y-f*u,n[8]=m*u+d,n[1]=u,n[5]=o*h,n[9]=-a*h,n[2]=-c*h,n[6]=d*u+m,n[10]=f-y*u}else if(t.order==="XZY"){const f=o*l,d=o*c,m=a*l,y=a*c;n[0]=l*h,n[4]=-u,n[8]=c*h,n[1]=f*u+y,n[5]=o*h,n[9]=d*u-m,n[2]=m*u-d,n[6]=a*h,n[10]=y*u+f}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(t){return this.compose(m2,t,g2)}lookAt(t,n,i){const r=this.elements;return ln.subVectors(t,n),ln.lengthSq()===0&&(ln.z=1),ln.normalize(),Yi.crossVectors(i,ln),Yi.lengthSq()===0&&(Math.abs(i.z)===1?ln.x+=1e-4:ln.z+=1e-4,ln.normalize(),Yi.crossVectors(i,ln)),Yi.normalize(),uc.crossVectors(ln,Yi),r[0]=Yi.x,r[4]=uc.x,r[8]=ln.x,r[1]=Yi.y,r[5]=uc.y,r[9]=ln.y,r[2]=Yi.z,r[6]=uc.z,r[10]=ln.z,this}multiply(t,n){return n!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,n)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const i=t.elements,r=n.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],h=i[1],u=i[5],f=i[9],d=i[13],m=i[2],y=i[6],v=i[10],g=i[14],p=i[3],x=i[7],w=i[11],M=i[15],_=r[0],S=r[4],C=r[8],L=r[12],D=r[1],I=r[5],O=r[9],B=r[13],P=r[2],N=r[6],z=r[10],Y=r[14],F=r[3],G=r[7],q=r[11],Z=r[15];return s[0]=o*_+a*D+l*P+c*F,s[4]=o*S+a*I+l*N+c*G,s[8]=o*C+a*O+l*z+c*q,s[12]=o*L+a*B+l*Y+c*Z,s[1]=h*_+u*D+f*P+d*F,s[5]=h*S+u*I+f*N+d*G,s[9]=h*C+u*O+f*z+d*q,s[13]=h*L+u*B+f*Y+d*Z,s[2]=m*_+y*D+v*P+g*F,s[6]=m*S+y*I+v*N+g*G,s[10]=m*C+y*O+v*z+g*q,s[14]=m*L+y*B+v*Y+g*Z,s[3]=p*_+x*D+w*P+M*F,s[7]=p*S+x*I+w*N+M*G,s[11]=p*C+x*O+w*z+M*q,s[15]=p*L+x*B+w*Y+M*Z,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[4]*=t,n[8]*=t,n[12]*=t,n[1]*=t,n[5]*=t,n[9]*=t,n[13]*=t,n[2]*=t,n[6]*=t,n[10]*=t,n[14]*=t,n[3]*=t,n[7]*=t,n[11]*=t,n[15]*=t,this}determinant(){const t=this.elements,n=t[0],i=t[4],r=t[8],s=t[12],o=t[1],a=t[5],l=t[9],c=t[13],h=t[2],u=t[6],f=t[10],d=t[14],m=t[3],y=t[7],v=t[11],g=t[15];return m*(+s*l*u-r*c*u-s*a*f+i*c*f+r*a*d-i*l*d)+y*(+n*l*d-n*c*f+s*o*f-r*o*d+r*c*h-s*l*h)+v*(+n*c*u-n*a*d-s*o*u+i*o*d+s*a*h-i*c*h)+g*(-r*a*h-n*l*u+n*a*f+r*o*u-i*o*f+i*l*h)}transpose(){const t=this.elements;let n;return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,this}setPosition(t,n,i){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=n,r[14]=i),this}getInverse(t,n){n!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");const i=this.elements,r=t.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],h=r[5],u=r[6],f=r[7],d=r[8],m=r[9],y=r[10],v=r[11],g=r[12],p=r[13],x=r[14],w=r[15],M=m*x*f-p*y*f+p*u*v-h*x*v-m*u*w+h*y*w,_=g*y*f-d*x*f-g*u*v+c*x*v+d*u*w-c*y*w,S=d*p*f-g*m*f+g*h*v-c*p*v-d*h*w+c*m*w,C=g*m*u-d*p*u-g*h*y+c*p*y+d*h*x-c*m*x,L=s*M+o*_+a*S+l*C;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/L;return i[0]=M*D,i[1]=(p*y*l-m*x*l-p*a*v+o*x*v+m*a*w-o*y*w)*D,i[2]=(h*x*l-p*u*l+p*a*f-o*x*f-h*a*w+o*u*w)*D,i[3]=(m*u*l-h*y*l-m*a*f+o*y*f+h*a*v-o*u*v)*D,i[4]=_*D,i[5]=(d*x*l-g*y*l+g*a*v-s*x*v-d*a*w+s*y*w)*D,i[6]=(g*u*l-c*x*l-g*a*f+s*x*f+c*a*w-s*u*w)*D,i[7]=(c*y*l-d*u*l+d*a*f-s*y*f-c*a*v+s*u*v)*D,i[8]=S*D,i[9]=(g*m*l-d*p*l-g*o*v+s*p*v+d*o*w-s*m*w)*D,i[10]=(c*p*l-g*h*l+g*o*f-s*p*f-c*o*w+s*h*w)*D,i[11]=(d*h*l-c*m*l-d*o*f+s*m*f+c*o*v-s*h*v)*D,i[12]=C*D,i[13]=(d*p*a-g*m*a+g*o*y-s*p*y-d*o*x+s*m*x)*D,i[14]=(g*h*a-c*p*a-g*o*u+s*p*u+c*o*x-s*h*x)*D,i[15]=(c*m*a-d*h*a+d*o*u-s*m*u-c*o*y+s*h*y)*D,this}scale(t){const n=this.elements,i=t.x,r=t.y,s=t.z;return n[0]*=i,n[4]*=r,n[8]*=s,n[1]*=i,n[5]*=r,n[9]*=s,n[2]*=i,n[6]*=r,n[10]*=s,n[3]*=i,n[7]*=r,n[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements,n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(t,n,i){return this.set(1,0,0,t,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(t){const n=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(t){const n=Math.cos(t),i=Math.sin(t);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(t){const n=Math.cos(t),i=Math.sin(t);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,n){const i=Math.cos(n),r=Math.sin(n),s=1-i,o=t.x,a=t.y,l=t.z,c=s*o,h=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,h*a+i,h*l-r*o,0,c*l-r*a,h*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(t,n,i){return this.set(t,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,n,i){return this.set(1,n,i,0,t,1,i,0,t,n,1,0,0,0,0,1),this}compose(t,n,i){const r=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,h=o+o,u=a+a,f=s*c,d=s*h,m=s*u,y=o*h,v=o*u,g=a*u,p=l*c,x=l*h,w=l*u,M=i.x,_=i.y,S=i.z;return r[0]=(1-(y+g))*M,r[1]=(d+w)*M,r[2]=(m-x)*M,r[3]=0,r[4]=(d-w)*_,r[5]=(1-(f+g))*_,r[6]=(v+p)*_,r[7]=0,r[8]=(m+x)*S,r[9]=(v-p)*S,r[10]=(1-(f+y))*S,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,n,i){const r=this.elements;let s=As.set(r[0],r[1],r[2]).length();const o=As.set(r[4],r[5],r[6]).length(),a=As.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],Fn.copy(this);const c=1/s,h=1/o,u=1/a;return Fn.elements[0]*=c,Fn.elements[1]*=c,Fn.elements[2]*=c,Fn.elements[4]*=h,Fn.elements[5]*=h,Fn.elements[6]*=h,Fn.elements[8]*=u,Fn.elements[9]*=u,Fn.elements[10]*=u,n.setFromRotationMatrix(Fn),i.x=s,i.y=o,i.z=a,this}makePerspective(t,n,i,r,s,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,l=2*s/(n-t),c=2*s/(i-r),h=(n+t)/(n-t),u=(i+r)/(i-r),f=-(o+s)/(o-s),d=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,n,i,r,s,o){const a=this.elements,l=1/(n-t),c=1/(i-r),h=1/(o-s),u=(n+t)*l,f=(i+r)*c,d=(o+s)*h;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const n=this.elements,i=t.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(t,n){n===void 0&&(n=0);for(let i=0;i<16;i++)this.elements[i]=t[i+n];return this}toArray(t,n){t===void 0&&(t=[]),n===void 0&&(n=0);const i=this.elements;return t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3],t[n+4]=i[4],t[n+5]=i[5],t[n+6]=i[6],t[n+7]=i[7],t[n+8]=i[8],t[n+9]=i[9],t[n+10]=i[10],t[n+11]=i[11],t[n+12]=i[12],t[n+13]=i[13],t[n+14]=i[14],t[n+15]=i[15],t}}const As=new b,Fn=new Le,m2=new b(0,0,0),g2=new b(1,1,1),Yi=new b,uc=new b,ln=new b;class Wo{constructor(t=0,n=0,i=0,r=Wo.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=t,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,i,r){return this._x=t,this._y=n,this._z=i,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n,i){const r=Se.clamp,s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],h=s[5],u=s[9],f=s[2],d=s[6],m=s[10];switch(n=n||this._order,n){case"XYZ":this._y=Math.asin(r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,h),this._z=0);break;case"YXZ":this._x=Math.asin(-r(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(l,m),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-f,o),this._z=0);break;case"ZXY":this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-a,h)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,m),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,h));break;case"YZX":this._z=Math.asin(r(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,h),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(l,m));break;case"XZY":this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,h),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i!==!1&&this._onChangeCallback(),this}setFromQuaternion(t,n,i){return iv.makeRotationFromQuaternion(t),this.setFromRotationMatrix(iv,n,i)}setFromVector3(t,n){return this.set(t.x,t.y,t.z,n||this._order)}reorder(t){return rv.setFromEuler(this),this.setFromQuaternion(rv,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t,n){return t===void 0&&(t=[]),n===void 0&&(n=0),t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new b(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Wo.DefaultOrder="XYZ";Wo.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const iv=new Le,rv=new zt;class Ym{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}}let y2=0;const sv=new b,Cs=new zt,Mi=new Le,hc=new b,oa=new b,v2=new b,x2=new zt,ov=new b(1,0,0),av=new b(0,1,0),lv=new b(0,0,1),_2={type:"added"},w2={type:"removed"};function de(){Object.defineProperty(this,"id",{value:y2++}),this.uuid=Se.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=de.DefaultUp.clone();const e=new b,t=new Wo,n=new zt,i=new b(1,1,1);function r(){n.setFromEuler(t,!1)}function s(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Le},normalMatrix:{value:new qt}}),this.matrix=new Le,this.matrixWorld=new Le,this.matrixAutoUpdate=de.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ym,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}de.DefaultUp=new b(0,1,0);de.DefaultMatrixAutoUpdate=!0;de.prototype=Object.assign(Object.create(gi.prototype),{constructor:de,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return Cs.setFromAxisAngle(e,t),this.quaternion.multiply(Cs),this},rotateOnWorldAxis:function(e,t){return Cs.setFromAxisAngle(e,t),this.quaternion.premultiply(Cs),this},rotateX:function(e){return this.rotateOnAxis(ov,e)},rotateY:function(e){return this.rotateOnAxis(av,e)},rotateZ:function(e){return this.rotateOnAxis(lv,e)},translateOnAxis:function(e,t){return sv.copy(e).applyQuaternion(this.quaternion),this.position.add(sv.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(ov,e)},translateY:function(e){return this.translateOnAxis(av,e)},translateZ:function(e){return this.translateOnAxis(lv,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Mi.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?hc.copy(e):hc.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),oa.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Mi.lookAt(oa,hc,this.up):Mi.lookAt(hc,oa,this.up),this.quaternion.setFromRotationMatrix(Mi),i&&(Mi.extractRotation(i.matrixWorld),Cs.setFromRotationMatrix(Mi),this.quaternion.premultiply(Cs.inverse()))},add:function(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(_2)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(w2)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),Mi.getInverse(this.matrixWorld),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Mi.multiply(e.parent.matrixWorld)),e.applyMatrix4(Mi),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const s=this.children[n].getObjectByProperty(e,t);if(s!==void 0)return s}},getWorldPosition:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new b),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new zt),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(oa,e,v2),e},getWorldScale:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new b),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(oa,x2,e),e},getWorldDirection:function(e){e===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new b),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)},traverseAncestors:function(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateWorldMatrix(!1,!0)}},toJSON:function(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON());function r(o,a){return o[a.uuid]===void 0&&(o[a.uuid]=a.toJSON(e)),a.uuid}if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const a=o.shapes;if(Array.isArray(a))for(let l=0,c=a.length;l<c;l++){const h=a[l];r(e.shapes,h)}else r(e.shapes,a)}}if(this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let a=0,l=this.material.length;a<l;a++)o.push(r(e.materials,this.material[a]));i.material=o}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(t){const o=s(e.geometries),a=s(e.materials),l=s(e.textures),c=s(e.images),h=s(e.shapes);o.length>0&&(n.geometries=o),a.length>0&&(n.materials=a),l.length>0&&(n.textures=l),c.length>0&&(n.images=c),h.length>0&&(n.shapes=h)}return n.object=i,n;function s(o){const a=[];for(const l in o){const c=o[l];delete c.metadata,a.push(c)}return a}},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,t){if(t===void 0&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}});const Pf=new b,M2=new b,b2=new qt;class ri{constructor(t,n){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=t!==void 0?t:new b(1,0,0),this.constant=n!==void 0?n:0}set(t,n){return this.normal.copy(t),this.constant=n,this}setComponents(t,n,i,r){return this.normal.set(t,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,n){return this.normal.copy(t),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(t,n,i){const r=Pf.subVectors(i,n).cross(M2.subVectors(t,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}clone(){return new this.constructor().copy(this)}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,n){return n===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),n=new b),n.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,n){n===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new b);const i=t.delta(Pf),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(t.start)===0?n.copy(t.start):void 0;const s=-(t.start.dot(this.normal)+this.constant)/r;if(!(s<0||s>1))return n.copy(i).multiplyScalar(s).add(t.start)}intersectsLine(t){const n=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return n<0&&i>0||i<0&&n>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new b),t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,n){const i=n||b2.getNormalMatrix(t),r=this.coplanarPoint(Pf).applyMatrix4(t),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}const Bn=new b,bi=new b,Nf=new b,Si=new b,Ls=new b,Rs=new b,cv=new b,If=new b,Df=new b,Of=new b;class Pt{constructor(t,n,i){this.a=t!==void 0?t:new b,this.b=n!==void 0?n:new b,this.c=i!==void 0?i:new b}static getNormal(t,n,i,r){r===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new b),r.subVectors(i,n),Bn.subVectors(t,n),r.cross(Bn);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,n,i,r,s){Bn.subVectors(r,n),bi.subVectors(i,n),Nf.subVectors(t,n);const o=Bn.dot(Bn),a=Bn.dot(bi),l=Bn.dot(Nf),c=bi.dot(bi),h=bi.dot(Nf),u=o*c-a*a;if(s===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new b),u===0)return s.set(-2,-1,-1);const f=1/u,d=(c*l-a*h)*f,m=(o*h-a*l)*f;return s.set(1-d-m,m,d)}static containsPoint(t,n,i,r){return this.getBarycoord(t,n,i,r,Si),Si.x>=0&&Si.y>=0&&Si.x+Si.y<=1}static getUV(t,n,i,r,s,o,a,l){return this.getBarycoord(t,n,i,r,Si),l.set(0,0),l.addScaledVector(s,Si.x),l.addScaledVector(o,Si.y),l.addScaledVector(a,Si.z),l}static isFrontFacing(t,n,i,r){return Bn.subVectors(i,n),bi.subVectors(t,n),Bn.cross(bi).dot(r)<0}set(t,n,i){return this.a.copy(t),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(t,n,i,r){return this.a.copy(t[n]),this.b.copy(t[i]),this.c.copy(t[r]),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Bn.subVectors(this.c,this.b),bi.subVectors(this.a,this.b),Bn.cross(bi).length()*.5}getMidpoint(t){return t===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new b),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Pt.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new ri),t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,n){return Pt.getBarycoord(t,this.a,this.b,this.c,n)}getUV(t,n,i,r,s){return Pt.getUV(t,this.a,this.b,this.c,n,i,r,s)}containsPoint(t){return Pt.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Pt.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,n){n===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),n=new b);const i=this.a,r=this.b,s=this.c;let o,a;Ls.subVectors(r,i),Rs.subVectors(s,i),If.subVectors(t,i);const l=Ls.dot(If),c=Rs.dot(If);if(l<=0&&c<=0)return n.copy(i);Df.subVectors(t,r);const h=Ls.dot(Df),u=Rs.dot(Df);if(h>=0&&u<=h)return n.copy(r);const f=l*u-h*c;if(f<=0&&l>=0&&h<=0)return o=l/(l-h),n.copy(i).addScaledVector(Ls,o);Of.subVectors(t,s);const d=Ls.dot(Of),m=Rs.dot(Of);if(m>=0&&d<=m)return n.copy(s);const y=d*c-l*m;if(y<=0&&c>=0&&m<=0)return a=c/(c-m),n.copy(i).addScaledVector(Rs,a);const v=h*m-d*u;if(v<=0&&u-h>=0&&d-m>=0)return cv.subVectors(s,r),a=(u-h)/(u-h+(d-m)),n.copy(r).addScaledVector(cv,a);const g=1/(v+y+f);return o=y*g,a=f*g,n.copy(i).addScaledVector(Ls,o).addScaledVector(Rs,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const w1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},kn={h:0,s:0,l:0},fc={h:0,s:0,l:0};function Ff(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*6*(2/3-n):e}function Bf(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function kf(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}class le{constructor(t,n,i){return Object.defineProperty(this,"isColor",{value:!0}),n===void 0&&i===void 0?this.set(t):this.setRGB(t,n,i)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,this}setRGB(t,n,i){return this.r=t,this.g=n,this.b=i,this}setHSL(t,n,i){if(t=Se.euclideanModulo(t,1),n=Se.clamp(n,0,1),i=Se.clamp(i,0,1),n===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+n):i+n-i*n,s=2*i-r;this.r=Ff(s,r,t+1/3),this.g=Ff(s,r,t),this.b=Ff(s,r,t-1/3)}return this}setStyle(t){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){let r;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,n(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,n(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){const a=parseFloat(r[1])/360,l=parseInt(r[2],10)/100,c=parseInt(r[3],10)/100;return n(r[5]),this.setHSL(a,l,c)}break}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){const r=i[1],s=r.length;if(s===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(s===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const n=w1[t];return n!==void 0?this.setHex(n):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,n){return n===void 0&&(n=2),this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}copyLinearToGamma(t,n){n===void 0&&(n=2);const i=n>0?1/n:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=Bf(t.r),this.g=Bf(t.g),this.b=Bf(t.b),this}copyLinearToSRGB(t){return this.r=kf(t.r),this.g=kf(t.g),this.b=kf(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){t===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});const n=this.r,i=this.g,r=this.b,s=Math.max(n,i,r),o=Math.min(n,i,r);let a,l;const c=(o+s)/2;if(o===s)a=0,l=0;else{const h=s-o;switch(l=c<=.5?h/(s+o):h/(2-s-o),s){case n:a=(i-r)/h+(i<r?6:0);break;case i:a=(r-n)/h+2;break;case r:a=(n-i)/h+4;break}a/=6}return t.h=a,t.s=l,t.l=c,t}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(t,n,i){return this.getHSL(kn),kn.h+=t,kn.s+=n,kn.l+=i,this.setHSL(kn.h,kn.s,kn.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,n){return this.r=t.r+n.r,this.g=t.g+n.g,this.b=t.b+n.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,n){return this.r+=(t.r-this.r)*n,this.g+=(t.g-this.g)*n,this.b+=(t.b-this.b)*n,this}lerpHSL(t,n){this.getHSL(kn),t.getHSL(fc);const i=Se.lerp(kn.h,fc.h,n),r=Se.lerp(kn.s,fc.s,n),s=Se.lerp(kn.l,fc.l,n);return this.setHSL(i,r,s),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,n){return n===void 0&&(n=0),this.r=t[n],this.g=t[n+1],this.b=t[n+2],this}toArray(t,n){return t===void 0&&(t=[]),n===void 0&&(n=0),t[n]=this.r,t[n+1]=this.g,t[n+2]=this.b,t}fromBufferAttribute(t,n){return this.r=t.getX(n),this.g=t.getY(n),this.b=t.getZ(n),t.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}le.NAMES=w1;le.prototype.r=1;le.prototype.g=1;le.prototype.b=1;class rl{constructor(t,n,i,r,s,o){this.a=t,this.b=n,this.c=i,this.normal=r&&r.isVector3?r:new b,this.vertexNormals=Array.isArray(r)?r:[],this.color=s&&s.isColor?s:new le,this.vertexColors=Array.isArray(s)?s:[],this.materialIndex=o!==void 0?o:0}clone(){return new this.constructor().copy(this)}copy(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(let n=0,i=t.vertexNormals.length;n<i;n++)this.vertexNormals[n]=t.vertexNormals[n].clone();for(let n=0,i=t.vertexColors.length;n<i;n++)this.vertexColors[n]=t.vertexColors[n].clone();return this}}let S2=0;function Me(){Object.defineProperty(this,"id",{value:S2++}),this.uuid=Se.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=uo,this.side=zo,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Hm,this.blendDst=Gm,this.blendEquation=jr,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=zu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=_1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=hu,this.stencilZFail=hu,this.stencilZPass=hu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Me.prototype=Object.assign(Object.create(gi.prototype),{constructor:Me,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===Um;continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}},toJSON:function(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,this.combine!==void 0&&(n.combine=this.combine),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.size!==void 0&&(n.size=this.size),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==uo&&(n.blending=this.blending),this.flatShading===!0&&(n.flatShading=this.flatShading),this.side!==zo&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(n.morphTargets=!0),this.morphNormals===!0&&(n.morphNormals=!0),this.skinning===!0&&(n.skinning=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function i(r){const s=[];for(const o in r){const a=r[o];delete a.metadata,s.push(a)}return s}if(t){const r=i(e.textures),s=i(e.images);r.length>0&&(n.textures=r),s.length>0&&(n.images=s)}return n},clone:function(){return new this.constructor().copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Me.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});function Pn(e){Me.call(this),this.type="MeshBasicMaterial",this.color=new le(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pl,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}Pn.prototype=Object.create(Me.prototype);Pn.prototype.constructor=Pn;Pn.prototype.isMeshBasicMaterial=!0;Pn.prototype.copy=function(e){return Me.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};const $e=new b,dc=new j;function we(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n===!0,this.usage=Fl,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(we.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(we.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new le),t[n++]=s.r,t[n++]=s.g,t[n++]=s.b}return this},copyVector2sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new j),t[n++]=s.x,t[n++]=s.y}return this},copyVector3sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new b),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z}return this},copyVector4sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new We),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z,t[n++]=s.w}return this},applyMatrix3:function(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)dc.fromBufferAttribute(this,t),dc.applyMatrix3(e),this.setXY(t,dc.x,dc.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)$e.fromBufferAttribute(this,t),$e.applyMatrix3(e),this.setXYZ(t,$e.x,$e.y,$e.z);return this},applyMatrix4:function(e){for(let t=0,n=this.count;t<n;t++)$e.x=this.getX(t),$e.y=this.getY(t),$e.z=this.getZ(t),$e.applyMatrix4(e),this.setXYZ(t,$e.x,$e.y,$e.z);return this},applyNormalMatrix:function(e){for(let t=0,n=this.count;t<n;t++)$e.x=this.getX(t),$e.y=this.getY(t),$e.z=this.getZ(t),$e.applyNormalMatrix(e),this.setXYZ(t,$e.x,$e.y,$e.z);return this},transformDirection:function(e){for(let t=0,n=this.count;t<n;t++)$e.x=this.getX(t),$e.y=this.getY(t),$e.z=this.getZ(t),$e.transformDirection(e),this.setXYZ(t,$e.x,$e.y,$e.z);return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function sl(e,t,n){we.call(this,new Int8Array(e),t,n)}sl.prototype=Object.create(we.prototype);sl.prototype.constructor=sl;function ol(e,t,n){we.call(this,new Uint8Array(e),t,n)}ol.prototype=Object.create(we.prototype);ol.prototype.constructor=ol;function al(e,t,n){we.call(this,new Uint8ClampedArray(e),t,n)}al.prototype=Object.create(we.prototype);al.prototype.constructor=al;function ll(e,t,n){we.call(this,new Int16Array(e),t,n)}ll.prototype=Object.create(we.prototype);ll.prototype.constructor=ll;function as(e,t,n){we.call(this,new Uint16Array(e),t,n)}as.prototype=Object.create(we.prototype);as.prototype.constructor=as;function cl(e,t,n){we.call(this,new Int32Array(e),t,n)}cl.prototype=Object.create(we.prototype);cl.prototype.constructor=cl;function ls(e,t,n){we.call(this,new Uint32Array(e),t,n)}ls.prototype=Object.create(we.prototype);ls.prototype.constructor=ls;function ie(e,t,n){we.call(this,new Float32Array(e),t,n)}ie.prototype=Object.create(we.prototype);ie.prototype.constructor=ie;function ul(e,t,n){we.call(this,new Float64Array(e),t,n)}ul.prototype=Object.create(we.prototype);ul.prototype.constructor=ul;class E2{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(t){const n=[];let i,r,s;const o=t.faces;for(r=0;r<o.length;r++){const a=o[r];a.materialIndex!==s&&(s=a.materialIndex,i!==void 0&&(i.count=r*3-i.start,n.push(i)),i={start:r*3,materialIndex:s})}i!==void 0&&(i.count=r*3-i.start,n.push(i)),this.groups=n}fromGeometry(t){const n=t.faces,i=t.vertices,r=t.faceVertexUvs,s=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,a=t.morphTargets,l=a.length;let c;if(l>0){c=[];for(let g=0;g<l;g++)c[g]={name:a[g].name,data:[]};this.morphTargets.position=c}const h=t.morphNormals,u=h.length;let f;if(u>0){f=[];for(let g=0;g<u;g++)f[g]={name:h[g].name,data:[]};this.morphTargets.normal=f}const d=t.skinIndices,m=t.skinWeights,y=d.length===i.length,v=m.length===i.length;i.length>0&&n.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let g=0;g<n.length;g++){const p=n[g];this.vertices.push(i[p.a],i[p.b],i[p.c]);const x=p.vertexNormals;if(x.length===3)this.normals.push(x[0],x[1],x[2]);else{const M=p.normal;this.normals.push(M,M,M)}const w=p.vertexColors;if(w.length===3)this.colors.push(w[0],w[1],w[2]);else{const M=p.color;this.colors.push(M,M,M)}if(s===!0){const M=r[0][g];M!==void 0?this.uvs.push(M[0],M[1],M[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new j,new j,new j))}if(o===!0){const M=r[1][g];M!==void 0?this.uvs2.push(M[0],M[1],M[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new j,new j,new j))}for(let M=0;M<l;M++){const _=a[M].vertices;c[M].data.push(_[p.a],_[p.b],_[p.c])}for(let M=0;M<u;M++){const _=h[M].vertexNormals[g];f[M].data.push(_.a,_.b,_.c)}y&&this.skinIndices.push(d[p.a],d[p.b],d[p.c]),v&&this.skinWeights.push(m[p.a],m[p.b],m[p.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),this}}function M1(e){if(e.length===0)return-1/0;let t=e[0];for(let n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}let T2=1;const ei=new Le,zf=new de,Ps=new b,cn=new yi,aa=new yi,Et=new b;function ye(){Object.defineProperty(this,"id",{value:T2+=2}),this.uuid=Se.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}ye.prototype=Object.assign(Object.create(gi.prototype),{constructor:ye,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){return Array.isArray(e)?this.index=new(M1(e)>65535?ls:as)(e,1):this.index=e,this},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n!==void 0?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new qt().getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(e){return ei.makeRotationX(e),this.applyMatrix4(ei),this},rotateY:function(e){return ei.makeRotationY(e),this.applyMatrix4(ei),this},rotateZ:function(e){return ei.makeRotationZ(e),this.applyMatrix4(ei),this},translate:function(e,t,n){return ei.makeTranslation(e,t,n),this.applyMatrix4(ei),this},scale:function(e,t,n){return ei.makeScale(e,t,n),this.applyMatrix4(ei),this},lookAt:function(e){return zf.lookAt(e),zf.updateMatrix(),this.applyMatrix4(zf.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ps).negate(),this.translate(Ps.x,Ps.y,Ps.z),this},setFromObject:function(e){const t=e.geometry;if(e.isPoints||e.isLine){const n=new ie(t.vertices.length*3,3),i=new ie(t.colors.length*3,3);if(this.setAttribute("position",n.copyVector3sArray(t.vertices)),this.setAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){const r=new ie(t.lineDistances.length,1);this.setAttribute("lineDistance",r.copyArray(t.lineDistances))}t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new ie(t,3)),this},updateFromObject:function(e){let t=e.geometry;if(e.isMesh){let n=t.__directGeometry;if(t.elementsNeedUpdate===!0&&(n=void 0,t.elementsNeedUpdate=!1),n===void 0)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}if(t.verticesNeedUpdate===!0){const n=this.attributes.position;n!==void 0&&(n.copyVector3sArray(t.vertices),n.needsUpdate=!0),t.verticesNeedUpdate=!1}if(t.normalsNeedUpdate===!0){const n=this.attributes.normal;n!==void 0&&(n.copyVector3sArray(t.normals),n.needsUpdate=!0),t.normalsNeedUpdate=!1}if(t.colorsNeedUpdate===!0){const n=this.attributes.color;n!==void 0&&(n.copyColorsArray(t.colors),n.needsUpdate=!0),t.colorsNeedUpdate=!1}if(t.uvsNeedUpdate){const n=this.attributes.uv;n!==void 0&&(n.copyVector2sArray(t.uvs),n.needsUpdate=!0),t.uvsNeedUpdate=!1}if(t.lineDistancesNeedUpdate){const n=this.attributes.lineDistance;n!==void 0&&(n.copyArray(t.lineDistances),n.needsUpdate=!0),t.lineDistancesNeedUpdate=!1}return t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new E2().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){const t=new Float32Array(e.vertices.length*3);if(this.setAttribute("position",new we(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){const n=new Float32Array(e.normals.length*3);this.setAttribute("normal",new we(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){const n=new Float32Array(e.colors.length*3);this.setAttribute("color",new we(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){const n=new Float32Array(e.uvs.length*2);this.setAttribute("uv",new we(n,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){const n=new Float32Array(e.uvs2.length*2);this.setAttribute("uv2",new we(n,2).copyVector2sArray(e.uvs2))}this.groups=e.groups;for(const n in e.morphTargets){const i=[],r=e.morphTargets[n];for(let s=0,o=r.length;s<o;s++){const a=r[s],l=new ie(a.data.length*3,3);l.name=a.name,i.push(l.copyVector3sArray(a.data))}this.morphAttributes[n]=i}if(e.skinIndices.length>0){const n=new ie(e.skinIndices.length*4,4);this.setAttribute("skinIndex",n.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){const n=new ie(e.skinWeights.length*4,4);this.setAttribute("skinWeight",n.copyVector4sArray(e.skinWeights))}return e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new yi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new b(-1/0,-1/0,-1/0),new b(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const r=t[n];cn.setFromBufferAttribute(r),this.morphTargetsRelative?(Et.addVectors(this.boundingBox.min,cn.min),this.boundingBox.expandByPoint(Et),Et.addVectors(this.boundingBox.max,cn.max),this.boundingBox.expandByPoint(Et)):(this.boundingBox.expandByPoint(cn.min),this.boundingBox.expandByPoint(cn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Gi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new b,1/0);return}if(e){const n=this.boundingSphere.center;if(cn.setFromBufferAttribute(e),t)for(let r=0,s=t.length;r<s;r++){const o=t[r];aa.setFromBufferAttribute(o),this.morphTargetsRelative?(Et.addVectors(cn.min,aa.min),cn.expandByPoint(Et),Et.addVectors(cn.max,aa.max),cn.expandByPoint(Et)):(cn.expandByPoint(aa.min),cn.expandByPoint(aa.max))}cn.getCenter(n);let i=0;for(let r=0,s=e.count;r<s;r++)Et.fromBufferAttribute(e,r),i=Math.max(i,n.distanceToSquared(Et));if(t)for(let r=0,s=t.length;r<s;r++){const o=t[r],a=this.morphTargetsRelative;for(let l=0,c=o.count;l<c;l++)Et.fromBufferAttribute(o,l),a&&(Ps.fromBufferAttribute(e,l),Et.add(Ps)),i=Math.max(i,n.distanceToSquared(Et))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new we(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let u=0,f=n.count;u<f;u++)n.setXYZ(u,0,0,0);const i=new b,r=new b,s=new b,o=new b,a=new b,l=new b,c=new b,h=new b;if(e)for(let u=0,f=e.count;u<f;u+=3){const d=e.getX(u+0),m=e.getX(u+1),y=e.getX(u+2);i.fromBufferAttribute(t,d),r.fromBufferAttribute(t,m),s.fromBufferAttribute(t,y),c.subVectors(s,r),h.subVectors(i,r),c.cross(h),o.fromBufferAttribute(n,d),a.fromBufferAttribute(n,m),l.fromBufferAttribute(n,y),o.add(c),a.add(c),l.add(c),n.setXYZ(d,o.x,o.y,o.z),n.setXYZ(m,a.x,a.y,a.z),n.setXYZ(y,l.x,l.y,l.z)}else for(let u=0,f=t.count;u<f;u+=3)i.fromBufferAttribute(t,u+0),r.fromBufferAttribute(t,u+1),s.fromBufferAttribute(t,u+2),c.subVectors(s,r),h.subVectors(i,r),c.cross(h),n.setXYZ(u+0,c.x,c.y,c.z),n.setXYZ(u+1,c.x,c.y,c.z),n.setXYZ(u+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(e.attributes[i]===void 0)continue;const s=n[i].array,o=e.attributes[i],a=o.array,l=o.itemSize*t,c=Math.min(a.length,s.length-l);for(let h=0,u=l;h<c;h++,u++)s[u]=a[h]}return this},normalizeNormals:function(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Et.fromBufferAttribute(e,t),Et.normalize(),e.setXYZ(t,Et.x,Et.y,Et.z)},toNonIndexed:function(){function e(o,a){const l=o.array,c=o.itemSize,h=o.normalized,u=new l.constructor(a.length*c);let f=0,d=0;for(let m=0,y=a.length;m<y;m++){f=a[m]*c;for(let v=0;v<c;v++)u[d++]=l[f++]}return new we(u,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const t=new ye,n=this.index.array,i=this.attributes;for(const o in i){const a=i[o],l=e(a,n);t.setAttribute(o,l)}const r=this.morphAttributes;for(const o in r){const a=[],l=r[o];for(let c=0,h=l.length;c<h;c++){const u=l[c],f=e(u,n);a.push(f)}t.morphAttributes[o]=a}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,a=s.length;o<a;o++){const l=s[o];t.addGroup(l.start,l.count,l.materialIndex)}return t},toJSON:function(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const a=this.parameters;for(const l in a)a[l]!==void 0&&(e[l]=a[l]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const a in n){const l=n[a],c=l.toJSON(e.data);l.name!==""&&(c.name=l.name),e.data.attributes[a]=c}const i={};let r=!1;for(const a in this.morphAttributes){const l=this.morphAttributes[a],c=[];for(let h=0,u=l.length;h<u;h++){const f=l[h],d=f.toJSON(e.data);f.name!==""&&(d.name=f.name),c.push(d)}c.length>0&&(i[a]=c,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e},clone:function(){return new ye().copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const l in i){const c=i[l];this.setAttribute(l,c.clone(t))}const r=e.morphAttributes;for(const l in r){const c=[],h=r[l];for(let u=0,f=h.length;u<f;u++)c.push(h[u].clone(t));this.morphAttributes[l]=c}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let l=0,c=s.length;l<c;l++){const h=s[l];this.addGroup(h.start,h.count,h.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const a=e.boundingSphere;return a!==null&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const uv=new Le,Fr=new Vo,Uf=new Gi,$i=new b,Ji=new b,Zi=new b,Hf=new b,Gf=new b,Vf=new b,pc=new b,mc=new b,gc=new b,eo=new j,to=new j,no=new j,Ra=new b,yc=new b;function tt(e,t){de.call(this),this.type="Mesh",this.geometry=e!==void 0?e:new ye,this.material=t!==void 0?t:new Pn,this.updateMorphTargets()}tt.prototype=Object.assign(Object.create(de.prototype),{constructor:tt,isMesh:!0,copy:function(e){return de.prototype.copy.call(this,e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){const o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),Uf.copy(n.boundingSphere),Uf.applyMatrix4(r),e.ray.intersectsSphere(Uf)===!1)||(uv.getInverse(r),Fr.copy(e.ray).applyMatrix4(uv),n.boundingBox!==null&&Fr.intersectsBox(n.boundingBox)===!1))return;let s;if(n.isBufferGeometry){const o=n.index,a=n.attributes.position,l=n.morphAttributes.position,c=n.morphTargetsRelative,h=n.attributes.uv,u=n.attributes.uv2,f=n.groups,d=n.drawRange;if(o!==null)if(Array.isArray(i))for(let m=0,y=f.length;m<y;m++){const v=f[m],g=i[v.materialIndex],p=Math.max(v.start,d.start),x=Math.min(v.start+v.count,d.start+d.count);for(let w=p,M=x;w<M;w+=3){const _=o.getX(w),S=o.getX(w+1),C=o.getX(w+2);s=vc(this,g,e,Fr,a,l,c,h,u,_,S,C),s&&(s.faceIndex=Math.floor(w/3),s.face.materialIndex=v.materialIndex,t.push(s))}}else{const m=Math.max(0,d.start),y=Math.min(o.count,d.start+d.count);for(let v=m,g=y;v<g;v+=3){const p=o.getX(v),x=o.getX(v+1),w=o.getX(v+2);s=vc(this,i,e,Fr,a,l,c,h,u,p,x,w),s&&(s.faceIndex=Math.floor(v/3),t.push(s))}}else if(a!==void 0)if(Array.isArray(i))for(let m=0,y=f.length;m<y;m++){const v=f[m],g=i[v.materialIndex],p=Math.max(v.start,d.start),x=Math.min(v.start+v.count,d.start+d.count);for(let w=p,M=x;w<M;w+=3){const _=w,S=w+1,C=w+2;s=vc(this,g,e,Fr,a,l,c,h,u,_,S,C),s&&(s.faceIndex=Math.floor(w/3),s.face.materialIndex=v.materialIndex,t.push(s))}}else{const m=Math.max(0,d.start),y=Math.min(a.count,d.start+d.count);for(let v=m,g=y;v<g;v+=3){const p=v,x=v+1,w=v+2;s=vc(this,i,e,Fr,a,l,c,h,u,p,x,w),s&&(s.faceIndex=Math.floor(v/3),t.push(s))}}}else if(n.isGeometry){const o=Array.isArray(i),a=n.vertices,l=n.faces;let c;const h=n.faceVertexUvs[0];h.length>0&&(c=h);for(let u=0,f=l.length;u<f;u++){const d=l[u],m=o?i[d.materialIndex]:i;if(m===void 0)continue;const y=a[d.a],v=a[d.b],g=a[d.c];if(s=b1(this,m,e,Fr,y,v,g,Ra),s){if(c&&c[u]){const p=c[u];eo.copy(p[0]),to.copy(p[1]),no.copy(p[2]),s.uv=Pt.getUV(Ra,y,v,g,eo,to,no,new j)}s.face=d,s.faceIndex=u,t.push(s)}}}}});function b1(e,t,n,i,r,s,o,a){let l;if(t.side===_t?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,t.side!==Rl,a),l===null)return null;yc.copy(a),yc.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(yc);return c<n.near||c>n.far?null:{distance:c,point:yc.clone(),object:e}}function vc(e,t,n,i,r,s,o,a,l,c,h,u){$i.fromBufferAttribute(r,c),Ji.fromBufferAttribute(r,h),Zi.fromBufferAttribute(r,u);const f=e.morphTargetInfluences;if(t.morphTargets&&s&&f){pc.set(0,0,0),mc.set(0,0,0),gc.set(0,0,0);for(let m=0,y=s.length;m<y;m++){const v=f[m],g=s[m];v!==0&&(Hf.fromBufferAttribute(g,c),Gf.fromBufferAttribute(g,h),Vf.fromBufferAttribute(g,u),o?(pc.addScaledVector(Hf,v),mc.addScaledVector(Gf,v),gc.addScaledVector(Vf,v)):(pc.addScaledVector(Hf.sub($i),v),mc.addScaledVector(Gf.sub(Ji),v),gc.addScaledVector(Vf.sub(Zi),v)))}$i.add(pc),Ji.add(mc),Zi.add(gc)}e.isSkinnedMesh&&(e.boneTransform(c,$i),e.boneTransform(h,Ji),e.boneTransform(u,Zi));const d=b1(e,t,n,i,$i,Ji,Zi,Ra);if(d){a&&(eo.fromBufferAttribute(a,c),to.fromBufferAttribute(a,h),no.fromBufferAttribute(a,u),d.uv=Pt.getUV(Ra,$i,Ji,Zi,eo,to,no,new j)),l&&(eo.fromBufferAttribute(l,c),to.fromBufferAttribute(l,h),no.fromBufferAttribute(l,u),d.uv2=Pt.getUV(Ra,$i,Ji,Zi,eo,to,no,new j));const m=new rl(c,h,u);Pt.getNormal($i,Ji,Zi,m.normal),d.face=m}return d}class Bl extends ye{constructor(t=1,n=1,i=1,r=1,s=1,o=1){super(),this.type="BoxBufferGeometry",this.parameters={width:t,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],h=[],u=[];let f=0,d=0;m("z","y","x",-1,-1,i,n,t,o,s,0),m("z","y","x",1,-1,i,n,-t,o,s,1),m("x","z","y",1,1,t,i,n,r,o,2),m("x","z","y",1,-1,t,i,-n,r,o,3),m("x","y","z",1,-1,t,n,i,r,s,4),m("x","y","z",-1,-1,t,n,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new ie(c,3)),this.setAttribute("normal",new ie(h,3)),this.setAttribute("uv",new ie(u,2));function m(y,v,g,p,x,w,M,_,S,C,L){const D=w/S,I=M/C,O=w/2,B=M/2,P=_/2,N=S+1,z=C+1;let Y=0,F=0;const G=new b;for(let q=0;q<z;q++){const Z=q*I-B;for(let he=0;he<N;he++){const Ee=he*D-O;G[y]=Ee*p,G[v]=Z*x,G[g]=P,c.push(G.x,G.y,G.z),G[y]=0,G[v]=0,G[g]=_>0?1:-1,h.push(G.x,G.y,G.z),u.push(he/S),u.push(1-q/C),Y+=1}}for(let q=0;q<C;q++)for(let Z=0;Z<S;Z++){const he=f+Z+N*q,Ee=f+Z+N*(q+1),Ue=f+(Z+1)+N*(q+1),W=f+(Z+1)+N*q;l.push(he,Ee,W),l.push(Ee,Ue,W),F+=6}a.addGroup(d,F,L),d+=F,f+=Y}}}function bo(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function Bt(e){const t={};for(let n=0;n<e.length;n++){const i=bo(e[n]);for(const r in i)t[r]=i[r]}return t}const S1={clone:bo,merge:Bt};var A2=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,C2=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function $t(e){Me.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=A2,this.fragmentShader=C2,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}$t.prototype=Object.create(Me.prototype);$t.prototype.constructor=$t;$t.prototype.isShaderMaterial=!0;$t.prototype.copy=function(e){return Me.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=bo(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this};$t.prototype.toJSON=function(e){const t=Me.prototype.toJSON.call(this,e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?t.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[i]={type:"m4",value:s.toArray()}:t.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t};function ui(){de.call(this),this.type="Camera",this.matrixWorldInverse=new Le,this.projectionMatrix=new Le,this.projectionMatrixInverse=new Le}ui.prototype=Object.assign(Object.create(de.prototype),{constructor:ui,isCamera:!0,copy:function(e,t){return de.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){e===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new b),this.updateMatrixWorld(!0);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){de.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){de.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function yt(e,t,n,i){ui.call(this),this.type="PerspectiveCamera",this.fov=e!==void 0?e:50,this.zoom=1,this.near=n!==void 0?n:.1,this.far=i!==void 0?i:2e3,this.focus=10,this.aspect=t!==void 0?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}yt.prototype=Object.assign(Object.create(ui.prototype),{constructor:yt,isPerspectiveCamera:!0,copy:function(e,t){return ui.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){const t=.5*this.getFilmHeight()/e;this.fov=Se.RAD2DEG*2*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){const e=Math.tan(Se.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return Se.RAD2DEG*2*Math.atan(Math.tan(Se.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=this.near;let t=e*Math.tan(Se.DEG2RAD*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const a=s.fullWidth,l=s.fullHeight;r+=s.offsetX*i/a,t-=s.offsetY*n/l,i*=s.width/a,n*=s.height/l}const o=this.filmOffset;o!==0&&(r+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){const t=de.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});const Ns=90,Is=1;function So(e,t,n){if(de.call(this),this.type="CubeCamera",n.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=n;const i=new yt(Ns,Is,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new b(1,0,0)),this.add(i);const r=new yt(Ns,Is,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new b(-1,0,0)),this.add(r);const s=new yt(Ns,Is,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new b(0,1,0)),this.add(s);const o=new yt(Ns,Is,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new b(0,-1,0)),this.add(o);const a=new yt(Ns,Is,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new b(0,0,1)),this.add(a);const l=new yt(Ns,Is,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new b(0,0,-1)),this.add(l),this.update=function(c,h){this.parent===null&&this.updateMatrixWorld();const u=c.xr.enabled,f=c.getRenderTarget();c.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,c.setRenderTarget(n,0),c.render(h,i),c.setRenderTarget(n,1),c.render(h,r),c.setRenderTarget(n,2),c.render(h,s),c.setRenderTarget(n,3),c.render(h,o),c.setRenderTarget(n,4),c.render(h,a),n.texture.generateMipmaps=d,c.setRenderTarget(n,5),c.render(h,l),c.setRenderTarget(f),c.xr.enabled=u},this.clear=function(c,h,u,f){const d=c.getRenderTarget();for(let m=0;m<6;m++)c.setRenderTarget(n,m),c.clear(h,u,f);c.setRenderTarget(d)}}So.prototype=Object.create(de.prototype);So.prototype.constructor=So;function hi(e,t,n,i,r,s,o,a,l,c){e=e!==void 0?e:[],t=t!==void 0?t:Nl,o=o!==void 0?o:mr,qe.call(this,e,t,n,i,r,s,o,a,l,c),this.flipY=!1,this._needsFlipEnvMap=!0}hi.prototype=Object.create(qe.prototype);hi.prototype.constructor=hi;hi.prototype.isCubeTexture=!0;Object.defineProperty(hi.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});function Mr(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),mn.call(this,e,e,t),t=t||{},this.texture=new hi(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture._needsFlipEnvMap=!1}Mr.prototype=Object.create(mn.prototype);Mr.prototype.constructor=Mr;Mr.prototype.isWebGLCubeRenderTarget=!0;Mr.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=pn,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

			varying vec3 vWorldDirection;

			vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

				return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

			}

			void main() {

				vWorldDirection = transformDirection( position, modelMatrix );

				#include <begin_vertex>
				#include <project_vertex>

			}
		`,fragmentShader:`

			uniform sampler2D tEquirect;

			varying vec3 vWorldDirection;

			#include <common>

			void main() {

				vec3 direction = normalize( vWorldDirection );

				vec2 sampleUV = equirectUv( direction );

				gl_FragColor = texture2D( tEquirect, sampleUV );

			}
		`},i=new Bl(5,5,5),r=new $t({name:"CubemapFromEquirect",uniforms:bo(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:_t,blending:Ii});r.uniforms.tEquirect.value=t;const s=new tt(i,r),o=t.minFilter;return t.minFilter===Ho&&(t.minFilter=At),new So(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this};function cs(e,t,n,i,r,s,o,a,l,c,h,u){qe.call(this,null,s,o,a,l,c,i,r,h,u),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=l!==void 0?l:Mt,this.minFilter=c!==void 0?c:Mt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}cs.prototype=Object.create(qe.prototype);cs.prototype.constructor=cs;cs.prototype.isDataTexture=!0;const Ds=new Gi,xc=new b;class kl{constructor(t,n,i,r,s,o){this.planes=[t!==void 0?t:new ri,n!==void 0?n:new ri,i!==void 0?i:new ri,r!==void 0?r:new ri,s!==void 0?s:new ri,o!==void 0?o:new ri]}set(t,n,i,r,s,o){const a=this.planes;return a[0].copy(t),a[1].copy(n),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}clone(){return new this.constructor().copy(this)}copy(t){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const n=this.planes,i=t.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],h=i[6],u=i[7],f=i[8],d=i[9],m=i[10],y=i[11],v=i[12],g=i[13],p=i[14],x=i[15];return n[0].setComponents(a-r,u-l,y-f,x-v).normalize(),n[1].setComponents(a+r,u+l,y+f,x+v).normalize(),n[2].setComponents(a+s,u+c,y+d,x+g).normalize(),n[3].setComponents(a-s,u-c,y-d,x-g).normalize(),n[4].setComponents(a-o,u-h,y-m,x-p).normalize(),n[5].setComponents(a+o,u+h,y+m,x+p).normalize(),this}intersectsObject(t){const n=t.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),Ds.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Ds)}intersectsSprite(t){return Ds.center.set(0,0,0),Ds.radius=.7071067811865476,Ds.applyMatrix4(t.matrixWorld),this.intersectsSphere(Ds)}intersectsSphere(t){const n=this.planes,i=t.center,r=-t.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(t){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(xc.x=r.normal.x>0?t.max.x:t.min.x,xc.y=r.normal.y>0?t.max.y:t.min.y,xc.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(xc)<0)return!1}return!0}containsPoint(t){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(t)<0)return!1;return!0}}function E1(){let e=null,t=!1,n=null,i=null;function r(s,o){n(s,o),i=e.requestAnimationFrame(r)}return{start:function(){t!==!0&&n!==null&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(s){n=s},setContext:function(s){e=s}}}function L2(e,t){const n=t.isWebGL2,i=new WeakMap;function r(c,h){const u=c.array,f=c.usage,d=e.createBuffer();e.bindBuffer(h,d),e.bufferData(h,u,f),c.onUploadCallback();let m=5126;return u instanceof Float32Array?m=5126:u instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):u instanceof Uint16Array?m=5123:u instanceof Int16Array?m=5122:u instanceof Uint32Array?m=5125:u instanceof Int32Array?m=5124:u instanceof Int8Array?m=5120:u instanceof Uint8Array&&(m=5121),{buffer:d,type:m,bytesPerElement:u.BYTES_PER_ELEMENT,version:c.version}}function s(c,h,u){const f=h.array,d=h.updateRange;e.bindBuffer(u,c),d.count===-1?e.bufferSubData(u,0,f):(n?e.bufferSubData(u,d.offset*f.BYTES_PER_ELEMENT,f,d.offset,d.count):e.bufferSubData(u,d.offset*f.BYTES_PER_ELEMENT,f.subarray(d.offset,d.offset+d.count)),d.count=-1)}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const h=i.get(c);h&&(e.deleteBuffer(h.buffer),i.delete(c))}function l(c,h){if(c.isGLBufferAttribute){var u=i.get(c);(!u||u.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=i.get(c);f===void 0?i.set(c,r(c,h)):f.version<c.version&&(s(f.buffer,c,h),f.version=c.version)}return{get:o,remove:a,update:l}}class zh extends ye{constructor(t,n,i,r){super(),this.type="PlaneBufferGeometry",this.parameters={width:t,height:n,widthSegments:i,heightSegments:r},t=t||1,n=n||1;const s=t/2,o=n/2,a=Math.floor(i)||1,l=Math.floor(r)||1,c=a+1,h=l+1,u=t/a,f=n/l,d=[],m=[],y=[],v=[];for(let g=0;g<h;g++){const p=g*f-o;for(let x=0;x<c;x++){const w=x*u-s;m.push(w,-p,0),y.push(0,0,1),v.push(x/a),v.push(1-g/l)}}for(let g=0;g<l;g++)for(let p=0;p<a;p++){const x=p+c*g,w=p+c*(g+1),M=p+1+c*(g+1),_=p+1+c*g;d.push(x,w,_),d.push(w,M,_)}this.setIndex(d),this.setAttribute("position",new ie(m,3)),this.setAttribute("normal",new ie(y,3)),this.setAttribute("uv",new ie(v,2))}}var R2=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,P2=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,N2=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,I2=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,D2=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,O2="vec3 transformed = vec3( position );",F2=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,B2=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,k2=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,z2=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,U2=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,H2=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,G2=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,V2=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,W2=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,j2=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,q2=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor.xyz *= color.xyz;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,X2=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Y2=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,$2=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,J2=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Z2=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Q2=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,K2=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,eA="gl_FragColor = linearToOutputTexel( gl_FragColor );",tA=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,nA=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,iA=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,rA=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,sA=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,oA=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,aA=`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,lA=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,cA=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,uA=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,hA=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,fA=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,dA=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,pA=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,mA=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,gA=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,yA=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,vA=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,xA=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,_A=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,wA=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,MA=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,bA=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,SA=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,EA=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,TA=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,AA=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,CA=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,LA=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,RA=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,PA=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,NA=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,IA=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,DA=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,OA=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,FA=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,BA=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,kA=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,zA=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,UA=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,HA=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,GA=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,VA=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,WA=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,jA=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,qA=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,XA=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,YA=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,$A=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,JA=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,ZA=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,QA=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,KA=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,e3=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,t3=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,n3=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,i3=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,r3=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,s3=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,o3=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,a3=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,l3=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,c3=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,u3=`#ifdef USE_TRANSMISSIONMAP
	totalTransmission *= texture2D( transmissionMap, vUv ).r;
#endif`,h3=`#ifdef USE_TRANSMISSIONMAP
	uniform sampler2D transmissionMap;
#endif`,f3=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,d3=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,p3=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,m3=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,g3=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,y3=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,v3=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,x3=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,_3=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,w3=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,M3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,b3=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,S3=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,E3=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,T3=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,A3=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,C3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,L3=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,R3=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,P3=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,N3=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,I3=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,D3=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,O3=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,F3=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,B3=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,k3=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,z3=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,U3=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,H3=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSMISSION
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSMISSION
	uniform float transmission;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <transmissionmap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#ifdef TRANSMISSION
		float totalTransmission = transmission;
	#endif
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <transmissionmap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSMISSION
		diffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,G3=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,V3=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,W3=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,j3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,q3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,X3=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Y3=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,J3=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;const Ie={alphamap_fragment:R2,alphamap_pars_fragment:P2,alphatest_fragment:N2,aomap_fragment:I2,aomap_pars_fragment:D2,begin_vertex:O2,beginnormal_vertex:F2,bsdfs:B2,bumpmap_pars_fragment:k2,clipping_planes_fragment:z2,clipping_planes_pars_fragment:U2,clipping_planes_pars_vertex:H2,clipping_planes_vertex:G2,color_fragment:V2,color_pars_fragment:W2,color_pars_vertex:j2,color_vertex:q2,common:X2,cube_uv_reflection_fragment:Y2,defaultnormal_vertex:$2,displacementmap_pars_vertex:J2,displacementmap_vertex:Z2,emissivemap_fragment:Q2,emissivemap_pars_fragment:K2,encodings_fragment:eA,encodings_pars_fragment:tA,envmap_fragment:nA,envmap_common_pars_fragment:iA,envmap_pars_fragment:rA,envmap_pars_vertex:sA,envmap_physical_pars_fragment:gA,envmap_vertex:oA,fog_vertex:aA,fog_pars_vertex:lA,fog_fragment:cA,fog_pars_fragment:uA,gradientmap_pars_fragment:hA,lightmap_fragment:fA,lightmap_pars_fragment:dA,lights_lambert_vertex:pA,lights_pars_begin:mA,lights_toon_fragment:yA,lights_toon_pars_fragment:vA,lights_phong_fragment:xA,lights_phong_pars_fragment:_A,lights_physical_fragment:wA,lights_physical_pars_fragment:MA,lights_fragment_begin:bA,lights_fragment_maps:SA,lights_fragment_end:EA,logdepthbuf_fragment:TA,logdepthbuf_pars_fragment:AA,logdepthbuf_pars_vertex:CA,logdepthbuf_vertex:LA,map_fragment:RA,map_pars_fragment:PA,map_particle_fragment:NA,map_particle_pars_fragment:IA,metalnessmap_fragment:DA,metalnessmap_pars_fragment:OA,morphnormal_vertex:FA,morphtarget_pars_vertex:BA,morphtarget_vertex:kA,normal_fragment_begin:zA,normal_fragment_maps:UA,normalmap_pars_fragment:HA,clearcoat_normal_fragment_begin:GA,clearcoat_normal_fragment_maps:VA,clearcoat_pars_fragment:WA,packing:jA,premultiplied_alpha_fragment:qA,project_vertex:XA,dithering_fragment:YA,dithering_pars_fragment:$A,roughnessmap_fragment:JA,roughnessmap_pars_fragment:ZA,shadowmap_pars_fragment:QA,shadowmap_pars_vertex:KA,shadowmap_vertex:e3,shadowmask_pars_fragment:t3,skinbase_vertex:n3,skinning_pars_vertex:i3,skinning_vertex:r3,skinnormal_vertex:s3,specularmap_fragment:o3,specularmap_pars_fragment:a3,tonemapping_fragment:l3,tonemapping_pars_fragment:c3,transmissionmap_fragment:u3,transmissionmap_pars_fragment:h3,uv_pars_fragment:f3,uv_pars_vertex:d3,uv_vertex:p3,uv2_pars_fragment:m3,uv2_pars_vertex:g3,uv2_vertex:y3,worldpos_vertex:v3,background_frag:x3,background_vert:_3,cube_frag:w3,cube_vert:M3,depth_frag:b3,depth_vert:S3,distanceRGBA_frag:E3,distanceRGBA_vert:T3,equirect_frag:A3,equirect_vert:C3,linedashed_frag:L3,linedashed_vert:R3,meshbasic_frag:P3,meshbasic_vert:N3,meshlambert_frag:I3,meshlambert_vert:D3,meshmatcap_frag:O3,meshmatcap_vert:F3,meshtoon_frag:B3,meshtoon_vert:k3,meshphong_frag:z3,meshphong_vert:U3,meshphysical_frag:H3,meshphysical_vert:G3,normal_frag:V3,normal_vert:W3,points_frag:j3,points_vert:q3,shadow_frag:X3,shadow_vert:Y3,sprite_frag:$3,sprite_vert:J3},se={common:{diffuse:{value:new le(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new qt},uv2Transform:{value:new qt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new j(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new le(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new le(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new qt}},sprite:{diffuse:{value:new le(15658734)},opacity:{value:1},center:{value:new j(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new qt}}},Vn={basic:{uniforms:Bt([se.common,se.specularmap,se.envmap,se.aomap,se.lightmap,se.fog]),vertexShader:Ie.meshbasic_vert,fragmentShader:Ie.meshbasic_frag},lambert:{uniforms:Bt([se.common,se.specularmap,se.envmap,se.aomap,se.lightmap,se.emissivemap,se.fog,se.lights,{emissive:{value:new le(0)}}]),vertexShader:Ie.meshlambert_vert,fragmentShader:Ie.meshlambert_frag},phong:{uniforms:Bt([se.common,se.specularmap,se.envmap,se.aomap,se.lightmap,se.emissivemap,se.bumpmap,se.normalmap,se.displacementmap,se.fog,se.lights,{emissive:{value:new le(0)},specular:{value:new le(1118481)},shininess:{value:30}}]),vertexShader:Ie.meshphong_vert,fragmentShader:Ie.meshphong_frag},standard:{uniforms:Bt([se.common,se.envmap,se.aomap,se.lightmap,se.emissivemap,se.bumpmap,se.normalmap,se.displacementmap,se.roughnessmap,se.metalnessmap,se.fog,se.lights,{emissive:{value:new le(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ie.meshphysical_vert,fragmentShader:Ie.meshphysical_frag},toon:{uniforms:Bt([se.common,se.aomap,se.lightmap,se.emissivemap,se.bumpmap,se.normalmap,se.displacementmap,se.gradientmap,se.fog,se.lights,{emissive:{value:new le(0)}}]),vertexShader:Ie.meshtoon_vert,fragmentShader:Ie.meshtoon_frag},matcap:{uniforms:Bt([se.common,se.bumpmap,se.normalmap,se.displacementmap,se.fog,{matcap:{value:null}}]),vertexShader:Ie.meshmatcap_vert,fragmentShader:Ie.meshmatcap_frag},points:{uniforms:Bt([se.points,se.fog]),vertexShader:Ie.points_vert,fragmentShader:Ie.points_frag},dashed:{uniforms:Bt([se.common,se.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ie.linedashed_vert,fragmentShader:Ie.linedashed_frag},depth:{uniforms:Bt([se.common,se.displacementmap]),vertexShader:Ie.depth_vert,fragmentShader:Ie.depth_frag},normal:{uniforms:Bt([se.common,se.bumpmap,se.normalmap,se.displacementmap,{opacity:{value:1}}]),vertexShader:Ie.normal_vert,fragmentShader:Ie.normal_frag},sprite:{uniforms:Bt([se.sprite,se.fog]),vertexShader:Ie.sprite_vert,fragmentShader:Ie.sprite_frag},background:{uniforms:{uvTransform:{value:new qt},t2D:{value:null}},vertexShader:Ie.background_vert,fragmentShader:Ie.background_frag},cube:{uniforms:Bt([se.envmap,{opacity:{value:1}}]),vertexShader:Ie.cube_vert,fragmentShader:Ie.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ie.equirect_vert,fragmentShader:Ie.equirect_frag},distanceRGBA:{uniforms:Bt([se.common,se.displacementmap,{referencePosition:{value:new b},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ie.distanceRGBA_vert,fragmentShader:Ie.distanceRGBA_frag},shadow:{uniforms:Bt([se.lights,se.fog,{color:{value:new le(0)},opacity:{value:1}}]),vertexShader:Ie.shadow_vert,fragmentShader:Ie.shadow_frag}};Vn.physical={uniforms:Bt([Vn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new j(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new le(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Ie.meshphysical_vert,fragmentShader:Ie.meshphysical_frag};function Z3(e,t,n,i,r){const s=new le(0);let o=0,a,l,c=null,h=0,u=null;function f(m,y,v,g){let p=y.isScene===!0?y.background:null;p&&p.isTexture&&(p=t.get(p));const x=e.xr,w=x.getSession&&x.getSession();w&&w.environmentBlendMode==="additive"&&(p=null),p===null?d(s,o):p&&p.isColor&&(d(p,1),g=!0),(e.autoClear||g)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.isWebGLCubeRenderTarget||p.mapping===Uo)?(l===void 0&&(l=new tt(new Bl(1,1,1),new $t({name:"BackgroundCubeMaterial",uniforms:bo(Vn.cube.uniforms),vertexShader:Vn.cube.vertexShader,fragmentShader:Vn.cube.fragmentShader,side:_t,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(M,_,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),p.isWebGLCubeRenderTarget&&(p=p.texture),l.material.uniforms.envMap.value=p,l.material.uniforms.flipEnvMap.value=p.isCubeTexture&&p._needsFlipEnvMap?-1:1,(c!==p||h!==p.version||u!==e.toneMapping)&&(l.material.needsUpdate=!0,c=p,h=p.version,u=e.toneMapping),m.unshift(l,l.geometry,l.material,0,0,null)):p&&p.isTexture&&(a===void 0&&(a=new tt(new zh(2,2),new $t({name:"BackgroundMaterial",uniforms:bo(Vn.background.uniforms),vertexShader:Vn.background.vertexShader,fragmentShader:Vn.background.fragmentShader,side:zo,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=p,p.matrixAutoUpdate===!0&&p.updateMatrix(),a.material.uniforms.uvTransform.value.copy(p.matrix),(c!==p||h!==p.version||u!==e.toneMapping)&&(a.material.needsUpdate=!0,c=p,h=p.version,u=e.toneMapping),m.unshift(a,a.geometry,a.material,0,0,null))}function d(m,y){n.buffers.color.setClear(m.r,m.g,m.b,y,r)}return{getClearColor:function(){return s},setClearColor:function(m,y){s.set(m),o=y!==void 0?y:1,d(s,o)},getClearAlpha:function(){return o},setClearAlpha:function(m){o=m,d(s,o)},render:f}}function Q3(e,t,n,i){const r=e.getParameter(34921),s=i.isWebGL2?null:t.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=y(null);let c=l;function h(B,P,N,z,Y){let F=!1;if(o){const G=m(z,N,P);c!==G&&(c=G,f(c.object)),F=v(z,Y),F&&g(z,Y)}else{const G=P.wireframe===!0;(c.geometry!==z.id||c.program!==N.id||c.wireframe!==G)&&(c.geometry=z.id,c.program=N.id,c.wireframe=G,F=!0)}B.isInstancedMesh===!0&&(F=!0),Y!==null&&n.update(Y,34963),F&&(S(B,P,N,z),Y!==null&&e.bindBuffer(34963,n.get(Y).buffer))}function u(){return i.isWebGL2?e.createVertexArray():s.createVertexArrayOES()}function f(B){return i.isWebGL2?e.bindVertexArray(B):s.bindVertexArrayOES(B)}function d(B){return i.isWebGL2?e.deleteVertexArray(B):s.deleteVertexArrayOES(B)}function m(B,P,N){const z=N.wireframe===!0;let Y=a[B.id];Y===void 0&&(Y={},a[B.id]=Y);let F=Y[P.id];F===void 0&&(F={},Y[P.id]=F);let G=F[z];return G===void 0&&(G=y(u()),F[z]=G),G}function y(B){const P=[],N=[],z=[];for(let Y=0;Y<r;Y++)P[Y]=0,N[Y]=0,z[Y]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:P,enabledAttributes:N,attributeDivisors:z,object:B,attributes:{},index:null}}function v(B,P){const N=c.attributes,z=B.attributes;if(Object.keys(N).length!==Object.keys(z).length)return!0;for(const Y in z){const F=N[Y],G=z[Y];if(F===void 0||F.attribute!==G||F.data!==G.data)return!0}return c.index!==P}function g(B,P){const N={},z=B.attributes;for(const Y in z){const F=z[Y],G={};G.attribute=F,F.data&&(G.data=F.data),N[Y]=G}c.attributes=N,c.index=P}function p(){const B=c.newAttributes;for(let P=0,N=B.length;P<N;P++)B[P]=0}function x(B){w(B,0)}function w(B,P){const N=c.newAttributes,z=c.enabledAttributes,Y=c.attributeDivisors;N[B]=1,z[B]===0&&(e.enableVertexAttribArray(B),z[B]=1),Y[B]!==P&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](B,P),Y[B]=P)}function M(){const B=c.newAttributes,P=c.enabledAttributes;for(let N=0,z=P.length;N<z;N++)P[N]!==B[N]&&(e.disableVertexAttribArray(N),P[N]=0)}function _(B,P,N,z,Y,F){i.isWebGL2===!0&&(N===5124||N===5125)?e.vertexAttribIPointer(B,P,N,Y,F):e.vertexAttribPointer(B,P,N,z,Y,F)}function S(B,P,N,z){if(i.isWebGL2===!1&&(B.isInstancedMesh||z.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;p();const Y=z.attributes,F=N.getAttributes(),G=P.defaultAttributeValues;for(const q in F){const Z=F[q];if(Z>=0){const he=Y[q];if(he!==void 0){const Ee=he.normalized,Ue=he.itemSize,W=n.get(he);if(W===void 0)continue;const nt=W.buffer,ve=W.type,ke=W.bytesPerElement;if(he.isInterleavedBufferAttribute){const Ce=he.data,He=Ce.stride,Ne=he.offset;Ce&&Ce.isInstancedInterleavedBuffer?(w(Z,Ce.meshPerAttribute),z._maxInstanceCount===void 0&&(z._maxInstanceCount=Ce.meshPerAttribute*Ce.count)):x(Z),e.bindBuffer(34962,nt),_(Z,Ue,ve,Ee,He*ke,Ne*ke)}else he.isInstancedBufferAttribute?(w(Z,he.meshPerAttribute),z._maxInstanceCount===void 0&&(z._maxInstanceCount=he.meshPerAttribute*he.count)):x(Z),e.bindBuffer(34962,nt),_(Z,Ue,ve,Ee,0,0)}else if(q==="instanceMatrix"){const Ee=n.get(B.instanceMatrix);if(Ee===void 0)continue;const Ue=Ee.buffer,W=Ee.type;w(Z+0,1),w(Z+1,1),w(Z+2,1),w(Z+3,1),e.bindBuffer(34962,Ue),e.vertexAttribPointer(Z+0,4,W,!1,64,0),e.vertexAttribPointer(Z+1,4,W,!1,64,16),e.vertexAttribPointer(Z+2,4,W,!1,64,32),e.vertexAttribPointer(Z+3,4,W,!1,64,48)}else if(q==="instanceColor"){const Ee=n.get(B.instanceColor);if(Ee===void 0)continue;const Ue=Ee.buffer,W=Ee.type;w(Z,1),e.bindBuffer(34962,Ue),e.vertexAttribPointer(Z,3,W,!1,12,0)}else if(G!==void 0){const Ee=G[q];if(Ee!==void 0)switch(Ee.length){case 2:e.vertexAttrib2fv(Z,Ee);break;case 3:e.vertexAttrib3fv(Z,Ee);break;case 4:e.vertexAttrib4fv(Z,Ee);break;default:e.vertexAttrib1fv(Z,Ee)}}}}M()}function C(){I();for(const B in a){const P=a[B];for(const N in P){const z=P[N];for(const Y in z)d(z[Y].object),delete z[Y];delete P[N]}delete a[B]}}function L(B){if(a[B.id]===void 0)return;const P=a[B.id];for(const N in P){const z=P[N];for(const Y in z)d(z[Y].object),delete z[Y];delete P[N]}delete a[B.id]}function D(B){for(const P in a){const N=a[P];if(N[B.id]===void 0)continue;const z=N[B.id];for(const Y in z)d(z[Y].object),delete z[Y];delete N[B.id]}}function I(){O(),c!==l&&(c=l,f(c.object))}function O(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:I,resetDefaultState:O,dispose:C,releaseStatesOfGeometry:L,releaseStatesOfProgram:D,initAttributes:p,enableAttribute:x,disableUnusedAttributes:M}}function K3(e,t,n,i){const r=i.isWebGL2;let s;function o(c){s=c}function a(c,h){e.drawArrays(s,c,h),n.update(h,s,1)}function l(c,h,u){if(u===0)return;let f,d;if(r)f=e,d="drawArraysInstanced";else if(f=t.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[d](s,c,h,u),n.update(h,s,u)}this.setMode=o,this.render=a,this.renderInstances=l}function eC(e,t,n){let i;function r(){if(i!==void 0)return i;const _=t.get("EXT_texture_filter_anisotropic");return _!==null?i=e.getParameter(_.MAX_TEXTURE_MAX_ANISOTROPY_EXT):i=0,i}function s(_){if(_==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";_="mediump"}return _==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&e instanceof WebGL2ComputeRenderingContext;let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=n.logarithmicDepthBuffer===!0,h=e.getParameter(34930),u=e.getParameter(35660),f=e.getParameter(3379),d=e.getParameter(34076),m=e.getParameter(34921),y=e.getParameter(36347),v=e.getParameter(36348),g=e.getParameter(36349),p=u>0,x=o||!!t.get("OES_texture_float"),w=p&&x,M=o?e.getParameter(36183):0;return{isWebGL2:o,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:u,maxTextureSize:f,maxCubemapSize:d,maxAttributes:m,maxVertexUniforms:y,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:p,floatFragmentTextures:x,floatVertexTextures:w,maxSamples:M}}function tC(e){const t=this;let n=null,i=0,r=!1,s=!1;const o=new ri,a=new qt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,f,d){const m=u.length!==0||f||i!==0||r;return r=f,n=h(u,d,0),i=u.length,m},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1,c()},this.setState=function(u,f,d){const m=u.clippingPlanes,y=u.clipIntersection,v=u.clipShadows,g=e.get(u);if(!r||m===null||m.length===0||s&&!v)s?h(null):c();else{const p=s?0:i,x=p*4;let w=g.clippingState||null;l.value=w,w=h(m,f,x,d);for(let M=0;M!==x;++M)w[M]=n[M];g.clippingState=w,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=p}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function h(u,f,d,m){const y=u!==null?u.length:0;let v=null;if(y!==0){if(v=l.value,m!==!0||v===null){const g=d+y*4,p=f.matrixWorldInverse;a.getNormalMatrix(p),(v===null||v.length<g)&&(v=new Float32Array(g));for(let x=0,w=d;x!==y;++x,w+=4)o.copy(u[x]).applyMatrix4(p,a),o.normal.toArray(v,w),v[w+3]=o.constant}l.value=v,l.needsUpdate=!0}return t.numPlanes=y,t.numIntersection=0,v}}function nC(e){let t=new WeakMap;function n(s,o){return o===Uu?s.mapping=Nl:o===Hu&&(s.mapping=Il),s}function i(s){if(s&&s.isTexture){const o=s.mapping;if(o===Uu||o===Hu)if(t.has(s)){const a=t.get(s).texture;return n(a,s.mapping)}else{const a=s.image;if(a&&a.height>0){const l=e.getRenderList(),c=e.getRenderTarget(),h=e.getRenderState(),u=new Mr(a.height/2);return u.fromEquirectangularTexture(e,s),t.set(s,u),e.setRenderTarget(c),e.setRenderList(l),e.setRenderState(h),n(u.texture,s.mapping)}else return null}}return s}function r(){t=new WeakMap}return{get:i,dispose:r}}function iC(e){const t={};return{has:function(n){if(t[n]!==void 0)return t[n]!==null;let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i!==null},get:function(n){return this.has(n)||console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]}}}function rC(e,t,n,i){const r=new WeakMap,s=new WeakMap;function o(u){const f=u.target,d=r.get(f);d.index!==null&&t.remove(d.index);for(const y in d.attributes)t.remove(d.attributes[y]);f.removeEventListener("dispose",o),r.delete(f);const m=s.get(d);m&&(t.remove(m),s.delete(d)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,n.memory.geometries--}function a(u,f){let d=r.get(f);return d||(f.addEventListener("dispose",o),f.isBufferGeometry?d=f:f.isGeometry&&(f._bufferGeometry===void 0&&(f._bufferGeometry=new ye().setFromObject(u)),d=f._bufferGeometry),r.set(f,d),n.memory.geometries++,d)}function l(u){const f=u.attributes;for(const m in f)t.update(f[m],34962);const d=u.morphAttributes;for(const m in d){const y=d[m];for(let v=0,g=y.length;v<g;v++)t.update(y[v],34962)}}function c(u){const f=[],d=u.index,m=u.attributes.position;let y=0;if(d!==null){const p=d.array;y=d.version;for(let x=0,w=p.length;x<w;x+=3){const M=p[x+0],_=p[x+1],S=p[x+2];f.push(M,_,_,S,S,M)}}else{const p=m.array;y=m.version;for(let x=0,w=p.length/3-1;x<w;x+=3){const M=x+0,_=x+1,S=x+2;f.push(M,_,_,S,S,M)}}const v=new(M1(f)>65535?ls:as)(f,1);v.version=y;const g=s.get(u);g&&t.remove(g),s.set(u,v)}function h(u){const f=s.get(u);if(f){const d=u.index;d!==null&&f.version<d.version&&c(u)}else c(u);return s.get(u)}return{get:a,update:l,getWireframeAttribute:h}}function sC(e,t,n,i){const r=i.isWebGL2;let s;function o(f){s=f}let a,l;function c(f){a=f.type,l=f.bytesPerElement}function h(f,d){e.drawElements(s,d,a,f*l),n.update(d,s,1)}function u(f,d,m){if(m===0)return;let y,v;if(r)y=e,v="drawElementsInstanced";else if(y=t.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[v](s,d,a,f*l,m),n.update(d,s,m)}this.setMode=o,this.setIndex=c,this.render=h,this.renderInstances=u}function oC(e){const t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(n.calls++,o){case 4:n.triangles+=a*(s/3);break;case 1:n.lines+=a*(s/2);break;case 3:n.lines+=a*(s-1);break;case 2:n.lines+=a*s;break;case 0:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:r,update:i}}function aC(e,t){return e[0]-t[0]}function lC(e,t){return Math.abs(t[1])-Math.abs(e[1])}function cC(e){const t={},n=new Float32Array(8),i=[];for(let s=0;s<8;s++)i[s]=[s,0];function r(s,o,a,l){const c=s.morphTargetInfluences,h=c===void 0?0:c.length;let u=t[o.id];if(u===void 0){u=[];for(let v=0;v<h;v++)u[v]=[v,0];t[o.id]=u}for(let v=0;v<h;v++){const g=u[v];g[0]=v,g[1]=c[v]}u.sort(lC);for(let v=0;v<8;v++)v<h&&u[v][1]?(i[v][0]=u[v][0],i[v][1]=u[v][1]):(i[v][0]=Number.MAX_SAFE_INTEGER,i[v][1]=0);i.sort(aC);const f=a.morphTargets&&o.morphAttributes.position,d=a.morphNormals&&o.morphAttributes.normal;let m=0;for(let v=0;v<8;v++){const g=i[v],p=g[0],x=g[1];p!==Number.MAX_SAFE_INTEGER&&x?(f&&o.getAttribute("morphTarget"+v)!==f[p]&&o.setAttribute("morphTarget"+v,f[p]),d&&o.getAttribute("morphNormal"+v)!==d[p]&&o.setAttribute("morphNormal"+v,d[p]),n[v]=x,m+=x):(f&&o.getAttribute("morphTarget"+v)!==void 0&&o.deleteAttribute("morphTarget"+v),d&&o.getAttribute("morphNormal"+v)!==void 0&&o.deleteAttribute("morphNormal"+v),n[v]=0)}const y=o.morphTargetsRelative?1:1-m;l.getUniforms().setValue(e,"morphTargetBaseInfluence",y),l.getUniforms().setValue(e,"morphTargetInfluences",n)}return{update:r}}function uC(e,t,n,i){let r=new WeakMap;function s(a){const l=i.render.frame,c=a.geometry,h=t.get(a,c);return r.get(h)!==l&&(c.isGeometry&&h.updateFromObject(a),t.update(h),r.set(h,l)),a.isInstancedMesh&&(n.update(a.instanceMatrix,34962),a.instanceColor!==null&&n.update(a.instanceColor,34962)),h}function o(){r=new WeakMap}return{update:s,dispose:o}}function Eo(e,t,n,i){qe.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=Mt,this.minFilter=Mt,this.wrapR=jt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Eo.prototype=Object.create(qe.prototype);Eo.prototype.constructor=Eo;Eo.prototype.isDataTexture2DArray=!0;function To(e,t,n,i){qe.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=Mt,this.minFilter=Mt,this.wrapR=jt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}To.prototype=Object.create(qe.prototype);To.prototype.constructor=To;To.prototype.isDataTexture3D=!0;const T1=new qe,hC=new Eo,fC=new To,A1=new hi,hv=[],fv=[],dv=new Float32Array(16),pv=new Float32Array(9),mv=new Float32Array(4);function jo(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let s=hv[r];if(s===void 0&&(s=new Float32Array(r),hv[r]=s),t!==0){i.toArray(s,0);for(let o=1,a=0;o!==t;++o)a+=n,e[o].toArray(s,a)}return s}function Nn(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function vn(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function C1(e,t){let n=fv[t];n===void 0&&(n=new Int32Array(t),fv[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function dC(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function pC(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Nn(n,t))return;e.uniform2fv(this.addr,t),vn(n,t)}}function mC(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(t.r!==void 0)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Nn(n,t))return;e.uniform3fv(this.addr,t),vn(n,t)}}function gC(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Nn(n,t))return;e.uniform4fv(this.addr,t),vn(n,t)}}function yC(e,t){const n=this.cache,i=t.elements;if(i===void 0){if(Nn(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),vn(n,t)}else{if(Nn(n,i))return;mv.set(i),e.uniformMatrix2fv(this.addr,!1,mv),vn(n,i)}}function vC(e,t){const n=this.cache,i=t.elements;if(i===void 0){if(Nn(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),vn(n,t)}else{if(Nn(n,i))return;pv.set(i),e.uniformMatrix3fv(this.addr,!1,pv),vn(n,i)}}function xC(e,t){const n=this.cache,i=t.elements;if(i===void 0){if(Nn(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),vn(n,t)}else{if(Nn(n,i))return;dv.set(i),e.uniformMatrix4fv(this.addr,!1,dv),vn(n,i)}}function _C(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(t||T1,r)}function wC(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||hC,r)}function MC(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||fC,r)}function bC(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(t||A1,r)}function SC(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function EC(e,t){const n=this.cache;Nn(n,t)||(e.uniform2iv(this.addr,t),vn(n,t))}function TC(e,t){const n=this.cache;Nn(n,t)||(e.uniform3iv(this.addr,t),vn(n,t))}function AC(e,t){const n=this.cache;Nn(n,t)||(e.uniform4iv(this.addr,t),vn(n,t))}function CC(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function LC(e){switch(e){case 5126:return dC;case 35664:return pC;case 35665:return mC;case 35666:return gC;case 35674:return yC;case 35675:return vC;case 35676:return xC;case 5124:case 35670:return SC;case 35667:case 35671:return EC;case 35668:case 35672:return TC;case 35669:case 35673:return AC;case 5125:return CC;case 35678:case 36198:case 36298:case 36306:case 35682:return _C;case 35679:case 36299:case 36307:return MC;case 35680:case 36300:case 36308:case 36293:return bC;case 36289:case 36303:case 36311:case 36292:return wC}}function RC(e,t){e.uniform1fv(this.addr,t)}function PC(e,t){e.uniform1iv(this.addr,t)}function NC(e,t){e.uniform2iv(this.addr,t)}function IC(e,t){e.uniform3iv(this.addr,t)}function DC(e,t){e.uniform4iv(this.addr,t)}function OC(e,t){const n=jo(t,this.size,2);e.uniform2fv(this.addr,n)}function FC(e,t){const n=jo(t,this.size,3);e.uniform3fv(this.addr,n)}function BC(e,t){const n=jo(t,this.size,4);e.uniform4fv(this.addr,n)}function kC(e,t){const n=jo(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function zC(e,t){const n=jo(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function UC(e,t){const n=jo(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function HC(e,t,n){const i=t.length,r=C1(n,i);e.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)n.safeSetTexture2D(t[s]||T1,r[s])}function GC(e,t,n){const i=t.length,r=C1(n,i);e.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)n.safeSetTextureCube(t[s]||A1,r[s])}function VC(e){switch(e){case 5126:return RC;case 35664:return OC;case 35665:return FC;case 35666:return BC;case 35674:return kC;case 35675:return zC;case 35676:return UC;case 5124:case 35670:return PC;case 35667:case 35671:return NC;case 35668:case 35672:return IC;case 35669:case 35673:return DC;case 35678:case 36198:case 36298:case 36306:case 35682:return HC;case 35680:case 36300:case 36308:case 36293:return GC}}function WC(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=LC(t.type)}function L1(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=VC(t.type)}L1.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),vn(t,e)};function R1(e){this.id=e,this.seq=[],this.map={}}R1.prototype.setValue=function(e,t,n){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const o=i[r];o.setValue(e,t[o.id],n)}};const Wf=/([\w\d_]+)(\])?(\[|\.)?/g;function gv(e,t){e.seq.push(t),e.map[t.id]=t}function jC(e,t,n){const i=e.name,r=i.length;for(Wf.lastIndex=0;;){const s=Wf.exec(i),o=Wf.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){gv(n,c===void 0?new WC(a,e,t):new L1(a,e,t));break}else{let u=n.map[a];u===void 0&&(u=new R1(a),gv(n,u)),n=u}}}function gr(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){const r=e.getActiveUniform(t,i),s=e.getUniformLocation(t,r.name);jC(r,s,this)}}gr.prototype.setValue=function(e,t,n,i){const r=this.map[t];r!==void 0&&r.setValue(e,n,i)};gr.prototype.setOptional=function(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)};gr.upload=function(e,t,n,i){for(let r=0,s=t.length;r!==s;++r){const o=t[r],a=n[o.id];a.needsUpdate!==!1&&o.setValue(e,a.value,i)}};gr.seqWithValue=function(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const s=e[i];s.id in t&&n.push(s)}return n};function yv(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}let qC=0;function XC(e){const t=e.split(`
`);for(let n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join(`
`)}function P1(e){switch(e){case Yt:return["Linear","( value )"];case Ol:return["sRGB","( value )"];case kh:return["RGBE","( value )"];case jm:return["RGBM","( value, 7.0 )"];case qm:return["RGBM","( value, 16.0 )"];case Xm:return["RGBD","( value, 256.0 )"];case Bh:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case g1:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function vv(e,t,n){const i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(i&&r==="")return"";const s=e.getShaderSource(t);return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+`
`+r+XC(s)}function la(e,t){const n=P1(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function YC(e,t){const n=P1(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function $C(e,t){let n;switch(t){case mw:n="Linear";break;case gw:n="Reinhard";break;case yw:n="OptimizedCineon";break;case vw:n="ACESFilmic";break;case xw:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function JC(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(va).join(`
`)}function ZC(e){const t=[];for(const n in e){const i=e[n];i!==!1&&t.push("#define "+n+" "+i)}return t.join(`
`)}function QC(e,t){const n={},i=e.getProgramParameter(t,35721);for(let r=0;r<i;r++){const o=e.getActiveAttrib(t,r).name;n[o]=e.getAttribLocation(t,o)}return n}function va(e){return e!==""}function xv(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function _v(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const KC=/^[ \t]*#include +<([\w\d./]+)>/gm;function vp(e){return e.replace(KC,eL)}function eL(e,t){const n=Ie[t];if(n===void 0)throw new Error("Can not resolve #include <"+t+">");return vp(n)}const tL=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,nL=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function wv(e){return e.replace(nL,N1).replace(tL,iL)}function iL(e,t,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),N1(e,t,n,i)}function N1(e,t,n,i){let r="";for(let s=parseInt(t);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Mv(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function rL(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===zm?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===X_?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Ks&&(t="SHADOWMAP_TYPE_VSM"),t}function sL(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Nl:case Il:t="ENVMAP_TYPE_CUBE";break;case Uo:case Dl:t="ENVMAP_TYPE_CUBE_UV";break}return t}function oL(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Il:case Dl:t="ENVMAP_MODE_REFRACTION";break}return t}function aL(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Pl:t="ENVMAP_BLENDING_MULTIPLY";break;case dw:t="ENVMAP_BLENDING_MIX";break;case pw:t="ENVMAP_BLENDING_ADD";break}return t}function lL(e,t,n,i){const r=e.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=rL(n),c=sL(n),h=oL(n),u=aL(n),f=e.gammaFactor>0?e.gammaFactor:1,d=n.isWebGL2?"":JC(n),m=ZC(s),y=r.createProgram();let v,g,p=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(v=[m].filter(va).join(`
`),v.length>0&&(v+=`
`),g=[d,m].filter(va).join(`
`),g.length>0&&(g+=`
`)):(v=[Mv(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(va).join(`
`),g=[d,Mv(n),"#define SHADER_NAME "+n.shaderName,m,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Kr?"#define TONE_MAPPING":"",n.toneMapping!==Kr?Ie.tonemapping_pars_fragment:"",n.toneMapping!==Kr?$C("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",Ie.encodings_pars_fragment,n.map?la("mapTexelToLinear",n.mapEncoding):"",n.matcap?la("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?la("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?la("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?la("lightMapTexelToLinear",n.lightMapEncoding):"",YC("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(va).join(`
`)),o=vp(o),o=xv(o,n),o=_v(o,n),a=vp(a),a=xv(a,n),a=_v(a,n),o=wv(o),a=wv(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(p=`#version 300 es
`,v=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,g=["#define varying in",n.glslVersion===gp?"":"out highp vec4 pc_fragColor;",n.glslVersion===gp?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const x=p+v+o,w=p+g+a,M=yv(r,35633,x),_=yv(r,35632,w);if(r.attachShader(y,M),r.attachShader(y,_),n.index0AttributeName!==void 0?r.bindAttribLocation(y,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y),e.debug.checkShaderErrors){const L=r.getProgramInfoLog(y).trim(),D=r.getShaderInfoLog(M).trim(),I=r.getShaderInfoLog(_).trim();let O=!0,B=!0;if(r.getProgramParameter(y,35714)===!1){O=!1;const P=vv(r,M,"vertex"),N=vv(r,_,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(y,35715),"gl.getProgramInfoLog",L,P,N)}else L!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",L):(D===""||I==="")&&(B=!1);B&&(this.diagnostics={runnable:O,programLog:L,vertexShader:{log:D,prefix:v},fragmentShader:{log:I,prefix:g}})}r.deleteShader(M),r.deleteShader(_);let S;this.getUniforms=function(){return S===void 0&&(S=new gr(r,y)),S};let C;return this.getAttributes=function(){return C===void 0&&(C=QC(r,y)),C},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=qC++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=M,this.fragmentShader=_,this}function cL(e,t,n,i,r,s){const o=[],a=i.isWebGL2,l=i.logarithmicDepthBuffer,c=i.floatVertexTextures,h=i.maxVertexUniforms,u=i.vertexTextures;let f=i.precision;const d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},m=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function y(_){const C=_.skeleton.bones;if(c)return 1024;{const D=Math.floor((h-20)/4),I=Math.min(D,C.length);return I<C.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+C.length+" bones. This GPU supports "+I+"."),0):I}}function v(_){let S;return _?_.isTexture?S=_.encoding:_.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),S=_.texture.encoding):S=Yt,S}function g(_,S,C,L,D){const I=L.fog,O=_.isMeshStandardMaterial?L.environment:null,B=t.get(_.envMap||O),P=d[_.type],N=D.isSkinnedMesh?y(D):0;_.precision!==null&&(f=i.getMaxPrecision(_.precision),f!==_.precision&&console.warn("THREE.WebGLProgram.getParameters:",_.precision,"not supported, using",f,"instead."));let z,Y;if(P){const q=Vn[P];z=q.vertexShader,Y=q.fragmentShader}else z=_.vertexShader,Y=_.fragmentShader;const F=e.getRenderTarget();return{isWebGL2:a,shaderID:P,shaderName:_.type,vertexShader:z,fragmentShader:Y,defines:_.defines,isRawShaderMaterial:_.isRawShaderMaterial===!0,glslVersion:_.glslVersion,precision:f,instancing:D.isInstancedMesh===!0,instancingColor:D.isInstancedMesh===!0&&D.instanceColor!==null,supportsVertexTextures:u,outputEncoding:F!==null?v(F.texture):e.outputEncoding,map:!!_.map,mapEncoding:v(_.map),matcap:!!_.matcap,matcapEncoding:v(_.matcap),envMap:!!B,envMapMode:B&&B.mapping,envMapEncoding:v(B),envMapCubeUV:!!B&&(B.mapping===Uo||B.mapping===Dl),lightMap:!!_.lightMap,lightMapEncoding:v(_.lightMap),aoMap:!!_.aoMap,emissiveMap:!!_.emissiveMap,emissiveMapEncoding:v(_.emissiveMap),bumpMap:!!_.bumpMap,normalMap:!!_.normalMap,objectSpaceNormalMap:_.normalMapType===x1,tangentSpaceNormalMap:_.normalMapType===xs,clearcoatMap:!!_.clearcoatMap,clearcoatRoughnessMap:!!_.clearcoatRoughnessMap,clearcoatNormalMap:!!_.clearcoatNormalMap,displacementMap:!!_.displacementMap,roughnessMap:!!_.roughnessMap,metalnessMap:!!_.metalnessMap,specularMap:!!_.specularMap,alphaMap:!!_.alphaMap,gradientMap:!!_.gradientMap,sheen:!!_.sheen,transmissionMap:!!_.transmissionMap,combine:_.combine,vertexTangents:_.normalMap&&_.vertexTangents,vertexColors:_.vertexColors,vertexUvs:!!_.map||!!_.bumpMap||!!_.normalMap||!!_.specularMap||!!_.alphaMap||!!_.emissiveMap||!!_.roughnessMap||!!_.metalnessMap||!!_.clearcoatMap||!!_.clearcoatRoughnessMap||!!_.clearcoatNormalMap||!!_.displacementMap||!!_.transmissionMap,uvsVertexOnly:!(_.map||_.bumpMap||_.normalMap||_.specularMap||_.alphaMap||_.emissiveMap||_.roughnessMap||_.metalnessMap||_.clearcoatNormalMap||_.transmissionMap)&&!!_.displacementMap,fog:!!I,useFog:_.fog,fogExp2:I&&I.isFogExp2,flatShading:_.flatShading,sizeAttenuation:_.sizeAttenuation,logarithmicDepthBuffer:l,skinning:_.skinning&&N>0,maxBones:N,useVertexTexture:c,morphTargets:_.morphTargets,morphNormals:_.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:S.directional.length,numPointLights:S.point.length,numSpotLights:S.spot.length,numRectAreaLights:S.rectArea.length,numHemiLights:S.hemi.length,numDirLightShadows:S.directionalShadowMap.length,numPointLightShadows:S.pointShadowMap.length,numSpotLightShadows:S.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:_.dithering,shadowMapEnabled:e.shadowMap.enabled&&C.length>0,shadowMapType:e.shadowMap.type,toneMapping:_.toneMapped?e.toneMapping:Kr,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:_.premultipliedAlpha,alphaTest:_.alphaTest,doubleSided:_.side===Rl,flipSided:_.side===_t,depthPacking:_.depthPacking!==void 0?_.depthPacking:!1,index0AttributeName:_.index0AttributeName,extensionDerivatives:_.extensions&&_.extensions.derivatives,extensionFragDepth:_.extensions&&_.extensions.fragDepth,extensionDrawBuffers:_.extensions&&_.extensions.drawBuffers,extensionShaderTextureLOD:_.extensions&&_.extensions.shaderTextureLOD,rendererExtensionFragDepth:a||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:a||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:a||n.has("EXT_shader_texture_lod"),customProgramCacheKey:_.customProgramCacheKey()}}function p(_){const S=[];if(_.shaderID?S.push(_.shaderID):(S.push(_.fragmentShader),S.push(_.vertexShader)),_.defines!==void 0)for(const C in _.defines)S.push(C),S.push(_.defines[C]);if(_.isRawShaderMaterial===!1){for(let C=0;C<m.length;C++)S.push(_[m[C]]);S.push(e.outputEncoding),S.push(e.gammaFactor)}return S.push(_.customProgramCacheKey),S.join()}function x(_){const S=d[_.type];let C;if(S){const L=Vn[S];C=S1.clone(L.uniforms)}else C=_.uniforms;return C}function w(_,S){let C;for(let L=0,D=o.length;L<D;L++){const I=o[L];if(I.cacheKey===S){C=I,++C.usedTimes;break}}return C===void 0&&(C=new lL(e,S,_,r),o.push(C)),C}function M(_){if(--_.usedTimes===0){const S=o.indexOf(_);o[S]=o[o.length-1],o.pop(),_.destroy()}}return{getParameters:g,getProgramCacheKey:p,getUniforms:x,acquireProgram:w,releaseProgram:M,programs:o}}function uL(){let e=new WeakMap;function t(s){let o=e.get(s);return o===void 0&&(o={},e.set(s,o)),o}function n(s){e.delete(s)}function i(s,o,a){e.get(s)[o]=a}function r(){e=new WeakMap}return{get:t,remove:n,update:i,dispose:r}}function hL(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function fL(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function bv(e){const t=[];let n=0;const i=[],r=[],s={id:-1};function o(){n=0,i.length=0,r.length=0}function a(f,d,m,y,v,g){let p=t[n];const x=e.get(m);return p===void 0?(p={id:f.id,object:f,geometry:d,material:m,program:x.program||s,groupOrder:y,renderOrder:f.renderOrder,z:v,group:g},t[n]=p):(p.id=f.id,p.object=f,p.geometry=d,p.material=m,p.program=x.program||s,p.groupOrder=y,p.renderOrder=f.renderOrder,p.z=v,p.group=g),n++,p}function l(f,d,m,y,v,g){const p=a(f,d,m,y,v,g);(m.transparent===!0?r:i).push(p)}function c(f,d,m,y,v,g){const p=a(f,d,m,y,v,g);(m.transparent===!0?r:i).unshift(p)}function h(f,d){i.length>1&&i.sort(f||hL),r.length>1&&r.sort(d||fL)}function u(){for(let f=n,d=t.length;f<d;f++){const m=t[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.program=null,m.group=null}}return{opaque:i,transparent:r,init:o,push:l,unshift:c,finish:u,sort:h}}function dL(e){let t=new WeakMap;function n(r,s){const o=t.get(r);let a;return o===void 0?(a=new bv(e),t.set(r,new WeakMap),t.get(r).set(s,a)):(a=o.get(s),a===void 0&&(a=new bv(e),o.set(s,a))),a}function i(){t=new WeakMap}return{get:n,dispose:i}}function pL(){const e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new b,color:new le};break;case"SpotLight":n={position:new b,direction:new b,color:new le,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new b,color:new le,distance:0,decay:0};break;case"HemisphereLight":n={direction:new b,skyColor:new le,groundColor:new le};break;case"RectAreaLight":n={color:new le,position:new b,halfWidth:new b,halfHeight:new b};break}return e[t.id]=n,n}}}function mL(){const e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let n;switch(t.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new j};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new j};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new j,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=n,n}}}let gL=0;function yL(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function vL(){const e=new pL,t=mL(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let a=0;a<9;a++)n.probe.push(new b);const i=new b,r=new Le,s=new Le;function o(a,l,c){let h=0,u=0,f=0;for(let S=0;S<9;S++)n.probe[S].set(0,0,0);let d=0,m=0,y=0,v=0,g=0,p=0,x=0,w=0;const M=c.matrixWorldInverse;a.sort(yL);for(let S=0,C=a.length;S<C;S++){const L=a[S],D=L.color,I=L.intensity,O=L.distance,B=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)h+=D.r*I,u+=D.g*I,f+=D.b*I;else if(L.isLightProbe)for(let P=0;P<9;P++)n.probe[P].addScaledVector(L.sh.coefficients[P],I);else if(L.isDirectionalLight){const P=e.get(L);if(P.color.copy(L.color).multiplyScalar(L.intensity),P.direction.setFromMatrixPosition(L.matrixWorld),i.setFromMatrixPosition(L.target.matrixWorld),P.direction.sub(i),P.direction.transformDirection(M),L.castShadow){const N=L.shadow,z=t.get(L);z.shadowBias=N.bias,z.shadowNormalBias=N.normalBias,z.shadowRadius=N.radius,z.shadowMapSize=N.mapSize,n.directionalShadow[d]=z,n.directionalShadowMap[d]=B,n.directionalShadowMatrix[d]=L.shadow.matrix,p++}n.directional[d]=P,d++}else if(L.isSpotLight){const P=e.get(L);if(P.position.setFromMatrixPosition(L.matrixWorld),P.position.applyMatrix4(M),P.color.copy(D).multiplyScalar(I),P.distance=O,P.direction.setFromMatrixPosition(L.matrixWorld),i.setFromMatrixPosition(L.target.matrixWorld),P.direction.sub(i),P.direction.transformDirection(M),P.coneCos=Math.cos(L.angle),P.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),P.decay=L.decay,L.castShadow){const N=L.shadow,z=t.get(L);z.shadowBias=N.bias,z.shadowNormalBias=N.normalBias,z.shadowRadius=N.radius,z.shadowMapSize=N.mapSize,n.spotShadow[y]=z,n.spotShadowMap[y]=B,n.spotShadowMatrix[y]=L.shadow.matrix,w++}n.spot[y]=P,y++}else if(L.isRectAreaLight){const P=e.get(L);P.color.copy(D).multiplyScalar(I),P.position.setFromMatrixPosition(L.matrixWorld),P.position.applyMatrix4(M),s.identity(),r.copy(L.matrixWorld),r.premultiply(M),s.extractRotation(r),P.halfWidth.set(L.width*.5,0,0),P.halfHeight.set(0,L.height*.5,0),P.halfWidth.applyMatrix4(s),P.halfHeight.applyMatrix4(s),n.rectArea[v]=P,v++}else if(L.isPointLight){const P=e.get(L);if(P.position.setFromMatrixPosition(L.matrixWorld),P.position.applyMatrix4(M),P.color.copy(L.color).multiplyScalar(L.intensity),P.distance=L.distance,P.decay=L.decay,L.castShadow){const N=L.shadow,z=t.get(L);z.shadowBias=N.bias,z.shadowNormalBias=N.normalBias,z.shadowRadius=N.radius,z.shadowMapSize=N.mapSize,z.shadowCameraNear=N.camera.near,z.shadowCameraFar=N.camera.far,n.pointShadow[m]=z,n.pointShadowMap[m]=B,n.pointShadowMatrix[m]=L.shadow.matrix,x++}n.point[m]=P,m++}else if(L.isHemisphereLight){const P=e.get(L);P.direction.setFromMatrixPosition(L.matrixWorld),P.direction.transformDirection(M),P.direction.normalize(),P.skyColor.copy(L.color).multiplyScalar(I),P.groundColor.copy(L.groundColor).multiplyScalar(I),n.hemi[g]=P,g++}}v>0&&(n.rectAreaLTC1=se.LTC_1,n.rectAreaLTC2=se.LTC_2),n.ambient[0]=h,n.ambient[1]=u,n.ambient[2]=f;const _=n.hash;(_.directionalLength!==d||_.pointLength!==m||_.spotLength!==y||_.rectAreaLength!==v||_.hemiLength!==g||_.numDirectionalShadows!==p||_.numPointShadows!==x||_.numSpotShadows!==w)&&(n.directional.length=d,n.spot.length=y,n.rectArea.length=v,n.point.length=m,n.hemi.length=g,n.directionalShadow.length=p,n.directionalShadowMap.length=p,n.pointShadow.length=x,n.pointShadowMap.length=x,n.spotShadow.length=w,n.spotShadowMap.length=w,n.directionalShadowMatrix.length=p,n.pointShadowMatrix.length=x,n.spotShadowMatrix.length=w,_.directionalLength=d,_.pointLength=m,_.spotLength=y,_.rectAreaLength=v,_.hemiLength=g,_.numDirectionalShadows=p,_.numPointShadows=x,_.numSpotShadows=w,n.version=gL++)}return{setup:o,state:n}}function Sv(){const e=new vL,t=[],n=[];function i(){t.length=0,n.length=0}function r(l){t.push(l)}function s(l){n.push(l)}function o(l){e.setup(t,n,l)}return{init:i,state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:o,pushLight:r,pushShadow:s}}function xL(){let e=new WeakMap;function t(i,r){let s;return e.has(i)===!1?(s=new Sv,e.set(i,new WeakMap),e.get(i).set(r,s)):e.get(i).has(r)===!1?(s=new Sv,e.get(i).set(r,s)):s=e.get(i).get(r),s}function n(){e=new WeakMap}return{get:t,dispose:n}}function br(e){Me.call(this),this.type="MeshDepthMaterial",this.depthPacking=y1,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}br.prototype=Object.create(Me.prototype);br.prototype.constructor=br;br.prototype.isMeshDepthMaterial=!0;br.prototype.copy=function(e){return Me.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this};function Sr(e){Me.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new b,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}Sr.prototype=Object.create(Me.prototype);Sr.prototype.constructor=Sr;Sr.prototype.isMeshDistanceMaterial=!0;Sr.prototype.copy=function(e){return Me.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};var _L=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,wL=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function I1(e,t,n){let i=new kl;const r=new j,s=new j,o=new We,a=[],l=[],c={},h={0:_t,1:zo,2:Rl},u=new $t({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new j},radius:{value:4}},vertexShader:wL,fragmentShader:_L}),f=u.clone();f.defines.HORIZONAL_PASS=1;const d=new ye;d.setAttribute("position",new we(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new tt(d,u),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=zm,this.render=function(M,_,S){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||M.length===0)return;const C=e.getRenderTarget(),L=e.getActiveCubeFace(),D=e.getActiveMipmapLevel(),I=e.state;I.setBlending(Ii),I.buffers.color.setClear(1,1,1,1),I.buffers.depth.setTest(!0),I.setScissorTest(!1);for(let O=0,B=M.length;O<B;O++){const P=M[O],N=P.shadow;if(N===void 0){console.warn("THREE.WebGLShadowMap:",P,"has no shadow.");continue}if(N.autoUpdate===!1&&N.needsUpdate===!1)continue;r.copy(N.mapSize);const z=N.getFrameExtents();if(r.multiply(z),s.copy(N.mapSize),(r.x>n||r.y>n)&&(r.x>n&&(s.x=Math.floor(n/z.x),r.x=s.x*z.x,N.mapSize.x=s.x),r.y>n&&(s.y=Math.floor(n/z.y),r.y=s.y*z.y,N.mapSize.y=s.y)),N.map===null&&!N.isPointLightShadow&&this.type===Ks){const F={minFilter:At,magFilter:At,format:pn};N.map=new mn(r.x,r.y,F),N.map.texture.name=P.name+".shadowMap",N.mapPass=new mn(r.x,r.y,F),N.camera.updateProjectionMatrix()}if(N.map===null){const F={minFilter:Mt,magFilter:Mt,format:pn};N.map=new mn(r.x,r.y,F),N.map.texture.name=P.name+".shadowMap",N.camera.updateProjectionMatrix()}e.setRenderTarget(N.map),e.clear();const Y=N.getViewportCount();for(let F=0;F<Y;F++){const G=N.getViewport(F);o.set(s.x*G.x,s.y*G.y,s.x*G.z,s.y*G.w),I.viewport(o),N.updateMatrices(P,F),i=N.getFrustum(),w(_,S,N.camera,P,this.type)}!N.isPointLightShadow&&this.type===Ks&&v(N,S),N.needsUpdate=!1}y.needsUpdate=!1,e.setRenderTarget(C,L,D)};function v(M,_){const S=t.update(m);u.uniforms.shadow_pass.value=M.map.texture,u.uniforms.resolution.value=M.mapSize,u.uniforms.radius.value=M.radius,e.setRenderTarget(M.mapPass),e.clear(),e.renderBufferDirect(_,null,S,u,m,null),f.uniforms.shadow_pass.value=M.mapPass.texture,f.uniforms.resolution.value=M.mapSize,f.uniforms.radius.value=M.radius,e.setRenderTarget(M.map),e.clear(),e.renderBufferDirect(_,null,S,f,m,null)}function g(M,_,S){const C=M<<0|_<<1|S<<2;let L=a[C];return L===void 0&&(L=new br({depthPacking:v1,morphTargets:M,skinning:_}),a[C]=L),L}function p(M,_,S){const C=M<<0|_<<1|S<<2;let L=l[C];return L===void 0&&(L=new Sr({morphTargets:M,skinning:_}),l[C]=L),L}function x(M,_,S,C,L,D,I){let O=null,B=g,P=M.customDepthMaterial;if(C.isPointLight===!0&&(B=p,P=M.customDistanceMaterial),P===void 0){let N=!1;S.morphTargets===!0&&(N=_.morphAttributes&&_.morphAttributes.position&&_.morphAttributes.position.length>0);let z=!1;M.isSkinnedMesh===!0&&(S.skinning===!0?z=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",M));const Y=M.isInstancedMesh===!0;O=B(N,z,Y)}else O=P;if(e.localClippingEnabled&&S.clipShadows===!0&&S.clippingPlanes.length!==0){const N=O.uuid,z=S.uuid;let Y=c[N];Y===void 0&&(Y={},c[N]=Y);let F=Y[z];F===void 0&&(F=O.clone(),Y[z]=F),O=F}return O.visible=S.visible,O.wireframe=S.wireframe,I===Ks?O.side=S.shadowSide!==null?S.shadowSide:S.side:O.side=S.shadowSide!==null?S.shadowSide:h[S.side],O.clipShadows=S.clipShadows,O.clippingPlanes=S.clippingPlanes,O.clipIntersection=S.clipIntersection,O.wireframeLinewidth=S.wireframeLinewidth,O.linewidth=S.linewidth,C.isPointLight===!0&&O.isMeshDistanceMaterial===!0&&(O.referencePosition.setFromMatrixPosition(C.matrixWorld),O.nearDistance=L,O.farDistance=D),O}function w(M,_,S,C,L){if(M.visible===!1)return;if(M.layers.test(_.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&L===Ks)&&(!M.frustumCulled||i.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,M.matrixWorld);const O=t.update(M),B=M.material;if(Array.isArray(B)){const P=O.groups;for(let N=0,z=P.length;N<z;N++){const Y=P[N],F=B[Y.materialIndex];if(F&&F.visible){const G=x(M,O,F,C,S.near,S.far,L);e.renderBufferDirect(S,null,O,G,M,Y)}}}else if(B.visible){const P=x(M,O,B,C,S.near,S.far,L);e.renderBufferDirect(S,null,O,P,M,null)}}const I=M.children;for(let O=0,B=I.length;O<B;O++)w(I[O],_,S,C,L)}}function ML(e,t,n){const i=n.isWebGL2;function r(){let R=!1;const K=new We;let oe=null;const me=new We(0,0,0,0);return{setMask:function(te){oe!==te&&!R&&(e.colorMask(te,te,te,te),oe=te)},setLocked:function(te){R=te},setClear:function(te,pe,_e,Te,fe){fe===!0&&(te*=Te,pe*=Te,_e*=Te),K.set(te,pe,_e,Te),me.equals(K)===!1&&(e.clearColor(te,pe,_e,Te),me.copy(K))},reset:function(){R=!1,oe=null,me.set(-1,0,0,0)}}}function s(){let R=!1,K=null,oe=null,me=null;return{setTest:function(te){te?q(2929):Z(2929)},setMask:function(te){K!==te&&!R&&(e.depthMask(te),K=te)},setFunc:function(te){if(oe!==te){if(te)switch(te){case ow:e.depthFunc(512);break;case aw:e.depthFunc(519);break;case lw:e.depthFunc(513);break;case zu:e.depthFunc(515);break;case cw:e.depthFunc(514);break;case uw:e.depthFunc(518);break;case hw:e.depthFunc(516);break;case fw:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);oe=te}},setLocked:function(te){R=te},setClear:function(te){me!==te&&(e.clearDepth(te),me=te)},reset:function(){R=!1,K=null,oe=null,me=null}}}function o(){let R=!1,K=null,oe=null,me=null,te=null,pe=null,_e=null,Te=null,fe=null;return{setTest:function(be){R||(be?q(2960):Z(2960))},setMask:function(be){K!==be&&!R&&(e.stencilMask(be),K=be)},setFunc:function(be,st,Kt){(oe!==be||me!==st||te!==Kt)&&(e.stencilFunc(be,st,Kt),oe=be,me=st,te=Kt)},setOp:function(be,st,Kt){(pe!==be||_e!==st||Te!==Kt)&&(e.stencilOp(be,st,Kt),pe=be,_e=st,Te=Kt)},setLocked:function(be){R=be},setClear:function(be){fe!==be&&(e.clearStencil(be),fe=be)},reset:function(){R=!1,K=null,oe=null,me=null,te=null,pe=null,_e=null,Te=null,fe=null}}}const a=new r,l=new s,c=new o;let h={},u=null,f=null,d=null,m=null,y=null,v=null,g=null,p=null,x=null,w=!1,M=null,_=null,S=null,C=null,L=null;const D=e.getParameter(35661);let I=!1,O=0;const B=e.getParameter(7938);B.indexOf("WebGL")!==-1?(O=parseFloat(/^WebGL\ ([0-9])/.exec(B)[1]),I=O>=1):B.indexOf("OpenGL ES")!==-1&&(O=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(B)[1]),I=O>=2);let P=null,N={};const z=new We,Y=new We;function F(R,K,oe){const me=new Uint8Array(4),te=e.createTexture();e.bindTexture(R,te),e.texParameteri(R,10241,9728),e.texParameteri(R,10240,9728);for(let pe=0;pe<oe;pe++)e.texImage2D(K+pe,0,6408,1,1,0,6408,5121,me);return te}const G={};G[3553]=F(3553,3553,1),G[34067]=F(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),q(2929),l.setFunc(zu),ve(!1),ke(ep),q(2884),W(Ii);function q(R){h[R]!==!0&&(e.enable(R),h[R]=!0)}function Z(R){h[R]!==!1&&(e.disable(R),h[R]=!1)}function he(R){return u!==R?(e.useProgram(R),u=R,!0):!1}const Ee={[jr]:32774,[$_]:32778,[J_]:32779};if(i)Ee[rp]=32775,Ee[sp]=32776;else{const R=t.get("EXT_blend_minmax");R!==null&&(Ee[rp]=R.MIN_EXT,Ee[sp]=R.MAX_EXT)}const Ue={[Z_]:0,[Q_]:1,[K_]:768,[Hm]:770,[sw]:776,[iw]:774,[tw]:772,[ew]:769,[Gm]:771,[rw]:775,[nw]:773};function W(R,K,oe,me,te,pe,_e,Te){if(R===Ii){f&&(Z(3042),f=!1);return}if(f||(q(3042),f=!0),R!==Y_){if(R!==d||Te!==w){if((m!==jr||g!==jr)&&(e.blendEquation(32774),m=jr,g=jr),Te)switch(R){case uo:e.blendFuncSeparate(1,771,1,771);break;case tp:e.blendFunc(1,1);break;case np:e.blendFuncSeparate(0,0,769,771);break;case ip:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",R);break}else switch(R){case uo:e.blendFuncSeparate(770,771,1,771);break;case tp:e.blendFunc(770,1);break;case np:e.blendFunc(0,769);break;case ip:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",R);break}y=null,v=null,p=null,x=null,d=R,w=Te}return}te=te||K,pe=pe||oe,_e=_e||me,(K!==m||te!==g)&&(e.blendEquationSeparate(Ee[K],Ee[te]),m=K,g=te),(oe!==y||me!==v||pe!==p||_e!==x)&&(e.blendFuncSeparate(Ue[oe],Ue[me],Ue[pe],Ue[_e]),y=oe,v=me,p=pe,x=_e),d=R,w=null}function nt(R,K){R.side===Rl?Z(2884):q(2884);let oe=R.side===_t;K&&(oe=!oe),ve(oe),R.blending===uo&&R.transparent===!1?W(Ii):W(R.blending,R.blendEquation,R.blendSrc,R.blendDst,R.blendEquationAlpha,R.blendSrcAlpha,R.blendDstAlpha,R.premultipliedAlpha),l.setFunc(R.depthFunc),l.setTest(R.depthTest),l.setMask(R.depthWrite),a.setMask(R.colorWrite);const me=R.stencilWrite;c.setTest(me),me&&(c.setMask(R.stencilWriteMask),c.setFunc(R.stencilFunc,R.stencilRef,R.stencilFuncMask),c.setOp(R.stencilFail,R.stencilZFail,R.stencilZPass)),He(R.polygonOffset,R.polygonOffsetFactor,R.polygonOffsetUnits)}function ve(R){M!==R&&(R?e.frontFace(2304):e.frontFace(2305),M=R)}function ke(R){R!==j_?(q(2884),R!==_&&(R===ep?e.cullFace(1029):R===q_?e.cullFace(1028):e.cullFace(1032))):Z(2884),_=R}function Ce(R){R!==S&&(I&&e.lineWidth(R),S=R)}function He(R,K,oe){R?(q(32823),(C!==K||L!==oe)&&(e.polygonOffset(K,oe),C=K,L=oe)):Z(32823)}function Ne(R){R?q(3089):Z(3089)}function J(R){R===void 0&&(R=33984+D-1),P!==R&&(e.activeTexture(R),P=R)}function ee(R,K){P===null&&J();let oe=N[P];oe===void 0&&(oe={type:void 0,texture:void 0},N[P]=oe),(oe.type!==R||oe.texture!==K)&&(e.bindTexture(R,K||G[R]),oe.type=R,oe.texture=K)}function ne(){const R=N[P];R!==void 0&&R.type!==void 0&&(e.bindTexture(R.type,null),R.type=void 0,R.texture=void 0)}function xe(){try{e.compressedTexImage2D.apply(e,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function ae(){try{e.texImage2D.apply(e,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function A(){try{e.texImage3D.apply(e,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function E(R){z.equals(R)===!1&&(e.scissor(R.x,R.y,R.z,R.w),z.copy(R))}function Q(R){Y.equals(R)===!1&&(e.viewport(R.x,R.y,R.z,R.w),Y.copy(R))}function X(){h={},P=null,N={},u=null,d=null,M=null,_=null,a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:q,disable:Z,useProgram:he,setBlending:W,setMaterial:nt,setFlipSided:ve,setCullFace:ke,setLineWidth:Ce,setPolygonOffset:He,setScissorTest:Ne,activeTexture:J,bindTexture:ee,unbindTexture:ne,compressedTexImage2D:xe,texImage2D:ae,texImage3D:A,scissor:E,viewport:Q,reset:X}}function bL(e,t,n,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,h=r.maxTextureSize,u=r.maxSamples,f=new WeakMap;let d,m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(A,E){return m?new OffscreenCanvas(A,E):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function v(A,E,Q,X){let R=1;if((A.width>X||A.height>X)&&(R=X/Math.max(A.width,A.height)),R<1||E===!0)if(typeof HTMLImageElement<"u"&&A instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&A instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&A instanceof ImageBitmap){const K=E?Se.floorPowerOfTwo:Math.floor,oe=K(R*A.width),me=K(R*A.height);d===void 0&&(d=y(oe,me));const te=Q?y(oe,me):d;return te.width=oe,te.height=me,te.getContext("2d").drawImage(A,0,0,oe,me),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+A.width+"x"+A.height+") to ("+oe+"x"+me+")."),te}else return"data"in A&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+A.width+"x"+A.height+")."),A;return A}function g(A){return Se.isPowerOfTwo(A.width)&&Se.isPowerOfTwo(A.height)}function p(A){return a?!1:A.wrapS!==jt||A.wrapT!==jt||A.minFilter!==Mt&&A.minFilter!==At}function x(A,E){return A.generateMipmaps&&E&&A.minFilter!==Mt&&A.minFilter!==At}function w(A,E,Q,X){e.generateMipmap(A);const R=i.get(E);R.__maxMipLevel=Math.log(Math.max(Q,X))*Math.LOG2E}function M(A,E,Q){if(a===!1)return E;if(A!==null){if(e[A]!==void 0)return e[A];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+A+"'")}let X=E;return E===6403&&(Q===5126&&(X=33326),Q===5131&&(X=33325),Q===5121&&(X=33321)),E===6407&&(Q===5126&&(X=34837),Q===5131&&(X=34843),Q===5121&&(X=32849)),E===6408&&(Q===5126&&(X=34836),Q===5131&&(X=34842),Q===5121&&(X=32856)),(X===33325||X===33326||X===34842||X===34836)&&t.get("EXT_color_buffer_float"),X}function _(A){return A===Mt||A===Gu||A===Vu?9728:9729}function S(A){const E=A.target;E.removeEventListener("dispose",S),L(E),E.isVideoTexture&&f.delete(E),o.memory.textures--}function C(A){const E=A.target;E.removeEventListener("dispose",C),D(E),o.memory.textures--}function L(A){const E=i.get(A);E.__webglInit!==void 0&&(e.deleteTexture(E.__webglTexture),i.remove(A))}function D(A){const E=i.get(A),Q=i.get(A.texture);if(A){if(Q.__webglTexture!==void 0&&e.deleteTexture(Q.__webglTexture),A.depthTexture&&A.depthTexture.dispose(),A.isWebGLCubeRenderTarget)for(let X=0;X<6;X++)e.deleteFramebuffer(E.__webglFramebuffer[X]),E.__webglDepthbuffer&&e.deleteRenderbuffer(E.__webglDepthbuffer[X]);else e.deleteFramebuffer(E.__webglFramebuffer),E.__webglDepthbuffer&&e.deleteRenderbuffer(E.__webglDepthbuffer),E.__webglMultisampledFramebuffer&&e.deleteFramebuffer(E.__webglMultisampledFramebuffer),E.__webglColorRenderbuffer&&e.deleteRenderbuffer(E.__webglColorRenderbuffer),E.__webglDepthRenderbuffer&&e.deleteRenderbuffer(E.__webglDepthRenderbuffer);i.remove(A.texture),i.remove(A)}}let I=0;function O(){I=0}function B(){const A=I;return A>=l&&console.warn("THREE.WebGLTextures: Trying to use "+A+" texture units while this GPU supports only "+l),I+=1,A}function P(A,E){const Q=i.get(A);if(A.isVideoTexture&&J(A),A.version>0&&Q.__version!==A.version){const X=A.image;if(X===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(X.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{he(Q,A,E);return}}n.activeTexture(33984+E),n.bindTexture(3553,Q.__webglTexture)}function N(A,E){const Q=i.get(A);if(A.version>0&&Q.__version!==A.version){he(Q,A,E);return}n.activeTexture(33984+E),n.bindTexture(35866,Q.__webglTexture)}function z(A,E){const Q=i.get(A);if(A.version>0&&Q.__version!==A.version){he(Q,A,E);return}n.activeTexture(33984+E),n.bindTexture(32879,Q.__webglTexture)}function Y(A,E){const Q=i.get(A);if(A.version>0&&Q.__version!==A.version){Ee(Q,A,E);return}n.activeTexture(33984+E),n.bindTexture(34067,Q.__webglTexture)}const F={[Qa]:10497,[jt]:33071,[Ka]:33648},G={[Mt]:9728,[Gu]:9984,[Vu]:9986,[At]:9729,[Vm]:9985,[Ho]:9987};function q(A,E,Q){Q?(e.texParameteri(A,10242,F[E.wrapS]),e.texParameteri(A,10243,F[E.wrapT]),(A===32879||A===35866)&&e.texParameteri(A,32882,F[E.wrapR]),e.texParameteri(A,10240,G[E.magFilter]),e.texParameteri(A,10241,G[E.minFilter])):(e.texParameteri(A,10242,33071),e.texParameteri(A,10243,33071),(A===32879||A===35866)&&e.texParameteri(A,32882,33071),(E.wrapS!==jt||E.wrapT!==jt)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(A,10240,_(E.magFilter)),e.texParameteri(A,10241,_(E.minFilter)),E.minFilter!==Mt&&E.minFilter!==At&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const X=t.get("EXT_texture_filter_anisotropic");if(X){if(E.type===Ai&&t.get("OES_texture_float_linear")===null||E.type===tl&&(a||t.get("OES_texture_half_float_linear"))===null)return;(E.anisotropy>1||i.get(E).__currentAnisotropy)&&(e.texParameterf(A,X.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(E.anisotropy,r.getMaxAnisotropy())),i.get(E).__currentAnisotropy=E.anisotropy)}}function Z(A,E){A.__webglInit===void 0&&(A.__webglInit=!0,E.addEventListener("dispose",S),A.__webglTexture=e.createTexture(),o.memory.textures++)}function he(A,E,Q){let X=3553;E.isDataTexture2DArray&&(X=35866),E.isDataTexture3D&&(X=32879),Z(A,E),n.activeTexture(33984+Q),n.bindTexture(X,A.__webglTexture),e.pixelStorei(37440,E.flipY),e.pixelStorei(37441,E.premultiplyAlpha),e.pixelStorei(3317,E.unpackAlignment);const R=p(E)&&g(E.image)===!1,K=v(E.image,R,!1,h),oe=g(K)||a,me=s.convert(E.format);let te=s.convert(E.type),pe=M(E.internalFormat,me,te);q(X,E,oe);let _e;const Te=E.mipmaps;if(E.isDepthTexture)pe=6402,a?E.type===Ai?pe=36012:E.type===Ca?pe=33190:E.type===ho?pe=35056:pe=33189:E.type===Ai&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),E.format===es&&pe===6402&&E.type!==el&&E.type!==Ca&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),E.type=el,te=s.convert(E.type)),E.format===Mo&&pe===6402&&(pe=34041,E.type!==ho&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),E.type=ho,te=s.convert(E.type))),n.texImage2D(3553,0,pe,K.width,K.height,0,me,te,null);else if(E.isDataTexture)if(Te.length>0&&oe){for(let fe=0,be=Te.length;fe<be;fe++)_e=Te[fe],n.texImage2D(3553,fe,pe,_e.width,_e.height,0,me,te,_e.data);E.generateMipmaps=!1,A.__maxMipLevel=Te.length-1}else n.texImage2D(3553,0,pe,K.width,K.height,0,me,te,K.data),A.__maxMipLevel=0;else if(E.isCompressedTexture){for(let fe=0,be=Te.length;fe<be;fe++)_e=Te[fe],E.format!==pn&&E.format!==mr?me!==null?n.compressedTexImage2D(3553,fe,pe,_e.width,_e.height,0,_e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,fe,pe,_e.width,_e.height,0,me,te,_e.data);A.__maxMipLevel=Te.length-1}else if(E.isDataTexture2DArray)n.texImage3D(35866,0,pe,K.width,K.height,K.depth,0,me,te,K.data),A.__maxMipLevel=0;else if(E.isDataTexture3D)n.texImage3D(32879,0,pe,K.width,K.height,K.depth,0,me,te,K.data),A.__maxMipLevel=0;else if(Te.length>0&&oe){for(let fe=0,be=Te.length;fe<be;fe++)_e=Te[fe],n.texImage2D(3553,fe,pe,me,te,_e);E.generateMipmaps=!1,A.__maxMipLevel=Te.length-1}else n.texImage2D(3553,0,pe,me,te,K),A.__maxMipLevel=0;x(E,oe)&&w(X,E,K.width,K.height),A.__version=E.version,E.onUpdate&&E.onUpdate(E)}function Ee(A,E,Q){if(E.image.length!==6)return;Z(A,E),n.activeTexture(33984+Q),n.bindTexture(34067,A.__webglTexture),e.pixelStorei(37440,E.flipY);const X=E&&(E.isCompressedTexture||E.image[0].isCompressedTexture),R=E.image[0]&&E.image[0].isDataTexture,K=[];for(let fe=0;fe<6;fe++)!X&&!R?K[fe]=v(E.image[fe],!1,!0,c):K[fe]=R?E.image[fe].image:E.image[fe];const oe=K[0],me=g(oe)||a,te=s.convert(E.format),pe=s.convert(E.type),_e=M(E.internalFormat,te,pe);q(34067,E,me);let Te;if(X){for(let fe=0;fe<6;fe++){Te=K[fe].mipmaps;for(let be=0;be<Te.length;be++){const st=Te[be];E.format!==pn&&E.format!==mr?te!==null?n.compressedTexImage2D(34069+fe,be,_e,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+fe,be,_e,st.width,st.height,0,te,pe,st.data)}}A.__maxMipLevel=Te.length-1}else{Te=E.mipmaps;for(let fe=0;fe<6;fe++)if(R){n.texImage2D(34069+fe,0,_e,K[fe].width,K[fe].height,0,te,pe,K[fe].data);for(let be=0;be<Te.length;be++){const Kt=Te[be].image[fe].image;n.texImage2D(34069+fe,be+1,_e,Kt.width,Kt.height,0,te,pe,Kt.data)}}else{n.texImage2D(34069+fe,0,_e,te,pe,K[fe]);for(let be=0;be<Te.length;be++){const st=Te[be];n.texImage2D(34069+fe,be+1,_e,te,pe,st.image[fe])}}A.__maxMipLevel=Te.length}x(E,me)&&w(34067,E,oe.width,oe.height),A.__version=E.version,E.onUpdate&&E.onUpdate(E)}function Ue(A,E,Q,X){const R=s.convert(E.texture.format),K=s.convert(E.texture.type),oe=M(E.texture.internalFormat,R,K);n.texImage2D(X,0,oe,E.width,E.height,0,R,K,null),e.bindFramebuffer(36160,A),e.framebufferTexture2D(36160,Q,X,i.get(E.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function W(A,E,Q){if(e.bindRenderbuffer(36161,A),E.depthBuffer&&!E.stencilBuffer){let X=33189;if(Q){const R=E.depthTexture;R&&R.isDepthTexture&&(R.type===Ai?X=36012:R.type===Ca&&(X=33190));const K=Ne(E);e.renderbufferStorageMultisample(36161,K,X,E.width,E.height)}else e.renderbufferStorage(36161,X,E.width,E.height);e.framebufferRenderbuffer(36160,36096,36161,A)}else if(E.depthBuffer&&E.stencilBuffer){if(Q){const X=Ne(E);e.renderbufferStorageMultisample(36161,X,35056,E.width,E.height)}else e.renderbufferStorage(36161,34041,E.width,E.height);e.framebufferRenderbuffer(36160,33306,36161,A)}else{const X=s.convert(E.texture.format),R=s.convert(E.texture.type),K=M(E.texture.internalFormat,X,R);if(Q){const oe=Ne(E);e.renderbufferStorageMultisample(36161,oe,K,E.width,E.height)}else e.renderbufferStorage(36161,K,E.width,E.height)}e.bindRenderbuffer(36161,null)}function nt(A,E){if(E&&E.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,A),!(E.depthTexture&&E.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(E.depthTexture).__webglTexture||E.depthTexture.image.width!==E.width||E.depthTexture.image.height!==E.height)&&(E.depthTexture.image.width=E.width,E.depthTexture.image.height=E.height,E.depthTexture.needsUpdate=!0),P(E.depthTexture,0);const X=i.get(E.depthTexture).__webglTexture;if(E.depthTexture.format===es)e.framebufferTexture2D(36160,36096,3553,X,0);else if(E.depthTexture.format===Mo)e.framebufferTexture2D(36160,33306,3553,X,0);else throw new Error("Unknown depthTexture format")}function ve(A){const E=i.get(A),Q=A.isWebGLCubeRenderTarget===!0;if(A.depthTexture){if(Q)throw new Error("target.depthTexture not supported in Cube render targets");nt(E.__webglFramebuffer,A)}else if(Q){E.__webglDepthbuffer=[];for(let X=0;X<6;X++)e.bindFramebuffer(36160,E.__webglFramebuffer[X]),E.__webglDepthbuffer[X]=e.createRenderbuffer(),W(E.__webglDepthbuffer[X],A,!1)}else e.bindFramebuffer(36160,E.__webglFramebuffer),E.__webglDepthbuffer=e.createRenderbuffer(),W(E.__webglDepthbuffer,A,!1);e.bindFramebuffer(36160,null)}function ke(A){const E=i.get(A),Q=i.get(A.texture);A.addEventListener("dispose",C),Q.__webglTexture=e.createTexture(),o.memory.textures++;const X=A.isWebGLCubeRenderTarget===!0,R=A.isWebGLMultisampleRenderTarget===!0,K=g(A)||a;if(a&&A.texture.format===mr&&(A.texture.type===Ai||A.texture.type===tl)&&(A.texture.format=pn,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),X){E.__webglFramebuffer=[];for(let oe=0;oe<6;oe++)E.__webglFramebuffer[oe]=e.createFramebuffer()}else if(E.__webglFramebuffer=e.createFramebuffer(),R)if(a){E.__webglMultisampledFramebuffer=e.createFramebuffer(),E.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,E.__webglColorRenderbuffer);const oe=s.convert(A.texture.format),me=s.convert(A.texture.type),te=M(A.texture.internalFormat,oe,me),pe=Ne(A);e.renderbufferStorageMultisample(36161,pe,te,A.width,A.height),e.bindFramebuffer(36160,E.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,E.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),A.depthBuffer&&(E.__webglDepthRenderbuffer=e.createRenderbuffer(),W(E.__webglDepthRenderbuffer,A,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(X){n.bindTexture(34067,Q.__webglTexture),q(34067,A.texture,K);for(let oe=0;oe<6;oe++)Ue(E.__webglFramebuffer[oe],A,36064,34069+oe);x(A.texture,K)&&w(34067,A.texture,A.width,A.height),n.bindTexture(34067,null)}else n.bindTexture(3553,Q.__webglTexture),q(3553,A.texture,K),Ue(E.__webglFramebuffer,A,36064,3553),x(A.texture,K)&&w(3553,A.texture,A.width,A.height),n.bindTexture(3553,null);A.depthBuffer&&ve(A)}function Ce(A){const E=A.texture,Q=g(A)||a;if(x(E,Q)){const X=A.isWebGLCubeRenderTarget?34067:3553,R=i.get(E).__webglTexture;n.bindTexture(X,R),w(X,E,A.width,A.height),n.bindTexture(X,null)}}function He(A){if(A.isWebGLMultisampleRenderTarget)if(a){const E=i.get(A);e.bindFramebuffer(36008,E.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,E.__webglFramebuffer);const Q=A.width,X=A.height;let R=16384;A.depthBuffer&&(R|=256),A.stencilBuffer&&(R|=1024),e.blitFramebuffer(0,0,Q,X,0,0,Q,X,R,9728),e.bindFramebuffer(36160,E.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function Ne(A){return a&&A.isWebGLMultisampleRenderTarget?Math.min(u,A.samples):0}function J(A){const E=o.render.frame;f.get(A)!==E&&(f.set(A,E),A.update())}let ee=!1,ne=!1;function xe(A,E){A&&A.isWebGLRenderTarget&&(ee===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ee=!0),A=A.texture),P(A,E)}function ae(A,E){A&&A.isWebGLCubeRenderTarget&&(ne===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),ne=!0),A=A.texture),Y(A,E)}this.allocateTextureUnit=B,this.resetTextureUnits=O,this.setTexture2D=P,this.setTexture2DArray=N,this.setTexture3D=z,this.setTextureCube=Y,this.setupRenderTarget=ke,this.updateRenderTargetMipmap=Ce,this.updateMultisampleRenderTarget=He,this.safeSetTexture2D=xe,this.safeSetTextureCube=ae}function D1(e,t,n){const i=n.isWebGL2;function r(s){let o;if(s===Go)return 5121;if(s===bw)return 32819;if(s===Sw)return 32820;if(s===Ew)return 33635;if(s===_w)return 5120;if(s===ww)return 5122;if(s===el)return 5123;if(s===Mw)return 5124;if(s===Ca)return 5125;if(s===Ai)return 5126;if(s===tl)return i?5131:(o=t.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===Tw)return 6406;if(s===mr)return 6407;if(s===pn)return 6408;if(s===Aw)return 6409;if(s===Cw)return 6410;if(s===es)return 6402;if(s===Mo)return 34041;if(s===Rw)return 6403;if(s===Pw)return 36244;if(s===Nw)return 33319;if(s===Iw)return 33320;if(s===Dw)return 36248;if(s===Ow)return 36249;if(s===op||s===ap||s===lp||s===cp)if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===op)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===ap)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===lp)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===cp)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===up||s===hp||s===fp||s===dp)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===up)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===hp)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===fp)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===dp)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===Fw)return o=t.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((s===pp||s===mp)&&(o=t.get("WEBGL_compressed_texture_etc"),o!==null)){if(s===pp)return o.COMPRESSED_RGB8_ETC2;if(s===mp)return o.COMPRESSED_RGBA8_ETC2_EAC}if(s===Bw||s===kw||s===zw||s===Uw||s===Hw||s===Gw||s===Vw||s===Ww||s===jw||s===qw||s===Xw||s===Yw||s===$w||s===Jw||s===Qw||s===Kw||s===e1||s===t1||s===n1||s===i1||s===r1||s===s1||s===o1||s===a1||s===l1||s===c1||s===u1||s===h1)return o=t.get("WEBGL_compressed_texture_astc"),o!==null?s:null;if(s===Zw)return o=t.get("EXT_texture_compression_bptc"),o!==null?s:null;if(s===ho)return i?34042:(o=t.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:r}}function Wu(e){yt.call(this),this.cameras=e||[]}Wu.prototype=Object.assign(Object.create(yt.prototype),{constructor:Wu,isArrayCamera:!0});function sr(){de.call(this),this.type="Group"}sr.prototype=Object.assign(Object.create(de.prototype),{constructor:sr,isGroup:!0});function Pa(){this._targetRay=null,this._grip=null,this._hand=null}Object.assign(Pa.prototype,{constructor:Pa,getHandSpace:function(){if(this._hand===null&&(this._hand=new sr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let e=0;e<=window.XRHand.LITTLE_PHALANX_TIP;e++){const t=new sr;t.matrixAutoUpdate=!1,t.visible=!1,this._hand.joints.push(t),this._hand.add(t)}return this._hand},getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new sr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new sr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},update:function(e,t,n){let i=null,r=null,s=null;const o=this._targetRay,a=this._grip,l=this._hand;if(e)if(l&&e.hand){s=!0;for(let c=0;c<=window.XRHand.LITTLE_PHALANX_TIP;c++)if(e.hand[c]){const h=t.getJointPose(e.hand[c],n),u=l.joints[c];h!==null&&(u.matrix.fromArray(h.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.jointRadius=h.radius),u.visible=h!==null;const f=l.joints[window.XRHand.INDEX_PHALANX_TIP],d=l.joints[window.XRHand.THUMB_PHALANX_TIP],m=f.position.distanceTo(d.position),y=.02,v=.005;l.inputState.pinching&&m>y+v?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&m<=y-v&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}}else o!==null&&(i=t.getPose(e.targetRaySpace,n),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale))),a!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale)));return o!==null&&(o.visible=i!==null),a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),this}});function O1(e,t){const n=this;let i=null,r=1,s=null,o="local-floor",a=null;const l=[],c=new Map,h=new yt;h.layers.enable(1),h.viewport=new We;const u=new yt;u.layers.enable(2),u.viewport=new We;const f=[h,u],d=new Wu;d.layers.enable(1),d.layers.enable(2);let m=null,y=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(I){let O=l[I];return O===void 0&&(O=new Pa,l[I]=O),O.getTargetRaySpace()},this.getControllerGrip=function(I){let O=l[I];return O===void 0&&(O=new Pa,l[I]=O),O.getGripSpace()},this.getHand=function(I){let O=l[I];return O===void 0&&(O=new Pa,l[I]=O),O.getHandSpace()};function v(I){const O=c.get(I.inputSource);O&&O.dispatchEvent({type:I.type,data:I.inputSource})}function g(){c.forEach(function(I,O){I.disconnect(O)}),c.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),D.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function p(I){s=I,D.setContext(i),D.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(I){r=I,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(I){o=I,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s},this.getSession=function(){return i},this.setSession=function(I){if(i=I,i!==null){i.addEventListener("select",v),i.addEventListener("selectstart",v),i.addEventListener("selectend",v),i.addEventListener("squeeze",v),i.addEventListener("squeezestart",v),i.addEventListener("squeezeend",v),i.addEventListener("end",g);const O=t.getContextAttributes();O.xrCompatible!==!0&&t.makeXRCompatible();const B={antialias:O.antialias,alpha:O.alpha,depth:O.depth,stencil:O.stencil,framebufferScaleFactor:r},P=new XRWebGLLayer(i,t,B);i.updateRenderState({baseLayer:P}),i.requestReferenceSpace(o).then(p),i.addEventListener("inputsourceschange",x)}};function x(I){const O=i.inputSources;for(let B=0;B<l.length;B++)c.set(O[B],l[B]);for(let B=0;B<I.removed.length;B++){const P=I.removed[B],N=c.get(P);N&&(N.dispatchEvent({type:"disconnected",data:P}),c.delete(P))}for(let B=0;B<I.added.length;B++){const P=I.added[B],N=c.get(P);N&&N.dispatchEvent({type:"connected",data:P})}}const w=new b,M=new b;function _(I,O,B){w.setFromMatrixPosition(O.matrixWorld),M.setFromMatrixPosition(B.matrixWorld);const P=w.distanceTo(M),N=O.projectionMatrix.elements,z=B.projectionMatrix.elements,Y=N[14]/(N[10]-1),F=N[14]/(N[10]+1),G=(N[9]+1)/N[5],q=(N[9]-1)/N[5],Z=(N[8]-1)/N[0],he=(z[8]+1)/z[0],Ee=Y*Z,Ue=Y*he,W=P/(-Z+he),nt=W*-Z;O.matrixWorld.decompose(I.position,I.quaternion,I.scale),I.translateX(nt),I.translateZ(W),I.matrixWorld.compose(I.position,I.quaternion,I.scale),I.matrixWorldInverse.getInverse(I.matrixWorld);const ve=Y+W,ke=F+W,Ce=Ee-nt,He=Ue+(P-nt),Ne=G*F/ke*ve,J=q*F/ke*ve;I.projectionMatrix.makePerspective(Ce,He,Ne,J,ve,ke)}function S(I,O){O===null?I.matrixWorld.copy(I.matrix):I.matrixWorld.multiplyMatrices(O.matrixWorld,I.matrix),I.matrixWorldInverse.getInverse(I.matrixWorld)}this.getCamera=function(I){d.near=u.near=h.near=I.near,d.far=u.far=h.far=I.far,(m!==d.near||y!==d.far)&&(i.updateRenderState({depthNear:d.near,depthFar:d.far}),m=d.near,y=d.far);const O=I.parent,B=d.cameras;S(d,O);for(let N=0;N<B.length;N++)S(B[N],O);I.matrixWorld.copy(d.matrixWorld);const P=I.children;for(let N=0,z=P.length;N<z;N++)P[N].updateMatrixWorld(!0);return B.length===2?_(d,h,u):d.projectionMatrix.copy(h.projectionMatrix),d};let C=null;function L(I,O){if(a=O.getViewerPose(s),a!==null){const P=a.views,N=i.renderState.baseLayer;e.setFramebuffer(N.framebuffer);let z=!1;P.length!==d.cameras.length&&(d.cameras.length=0,z=!0);for(let Y=0;Y<P.length;Y++){const F=P[Y],G=N.getViewport(F),q=f[Y];q.matrix.fromArray(F.transform.matrix),q.projectionMatrix.fromArray(F.projectionMatrix),q.viewport.set(G.x,G.y,G.width,G.height),Y===0&&d.matrix.copy(q.matrix),z===!0&&d.cameras.push(q)}}const B=i.inputSources;for(let P=0;P<l.length;P++){const N=l[P],z=B[P];N.update(z,O,s)}C&&C(I,O)}const D=new E1;D.setAnimationLoop(L),this.setAnimationLoop=function(I){C=I},this.dispose=function(){}}Object.assign(O1.prototype,gi.prototype);function SL(e){function t(g,p){g.fogColor.value.copy(p.color),p.isFog?(g.fogNear.value=p.near,g.fogFar.value=p.far):p.isFogExp2&&(g.fogDensity.value=p.density)}function n(g,p,x,w){p.isMeshBasicMaterial?i(g,p):p.isMeshLambertMaterial?(i(g,p),l(g,p)):p.isMeshToonMaterial?(i(g,p),h(g,p)):p.isMeshPhongMaterial?(i(g,p),c(g,p)):p.isMeshStandardMaterial?(i(g,p),p.isMeshPhysicalMaterial?f(g,p):u(g,p)):p.isMeshMatcapMaterial?(i(g,p),d(g,p)):p.isMeshDepthMaterial?(i(g,p),m(g,p)):p.isMeshDistanceMaterial?(i(g,p),y(g,p)):p.isMeshNormalMaterial?(i(g,p),v(g,p)):p.isLineBasicMaterial?(r(g,p),p.isLineDashedMaterial&&s(g,p)):p.isPointsMaterial?o(g,p,x,w):p.isSpriteMaterial?a(g,p):p.isShadowMaterial?(g.color.value.copy(p.color),g.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function i(g,p){g.opacity.value=p.opacity,p.color&&g.diffuse.value.copy(p.color),p.emissive&&g.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(g.map.value=p.map),p.alphaMap&&(g.alphaMap.value=p.alphaMap),p.specularMap&&(g.specularMap.value=p.specularMap);const x=e.get(p).envMap;if(x){g.envMap.value=x,g.flipEnvMap.value=x.isCubeTexture&&x._needsFlipEnvMap?-1:1,g.reflectivity.value=p.reflectivity,g.refractionRatio.value=p.refractionRatio;const _=e.get(x).__maxMipLevel;_!==void 0&&(g.maxMipLevel.value=_)}p.lightMap&&(g.lightMap.value=p.lightMap,g.lightMapIntensity.value=p.lightMapIntensity),p.aoMap&&(g.aoMap.value=p.aoMap,g.aoMapIntensity.value=p.aoMapIntensity);let w;p.map?w=p.map:p.specularMap?w=p.specularMap:p.displacementMap?w=p.displacementMap:p.normalMap?w=p.normalMap:p.bumpMap?w=p.bumpMap:p.roughnessMap?w=p.roughnessMap:p.metalnessMap?w=p.metalnessMap:p.alphaMap?w=p.alphaMap:p.emissiveMap?w=p.emissiveMap:p.clearcoatMap?w=p.clearcoatMap:p.clearcoatNormalMap?w=p.clearcoatNormalMap:p.clearcoatRoughnessMap&&(w=p.clearcoatRoughnessMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),g.uvTransform.value.copy(w.matrix));let M;p.aoMap?M=p.aoMap:p.lightMap&&(M=p.lightMap),M!==void 0&&(M.isWebGLRenderTarget&&(M=M.texture),M.matrixAutoUpdate===!0&&M.updateMatrix(),g.uv2Transform.value.copy(M.matrix))}function r(g,p){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity}function s(g,p){g.dashSize.value=p.dashSize,g.totalSize.value=p.dashSize+p.gapSize,g.scale.value=p.scale}function o(g,p,x,w){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,g.size.value=p.size*x,g.scale.value=w*.5,p.map&&(g.map.value=p.map),p.alphaMap&&(g.alphaMap.value=p.alphaMap);let M;p.map?M=p.map:p.alphaMap&&(M=p.alphaMap),M!==void 0&&(M.matrixAutoUpdate===!0&&M.updateMatrix(),g.uvTransform.value.copy(M.matrix))}function a(g,p){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,g.rotation.value=p.rotation,p.map&&(g.map.value=p.map),p.alphaMap&&(g.alphaMap.value=p.alphaMap);let x;p.map?x=p.map:p.alphaMap&&(x=p.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),g.uvTransform.value.copy(x.matrix))}function l(g,p){p.emissiveMap&&(g.emissiveMap.value=p.emissiveMap)}function c(g,p){g.specular.value.copy(p.specular),g.shininess.value=Math.max(p.shininess,1e-4),p.emissiveMap&&(g.emissiveMap.value=p.emissiveMap),p.bumpMap&&(g.bumpMap.value=p.bumpMap,g.bumpScale.value=p.bumpScale,p.side===_t&&(g.bumpScale.value*=-1)),p.normalMap&&(g.normalMap.value=p.normalMap,g.normalScale.value.copy(p.normalScale),p.side===_t&&g.normalScale.value.negate()),p.displacementMap&&(g.displacementMap.value=p.displacementMap,g.displacementScale.value=p.displacementScale,g.displacementBias.value=p.displacementBias)}function h(g,p){p.gradientMap&&(g.gradientMap.value=p.gradientMap),p.emissiveMap&&(g.emissiveMap.value=p.emissiveMap),p.bumpMap&&(g.bumpMap.value=p.bumpMap,g.bumpScale.value=p.bumpScale,p.side===_t&&(g.bumpScale.value*=-1)),p.normalMap&&(g.normalMap.value=p.normalMap,g.normalScale.value.copy(p.normalScale),p.side===_t&&g.normalScale.value.negate()),p.displacementMap&&(g.displacementMap.value=p.displacementMap,g.displacementScale.value=p.displacementScale,g.displacementBias.value=p.displacementBias)}function u(g,p){g.roughness.value=p.roughness,g.metalness.value=p.metalness,p.roughnessMap&&(g.roughnessMap.value=p.roughnessMap),p.metalnessMap&&(g.metalnessMap.value=p.metalnessMap),p.emissiveMap&&(g.emissiveMap.value=p.emissiveMap),p.bumpMap&&(g.bumpMap.value=p.bumpMap,g.bumpScale.value=p.bumpScale,p.side===_t&&(g.bumpScale.value*=-1)),p.normalMap&&(g.normalMap.value=p.normalMap,g.normalScale.value.copy(p.normalScale),p.side===_t&&g.normalScale.value.negate()),p.displacementMap&&(g.displacementMap.value=p.displacementMap,g.displacementScale.value=p.displacementScale,g.displacementBias.value=p.displacementBias),e.get(p).envMap&&(g.envMapIntensity.value=p.envMapIntensity)}function f(g,p){u(g,p),g.reflectivity.value=p.reflectivity,g.clearcoat.value=p.clearcoat,g.clearcoatRoughness.value=p.clearcoatRoughness,p.sheen&&g.sheen.value.copy(p.sheen),p.clearcoatMap&&(g.clearcoatMap.value=p.clearcoatMap),p.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap),p.clearcoatNormalMap&&(g.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),g.clearcoatNormalMap.value=p.clearcoatNormalMap,p.side===_t&&g.clearcoatNormalScale.value.negate()),g.transmission.value=p.transmission,p.transmissionMap&&(g.transmissionMap.value=p.transmissionMap)}function d(g,p){p.matcap&&(g.matcap.value=p.matcap),p.bumpMap&&(g.bumpMap.value=p.bumpMap,g.bumpScale.value=p.bumpScale,p.side===_t&&(g.bumpScale.value*=-1)),p.normalMap&&(g.normalMap.value=p.normalMap,g.normalScale.value.copy(p.normalScale),p.side===_t&&g.normalScale.value.negate()),p.displacementMap&&(g.displacementMap.value=p.displacementMap,g.displacementScale.value=p.displacementScale,g.displacementBias.value=p.displacementBias)}function m(g,p){p.displacementMap&&(g.displacementMap.value=p.displacementMap,g.displacementScale.value=p.displacementScale,g.displacementBias.value=p.displacementBias)}function y(g,p){p.displacementMap&&(g.displacementMap.value=p.displacementMap,g.displacementScale.value=p.displacementScale,g.displacementBias.value=p.displacementBias),g.referencePosition.value.copy(p.referencePosition),g.nearDistance.value=p.nearDistance,g.farDistance.value=p.farDistance}function v(g,p){p.bumpMap&&(g.bumpMap.value=p.bumpMap,g.bumpScale.value=p.bumpScale,p.side===_t&&(g.bumpScale.value*=-1)),p.normalMap&&(g.normalMap.value=p.normalMap,g.normalScale.value.copy(p.normalScale),p.side===_t&&g.normalScale.value.negate()),p.displacementMap&&(g.displacementMap.value=p.displacementMap,g.displacementScale.value=p.displacementScale,g.displacementBias.value=p.displacementBias)}return{refreshFogUniforms:t,refreshMaterialUniforms:n}}function zl(e){e=e||{};const t=e.canvas!==void 0?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=e.context!==void 0?e.context:null,i=e.alpha!==void 0?e.alpha:!1,r=e.depth!==void 0?e.depth:!0,s=e.stencil!==void 0?e.stencil:!0,o=e.antialias!==void 0?e.antialias:!1,a=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,l=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,c=e.powerPreference!==void 0?e.powerPreference:"default",h=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1;let u=null,f=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Yt,this.physicallyCorrectLights=!1,this.toneMapping=Kr,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const d=this;let m=!1,y=null,v=0,g=0,p=null,x=null,w=-1,M=null,_=null;const S=new We,C=new We;let L=null,D=t.width,I=t.height,O=1,B=null,P=null;const N=new We(0,0,D,I),z=new We(0,0,D,I);let Y=!1;const F=new kl;let G=!1,q=!1;const Z=new Le,he=new b,Ee={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ue(){return p===null?O:1}let W=n;function nt(T,U){for(let k=0;k<T.length;k++){const V=T[k],re=t.getContext(V,U);if(re!==null)return re}return null}try{const T={alpha:i,depth:r,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:h};if(t.addEventListener("webglcontextlost",st,!1),t.addEventListener("webglcontextrestored",Kt,!1),W===null){const U=["webgl2","webgl","experimental-webgl"];if(d.isWebGL1Renderer===!0&&U.shift(),W=nt(U,T),W===null)throw nt(U)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}W.getShaderPrecisionFormat===void 0&&(W.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(T){throw console.error("THREE.WebGLRenderer: "+T.message),T}let ve,ke,Ce,He,Ne,J,ee,ne,xe,ae,A,E,Q,X,R,K,oe,me,te,pe,_e;function Te(){ve=new iC(W),ke=new eC(W,ve,e),ke.isWebGL2===!1&&(ve.get("WEBGL_depth_texture"),ve.get("OES_texture_float"),ve.get("OES_texture_half_float"),ve.get("OES_texture_half_float_linear"),ve.get("OES_standard_derivatives"),ve.get("OES_element_index_uint"),ve.get("OES_vertex_array_object"),ve.get("ANGLE_instanced_arrays")),ve.get("OES_texture_float_linear"),pe=new D1(W,ve,ke),Ce=new ML(W,ve,ke),Ce.scissor(C.copy(z).multiplyScalar(O).floor()),Ce.viewport(S.copy(N).multiplyScalar(O).floor()),He=new oC,Ne=new uL,J=new bL(W,ve,Ce,Ne,ke,pe,He),ee=new nC(d),ne=new L2(W,ke),_e=new Q3(W,ve,ne,ke),xe=new rC(W,ne,He,_e),ae=new uC(W,xe,ne,He),oe=new cC(W),R=new tC(Ne),A=new cL(d,ee,ve,ke,_e,R),E=new SL(Ne),Q=new dL(Ne),X=new xL,K=new Z3(d,ee,Ce,ae,a),me=new K3(W,ve,He,ke),te=new sC(W,ve,He,ke),He.programs=A.programs,d.capabilities=ke,d.extensions=ve,d.properties=Ne,d.renderLists=Q,d.state=Ce,d.info=He}Te();const fe=new O1(d,W);this.xr=fe;const be=new I1(d,ae,ke.maxTextureSize);this.shadowMap=be,this.getContext=function(){return W},this.getContextAttributes=function(){return W.getContextAttributes()},this.forceContextLoss=function(){const T=ve.get("WEBGL_lose_context");T&&T.loseContext()},this.forceContextRestore=function(){const T=ve.get("WEBGL_lose_context");T&&T.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(T){T!==void 0&&(O=T,this.setSize(D,I,!1))},this.getSize=function(T){return T===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),T=new j),T.set(D,I)},this.setSize=function(T,U,k){if(fe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}D=T,I=U,t.width=Math.floor(T*O),t.height=Math.floor(U*O),k!==!1&&(t.style.width=T+"px",t.style.height=U+"px"),this.setViewport(0,0,T,U)},this.getDrawingBufferSize=function(T){return T===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),T=new j),T.set(D*O,I*O).floor()},this.setDrawingBufferSize=function(T,U,k){D=T,I=U,O=k,t.width=Math.floor(T*k),t.height=Math.floor(U*k),this.setViewport(0,0,T,U)},this.getCurrentViewport=function(T){return T===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),T=new We),T.copy(S)},this.getViewport=function(T){return T.copy(N)},this.setViewport=function(T,U,k,V){T.isVector4?N.set(T.x,T.y,T.z,T.w):N.set(T,U,k,V),Ce.viewport(S.copy(N).multiplyScalar(O).floor())},this.getScissor=function(T){return T.copy(z)},this.setScissor=function(T,U,k,V){T.isVector4?z.set(T.x,T.y,T.z,T.w):z.set(T,U,k,V),Ce.scissor(C.copy(z).multiplyScalar(O).floor())},this.getScissorTest=function(){return Y},this.setScissorTest=function(T){Ce.setScissorTest(Y=T)},this.setOpaqueSort=function(T){B=T},this.setTransparentSort=function(T){P=T},this.getClearColor=function(){return K.getClearColor()},this.setClearColor=function(){K.setClearColor.apply(K,arguments)},this.getClearAlpha=function(){return K.getClearAlpha()},this.setClearAlpha=function(){K.setClearAlpha.apply(K,arguments)},this.clear=function(T,U,k){let V=0;(T===void 0||T)&&(V|=16384),(U===void 0||U)&&(V|=256),(k===void 0||k)&&(V|=1024),W.clear(V)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",st,!1),t.removeEventListener("webglcontextrestored",Kt,!1),Q.dispose(),X.dispose(),Ne.dispose(),ee.dispose(),ae.dispose(),_e.dispose(),fe.dispose(),qo.stop()};function st(T){T.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function Kt(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1,Te()}function Ag(T){const U=T.target;U.removeEventListener("dispose",Ag),_M(U)}function _M(T){Cg(T),Ne.remove(T)}function Cg(T){const U=Ne.get(T).program;U!==void 0&&A.releaseProgram(U)}function wM(T,U){T.render(function(k){d.renderBufferImmediate(k,U)})}this.renderBufferImmediate=function(T,U){_e.initAttributes();const k=Ne.get(T);T.hasPositions&&!k.position&&(k.position=W.createBuffer()),T.hasNormals&&!k.normal&&(k.normal=W.createBuffer()),T.hasUvs&&!k.uv&&(k.uv=W.createBuffer()),T.hasColors&&!k.color&&(k.color=W.createBuffer());const V=U.getAttributes();T.hasPositions&&(W.bindBuffer(34962,k.position),W.bufferData(34962,T.positionArray,35048),_e.enableAttribute(V.position),W.vertexAttribPointer(V.position,3,5126,!1,0,0)),T.hasNormals&&(W.bindBuffer(34962,k.normal),W.bufferData(34962,T.normalArray,35048),_e.enableAttribute(V.normal),W.vertexAttribPointer(V.normal,3,5126,!1,0,0)),T.hasUvs&&(W.bindBuffer(34962,k.uv),W.bufferData(34962,T.uvArray,35048),_e.enableAttribute(V.uv),W.vertexAttribPointer(V.uv,2,5126,!1,0,0)),T.hasColors&&(W.bindBuffer(34962,k.color),W.bufferData(34962,T.colorArray,35048),_e.enableAttribute(V.color),W.vertexAttribPointer(V.color,3,5126,!1,0,0)),_e.disableUnusedAttributes(),W.drawArrays(4,0,T.count),T.count=0},this.renderBufferDirect=function(T,U,k,V,re,De){U===null&&(U=Ee);const Re=re.isMesh&&re.matrixWorld.determinant()<0,Fe=Ng(T,U,V,re);Ce.setMaterial(V,Re);let Pe=k.index;const gt=k.attributes.position;if(Pe===null){if(gt===void 0||gt.count===0)return}else if(Pe.count===0)return;let ft=1;V.wireframe===!0&&(Pe=xe.getWireframeAttribute(k),ft=2),(V.morphTargets||V.morphNormals)&&oe.update(re,k,V,Fe),_e.setup(re,V,Fe,k,Pe);let Ae,Xe=me;Pe!==null&&(Ae=ne.get(Pe),Xe=te,Xe.setIndex(Ae));const xi=Pe!==null?Pe.count:gt.count,Ye=k.drawRange.start*ft,Ir=k.drawRange.count*ft,St=De!==null?De.start*ft:0,Xh=De!==null?De.count*ft:1/0,en=Math.max(Ye,St),Xo=Math.min(xi,Ye+Ir,St+Xh)-1,ws=Math.max(0,Xo-en+1);if(ws!==0){if(re.isMesh)V.wireframe===!0?(Ce.setLineWidth(V.wireframeLinewidth*Ue()),Xe.setMode(1)):Xe.setMode(4);else if(re.isLine){let Yo=V.linewidth;Yo===void 0&&(Yo=1),Ce.setLineWidth(Yo*Ue()),re.isLineSegments?Xe.setMode(1):re.isLineLoop?Xe.setMode(2):Xe.setMode(3)}else re.isPoints?Xe.setMode(0):re.isSprite&&Xe.setMode(4);if(re.isInstancedMesh)Xe.renderInstances(en,ws,re.count);else if(k.isInstancedBufferGeometry){const Yo=Math.min(k.instanceCount,k._maxInstanceCount);Xe.renderInstances(en,ws,Yo)}else Xe.render(en,ws)}},this.compile=function(T,U){f=X.get(T,U),f.init(),T.traverse(function(V){V.isLight&&(f.pushLight(V),V.castShadow&&f.pushShadow(V))}),f.setupLights(U);const k=new WeakMap;T.traverse(function(V){const re=V.material;if(re)if(Array.isArray(re))for(let De=0;De<re.length;De++){const Re=re[De];k.has(Re)===!1&&(vi(Re,T,V),k.set(Re))}else k.has(re)===!1&&(vi(re,T,V),k.set(re))})};let qh=null;function MM(T){fe.isPresenting||qh&&qh(T)}const qo=new E1;qo.setAnimationLoop(MM),typeof window<"u"&&qo.setContext(window),this.setAnimationLoop=function(T){qh=T,fe.setAnimationLoop(T),T===null?qo.stop():qo.start()},this.render=function(T,U){let k,V;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),k=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),V=arguments[3]),U!==void 0&&U.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(m===!0)return;_e.resetDefaultState(),w=-1,M=null,T.autoUpdate===!0&&T.updateMatrixWorld(),U.parent===null&&U.updateMatrixWorld(),fe.enabled===!0&&fe.isPresenting===!0&&(U=fe.getCamera(U)),T.isScene===!0&&T.onBeforeRender(d,T,U,k||p),f=X.get(T,U),f.init(),Z.multiplyMatrices(U.projectionMatrix,U.matrixWorldInverse),F.setFromProjectionMatrix(Z),q=this.localClippingEnabled,G=R.init(this.clippingPlanes,q,U),u=Q.get(T,U),u.init(),Lg(T,U,0,d.sortObjects),u.finish(),d.sortObjects===!0&&u.sort(B,P),G===!0&&R.beginShadows();const re=f.state.shadowsArray;be.render(re,T,U),f.setupLights(U),G===!0&&R.endShadows(),this.info.autoReset===!0&&this.info.reset(),k!==void 0&&this.setRenderTarget(k),K.render(u,T,U,V);const De=u.opaque,Re=u.transparent;De.length>0&&Rg(De,T,U),Re.length>0&&Rg(Re,T,U),T.isScene===!0&&T.onAfterRender(d,T,U),p!==null&&(J.updateRenderTargetMipmap(p),J.updateMultisampleRenderTarget(p)),Ce.buffers.depth.setTest(!0),Ce.buffers.depth.setMask(!0),Ce.buffers.color.setMask(!0),Ce.setPolygonOffset(!1),u=null,f=null};function Lg(T,U,k,V){if(T.visible===!1)return;if(T.layers.test(U.layers)){if(T.isGroup)k=T.renderOrder;else if(T.isLOD)T.autoUpdate===!0&&T.update(U);else if(T.isLight)f.pushLight(T),T.castShadow&&f.pushShadow(T);else if(T.isSprite){if(!T.frustumCulled||F.intersectsSprite(T)){V&&he.setFromMatrixPosition(T.matrixWorld).applyMatrix4(Z);const Re=ae.update(T),Fe=T.material;Fe.visible&&u.push(T,Re,Fe,k,he.z,null)}}else if(T.isImmediateRenderObject)V&&he.setFromMatrixPosition(T.matrixWorld).applyMatrix4(Z),u.push(T,null,T.material,k,he.z,null);else if((T.isMesh||T.isLine||T.isPoints)&&(T.isSkinnedMesh&&T.skeleton.frame!==He.render.frame&&(T.skeleton.update(),T.skeleton.frame=He.render.frame),!T.frustumCulled||F.intersectsObject(T))){V&&he.setFromMatrixPosition(T.matrixWorld).applyMatrix4(Z);const Re=ae.update(T),Fe=T.material;if(Array.isArray(Fe)){const Pe=Re.groups;for(let gt=0,ft=Pe.length;gt<ft;gt++){const Ae=Pe[gt],Xe=Fe[Ae.materialIndex];Xe&&Xe.visible&&u.push(T,Re,Xe,k,he.z,Ae)}}else Fe.visible&&u.push(T,Re,Fe,k,he.z,null)}}const De=T.children;for(let Re=0,Fe=De.length;Re<Fe;Re++)Lg(De[Re],U,k,V)}function Rg(T,U,k){const V=U.isScene===!0?U.overrideMaterial:null;for(let re=0,De=T.length;re<De;re++){const Re=T[re],Fe=Re.object,Pe=Re.geometry,gt=V===null?Re.material:V,ft=Re.group;if(k.isArrayCamera){_=k;const Ae=k.cameras;for(let Xe=0,xi=Ae.length;Xe<xi;Xe++){const Ye=Ae[Xe];Fe.layers.test(Ye.layers)&&(Ce.viewport(S.copy(Ye.viewport)),f.setupLights(Ye),Pg(Fe,U,Ye,Pe,gt,ft))}}else _=null,Pg(Fe,U,k,Pe,gt,ft)}}function Pg(T,U,k,V,re,De){if(T.onBeforeRender(d,U,k,V,re,De),f=X.get(U,_||k),T.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,T.matrixWorld),T.normalMatrix.getNormalMatrix(T.modelViewMatrix),T.isImmediateRenderObject){const Re=Ng(k,U,re,T);Ce.setMaterial(re),_e.reset(),wM(T,Re)}else d.renderBufferDirect(k,U,V,re,T,De);T.onAfterRender(d,U,k,V,re,De),f=X.get(U,_||k)}function vi(T,U,k){U.isScene!==!0&&(U=Ee);const V=Ne.get(T),re=f.state.lights,De=f.state.shadowsArray,Re=re.state.version,Fe=A.getParameters(T,re.state,De,U,k),Pe=A.getProgramCacheKey(Fe);let gt=V.program,ft=!0;if(gt===void 0)T.addEventListener("dispose",Ag);else if(gt.cacheKey!==Pe)Cg(T);else if(V.lightsStateVersion!==Re)ft=!1;else if(Fe.shaderID!==void 0){const Ye=T.isMeshStandardMaterial?U.environment:null;V.envMap=ee.get(T.envMap||Ye);return}else ft=!1;ft&&(Fe.uniforms=A.getUniforms(T),T.onBeforeCompile(Fe,d),gt=A.acquireProgram(Fe,Pe),V.program=gt,V.uniforms=Fe.uniforms,V.outputEncoding=Fe.outputEncoding);const Ae=V.uniforms;(!T.isShaderMaterial&&!T.isRawShaderMaterial||T.clipping===!0)&&(V.numClippingPlanes=R.numPlanes,V.numIntersection=R.numIntersection,Ae.clippingPlanes=R.uniform),V.environment=T.isMeshStandardMaterial?U.environment:null,V.fog=U.fog,V.envMap=ee.get(T.envMap||V.environment),V.needsLights=SM(T),V.lightsStateVersion=Re,V.needsLights&&(Ae.ambientLightColor.value=re.state.ambient,Ae.lightProbe.value=re.state.probe,Ae.directionalLights.value=re.state.directional,Ae.directionalLightShadows.value=re.state.directionalShadow,Ae.spotLights.value=re.state.spot,Ae.spotLightShadows.value=re.state.spotShadow,Ae.rectAreaLights.value=re.state.rectArea,Ae.ltc_1.value=re.state.rectAreaLTC1,Ae.ltc_2.value=re.state.rectAreaLTC2,Ae.pointLights.value=re.state.point,Ae.pointLightShadows.value=re.state.pointShadow,Ae.hemisphereLights.value=re.state.hemi,Ae.directionalShadowMap.value=re.state.directionalShadowMap,Ae.directionalShadowMatrix.value=re.state.directionalShadowMatrix,Ae.spotShadowMap.value=re.state.spotShadowMap,Ae.spotShadowMatrix.value=re.state.spotShadowMatrix,Ae.pointShadowMap.value=re.state.pointShadowMap,Ae.pointShadowMatrix.value=re.state.pointShadowMatrix);const Xe=V.program.getUniforms(),xi=gr.seqWithValue(Xe.seq,Ae);V.uniformsList=xi}function Ng(T,U,k,V){U.isScene!==!0&&(U=Ee),J.resetTextureUnits();const re=U.fog,De=k.isMeshStandardMaterial?U.environment:null,Re=p===null?d.outputEncoding:p.texture.encoding,Fe=ee.get(k.envMap||De),Pe=Ne.get(k),gt=f.state.lights;if(G===!0&&(q===!0||T!==M)){const St=T===M&&k.id===w;R.setState(k,T,St)}k.version===Pe.__version?(k.fog&&Pe.fog!==re||Pe.environment!==De||Pe.needsLights&&Pe.lightsStateVersion!==gt.state.version||Pe.numClippingPlanes!==void 0&&(Pe.numClippingPlanes!==R.numPlanes||Pe.numIntersection!==R.numIntersection)||Pe.outputEncoding!==Re||Pe.envMap!==Fe)&&vi(k,U,V):(vi(k,U,V),Pe.__version=k.version);let ft=!1,Ae=!1,Xe=!1;const xi=Pe.program,Ye=xi.getUniforms(),Ir=Pe.uniforms;if(Ce.useProgram(xi.program)&&(ft=!0,Ae=!0,Xe=!0),k.id!==w&&(w=k.id,Ae=!0),ft||M!==T){if(Ye.setValue(W,"projectionMatrix",T.projectionMatrix),ke.logarithmicDepthBuffer&&Ye.setValue(W,"logDepthBufFC",2/(Math.log(T.far+1)/Math.LN2)),M!==T&&(M=T,Ae=!0,Xe=!0),k.isShaderMaterial||k.isMeshPhongMaterial||k.isMeshToonMaterial||k.isMeshStandardMaterial||k.envMap){const St=Ye.map.cameraPosition;St!==void 0&&St.setValue(W,he.setFromMatrixPosition(T.matrixWorld))}(k.isMeshPhongMaterial||k.isMeshToonMaterial||k.isMeshLambertMaterial||k.isMeshBasicMaterial||k.isMeshStandardMaterial||k.isShaderMaterial)&&Ye.setValue(W,"isOrthographic",T.isOrthographicCamera===!0),(k.isMeshPhongMaterial||k.isMeshToonMaterial||k.isMeshLambertMaterial||k.isMeshBasicMaterial||k.isMeshStandardMaterial||k.isShaderMaterial||k.isShadowMaterial||k.skinning)&&Ye.setValue(W,"viewMatrix",T.matrixWorldInverse)}if(k.skinning){Ye.setOptional(W,V,"bindMatrix"),Ye.setOptional(W,V,"bindMatrixInverse");const St=V.skeleton;if(St){const Xh=St.bones;if(ke.floatVertexTextures){if(St.boneTexture===void 0){let en=Math.sqrt(Xh.length*4);en=Se.ceilPowerOfTwo(en),en=Math.max(en,4);const Xo=new Float32Array(en*en*4);Xo.set(St.boneMatrices);const ws=new cs(Xo,en,en,pn,Ai);St.boneMatrices=Xo,St.boneTexture=ws,St.boneTextureSize=en}Ye.setValue(W,"boneTexture",St.boneTexture,J),Ye.setValue(W,"boneTextureSize",St.boneTextureSize)}else Ye.setOptional(W,St,"boneMatrices")}}return(Ae||Pe.receiveShadow!==V.receiveShadow)&&(Pe.receiveShadow=V.receiveShadow,Ye.setValue(W,"receiveShadow",V.receiveShadow)),Ae&&(Ye.setValue(W,"toneMappingExposure",d.toneMappingExposure),Pe.needsLights&&bM(Ir,Xe),re&&k.fog&&E.refreshFogUniforms(Ir,re),E.refreshMaterialUniforms(Ir,k,O,I),gr.upload(W,Pe.uniformsList,Ir,J)),k.isShaderMaterial&&k.uniformsNeedUpdate===!0&&(gr.upload(W,Pe.uniformsList,Ir,J),k.uniformsNeedUpdate=!1),k.isSpriteMaterial&&Ye.setValue(W,"center",V.center),Ye.setValue(W,"modelViewMatrix",V.modelViewMatrix),Ye.setValue(W,"normalMatrix",V.normalMatrix),Ye.setValue(W,"modelMatrix",V.matrixWorld),xi}function bM(T,U){T.ambientLightColor.needsUpdate=U,T.lightProbe.needsUpdate=U,T.directionalLights.needsUpdate=U,T.directionalLightShadows.needsUpdate=U,T.pointLights.needsUpdate=U,T.pointLightShadows.needsUpdate=U,T.spotLights.needsUpdate=U,T.spotLightShadows.needsUpdate=U,T.rectAreaLights.needsUpdate=U,T.hemisphereLights.needsUpdate=U}function SM(T){return T.isMeshLambertMaterial||T.isMeshToonMaterial||T.isMeshPhongMaterial||T.isMeshStandardMaterial||T.isShadowMaterial||T.isShaderMaterial&&T.lights===!0}this.setFramebuffer=function(T){y!==T&&p===null&&W.bindFramebuffer(36160,T),y=T},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return g},this.getRenderList=function(){return u},this.setRenderList=function(T){u=T},this.getRenderState=function(){return f},this.setRenderState=function(T){f=T},this.getRenderTarget=function(){return p},this.setRenderTarget=function(T,U=0,k=0){p=T,v=U,g=k,T&&Ne.get(T).__webglFramebuffer===void 0&&J.setupRenderTarget(T);let V=y,re=!1;if(T){const De=Ne.get(T).__webglFramebuffer;T.isWebGLCubeRenderTarget?(V=De[U],re=!0):T.isWebGLMultisampleRenderTarget?V=Ne.get(T).__webglMultisampledFramebuffer:V=De,S.copy(T.viewport),C.copy(T.scissor),L=T.scissorTest}else S.copy(N).multiplyScalar(O).floor(),C.copy(z).multiplyScalar(O).floor(),L=Y;if(x!==V&&(W.bindFramebuffer(36160,V),x=V),Ce.viewport(S),Ce.scissor(C),Ce.setScissorTest(L),re){const De=Ne.get(T.texture);W.framebufferTexture2D(36160,36064,34069+U,De.__webglTexture,k)}},this.readRenderTargetPixels=function(T,U,k,V,re,De,Re){if(!(T&&T.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Fe=Ne.get(T).__webglFramebuffer;if(T.isWebGLCubeRenderTarget&&Re!==void 0&&(Fe=Fe[Re]),Fe){let Pe=!1;Fe!==x&&(W.bindFramebuffer(36160,Fe),Pe=!0);try{const gt=T.texture,ft=gt.format,Ae=gt.type;if(ft!==pn&&pe.convert(ft)!==W.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(Ae!==Go&&pe.convert(Ae)!==W.getParameter(35738)&&!(Ae===Ai&&(ke.isWebGL2||ve.get("OES_texture_float")||ve.get("WEBGL_color_buffer_float")))&&!(Ae===tl&&(ke.isWebGL2?ve.get("EXT_color_buffer_float"):ve.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}W.checkFramebufferStatus(36160)===36053?U>=0&&U<=T.width-V&&k>=0&&k<=T.height-re&&W.readPixels(U,k,V,re,pe.convert(ft),pe.convert(Ae),De):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{Pe&&W.bindFramebuffer(36160,x)}}},this.copyFramebufferToTexture=function(T,U,k){k===void 0&&(k=0);const V=Math.pow(2,-k),re=Math.floor(U.image.width*V),De=Math.floor(U.image.height*V),Re=pe.convert(U.format);J.setTexture2D(U,0),W.copyTexImage2D(3553,k,Re,T.x,T.y,re,De,0),Ce.unbindTexture()},this.copyTextureToTexture=function(T,U,k,V){V===void 0&&(V=0);const re=U.image.width,De=U.image.height,Re=pe.convert(k.format),Fe=pe.convert(k.type);J.setTexture2D(k,0),W.pixelStorei(37440,k.flipY),W.pixelStorei(37441,k.premultiplyAlpha),W.pixelStorei(3317,k.unpackAlignment),U.isDataTexture?W.texSubImage2D(3553,V,T.x,T.y,re,De,Re,Fe,U.image.data):U.isCompressedTexture?W.compressedTexSubImage2D(3553,V,T.x,T.y,U.mipmaps[0].width,U.mipmaps[0].height,Re,U.mipmaps[0].data):W.texSubImage2D(3553,V,T.x,T.y,Re,Fe,U.image),V===0&&k.generateMipmaps&&W.generateMipmap(3553),Ce.unbindTexture()},this.initTexture=function(T){J.setTexture2D(T,0),Ce.unbindTexture()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function xp(e){zl.call(this,e)}xp.prototype=Object.assign(Object.create(zl.prototype),{constructor:xp,isWebGL1Renderer:!0});class Uh{constructor(t,n){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new le(t),this.density=n!==void 0?n:25e-5}clone(){return new Uh(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Hh{constructor(t,n,i){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new le(t),this.near=n!==void 0?n:1,this.far=i!==void 0?i:1e3}clone(){return new Hh(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class $m extends de{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,n){return super.copy(t,n),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const n=super.toJSON(t);return this.background!==null&&(n.object.background=this.background.toJSON(t)),this.environment!==null&&(n.object.environment=this.environment.toJSON(t)),this.fog!==null&&(n.object.fog=this.fog.toJSON()),n}}function fn(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Fl,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Se.generateUUID()}Object.defineProperty(fn.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(fn.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},clone:function(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Se.generateUUID()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new fn(t,this.stride);return n.setUsage(this.usage),n},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Se.generateUUID()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const Br=new b;function Er(e,t,n,i){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i===!0}Object.defineProperties(Er.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(e){this.data.needsUpdate=e}}});Object.assign(Er.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(let t=0,n=this.data.count;t<n;t++)Br.x=this.getX(t),Br.y=this.getY(t),Br.z=this.getZ(t),Br.applyMatrix4(e),this.setXYZ(t,Br.x,Br.y,Br.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this},clone:function(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return new we(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Er(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});function Tr(e){Me.call(this),this.type="SpriteMaterial",this.color=new le(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}Tr.prototype=Object.create(Me.prototype);Tr.prototype.constructor=Tr;Tr.prototype.isSpriteMaterial=!0;Tr.prototype.copy=function(e){return Me.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};let Os;const ca=new b,Fs=new b,Bs=new b,ks=new j,ua=new j,F1=new Le,_c=new b,ha=new b,wc=new b,Ev=new j,jf=new j,Tv=new j;function hl(e){if(de.call(this),this.type="Sprite",Os===void 0){Os=new ye;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new fn(t,5);Os.setIndex([0,1,2,0,2,3]),Os.setAttribute("position",new Er(n,3,0,!1)),Os.setAttribute("uv",new Er(n,2,3,!1))}this.geometry=Os,this.material=e!==void 0?e:new Tr,this.center=new j(.5,.5)}hl.prototype=Object.assign(Object.create(de.prototype),{constructor:hl,isSprite:!0,raycast:function(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Fs.setFromMatrixScale(this.matrixWorld),F1.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Bs.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Fs.multiplyScalar(-Bs.z);const n=this.material.rotation;let i,r;n!==0&&(r=Math.cos(n),i=Math.sin(n));const s=this.center;Mc(_c.set(-.5,-.5,0),Bs,s,Fs,i,r),Mc(ha.set(.5,-.5,0),Bs,s,Fs,i,r),Mc(wc.set(.5,.5,0),Bs,s,Fs,i,r),Ev.set(0,0),jf.set(1,0),Tv.set(1,1);let o=e.ray.intersectTriangle(_c,ha,wc,!1,ca);if(o===null&&(Mc(ha.set(-.5,.5,0),Bs,s,Fs,i,r),jf.set(0,1),o=e.ray.intersectTriangle(_c,wc,ha,!1,ca),o===null))return;const a=e.ray.origin.distanceTo(ca);a<e.near||a>e.far||t.push({distance:a,point:ca.clone(),uv:Pt.getUV(ca,_c,ha,wc,Ev,jf,Tv,new j),face:null,object:this})},copy:function(e){return de.prototype.copy.call(this,e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}});function Mc(e,t,n,i,r,s){ks.subVectors(e,n).addScalar(.5).multiply(i),r!==void 0?(ua.x=s*ks.x-r*ks.y,ua.y=r*ks.x+s*ks.y):ua.copy(ks),e.copy(t),e.x+=ua.x,e.y+=ua.y,e.applyMatrix4(F1)}const bc=new b,Av=new b;function fl(){de.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}fl.prototype=Object.assign(Object.create(de.prototype),{constructor:fl,isLOD:!0,copy:function(e){de.prototype.copy.call(this,e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const r=t[n];this.addLevel(r.object.clone(),r.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){t===void 0&&(t=0),t=Math.abs(t);const n=this.levels;let i;for(i=0;i<n.length&&!(t<n[i].distance);i++);return n.splice(i,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(this.levels.length>0){bc.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(bc);this.getObjectForDistance(i).raycast(e,t)}},update:function(e){const t=this.levels;if(t.length>1){bc.setFromMatrixPosition(e.matrixWorld),Av.setFromMatrixPosition(this.matrixWorld);const n=bc.distanceTo(Av)/e.zoom;t[0].object.visible=!0;let i,r;for(i=1,r=t.length;i<r&&n>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}},toJSON:function(e){const t=de.prototype.toJSON.call(this,e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const s=n[i];t.object.levels.push({object:s.object.uuid,distance:s.distance})}return t}});function ju(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),tt.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Le,this.bindMatrixInverse=new Le}ju.prototype=Object.assign(Object.create(tt.prototype),{constructor:ju,isSkinnedMesh:!0,copy:function(e){return tt.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const e=new We,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){tt.prototype.updateMatrixWorld.call(this,e),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){const e=new b,t=new We,n=new We,i=new b,r=new Le;return function(s,o){const a=this.skeleton,l=this.geometry;t.fromBufferAttribute(l.attributes.skinIndex,s),n.fromBufferAttribute(l.attributes.skinWeight,s),e.fromBufferAttribute(l.attributes.position,s).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(let c=0;c<4;c++){const h=n.getComponent(c);if(h!==0){const u=t.getComponent(c);r.multiplyMatrices(a.bones[u].matrixWorld,a.boneInverses[u]),o.addScaledVector(i.copy(e).applyMatrix4(r),h)}}return o.applyMatrix4(this.bindMatrixInverse)}}()});const Cv=new Le,EL=new Le;function qu(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,t===void 0)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Le)}}Object.assign(qu.prototype,{calculateInverses:function(){this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++){const n=new Le;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.getInverse(this.boneInverses[e])}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.getInverse(n.parent.matrixWorld),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}},update:function(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,s=e.length;r<s;r++){const o=e[r]?e[r].matrixWorld:EL;Cv.multiplyMatrices(o,t[r]),Cv.toArray(n,r*16)}i!==void 0&&(i.needsUpdate=!0)},clone:function(){return new qu(this.bones,this.boneInverses)},getBoneByName:function(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function _p(){de.call(this),this.type="Bone"}_p.prototype=Object.assign(Object.create(de.prototype),{constructor:_p,isBone:!0});const Lv=new Le,Rv=new Le,Sc=[],fa=new tt;function Xu(e,t,n){tt.call(this,e,t),this.instanceMatrix=new we(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}Xu.prototype=Object.assign(Object.create(tt.prototype),{constructor:Xu,isInstancedMesh:!0,copy:function(e){return tt.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),this.count=e.count,this},setColorAt:function(e,t){this.instanceColor===null&&(this.instanceColor=new we(new Float32Array(this.count*3),3)),t.toArray(this.instanceColor.array,e*3)},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,e*16)},raycast:function(e,t){const n=this.matrixWorld,i=this.count;if(fa.geometry=this.geometry,fa.material=this.material,fa.material!==void 0)for(let r=0;r<i;r++){this.getMatrixAt(r,Lv),Rv.multiplyMatrices(n,Lv),fa.matrixWorld=Rv,fa.raycast(e,Sc);for(let s=0,o=Sc.length;s<o;s++){const a=Sc[s];a.instanceId=r,a.object=this,t.push(a)}Sc.length=0}},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,e*16)},updateMorphTargets:function(){}});function rt(e){Me.call(this),this.type="LineBasicMaterial",this.color=new le(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}rt.prototype=Object.create(Me.prototype);rt.prototype.constructor=rt;rt.prototype.isLineBasicMaterial=!0;rt.prototype.copy=function(e){return Me.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};const Pv=new b,Nv=new b,Iv=new Le,Ec=new Vo,Tc=new Gi;function In(e,t,n){n===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),de.call(this),this.type="Line",this.geometry=e!==void 0?e:new ye,this.material=t!==void 0?t:new rt,this.updateMorphTargets()}In.prototype=Object.assign(Object.create(de.prototype),{constructor:In,isLine:!0,copy:function(e){return de.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,r=t.count;i<r;i++)Pv.fromBufferAttribute(t,i-1),Nv.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=Pv.distanceTo(Nv);e.setAttribute("lineDistance",new ie(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;n[0]=0;for(let i=1,r=t.length;i<r;i++)n[i]=n[i-1],n[i]+=t[i-1].distanceTo(t[i])}return this},raycast:function(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),Tc.copy(n.boundingSphere),Tc.applyMatrix4(i),Tc.radius+=r,e.ray.intersectsSphere(Tc)===!1)return;Iv.getInverse(i),Ec.copy(e.ray).applyMatrix4(Iv);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,a=new b,l=new b,c=new b,h=new b,u=this.isLineSegments?2:1;if(n.isBufferGeometry){const f=n.index,m=n.attributes.position;if(f!==null){const y=f.array;for(let v=0,g=y.length-1;v<g;v+=u){const p=y[v],x=y[v+1];if(a.fromBufferAttribute(m,p),l.fromBufferAttribute(m,x),Ec.distanceSqToSegment(a,l,h,c)>o)continue;h.applyMatrix4(this.matrixWorld);const M=e.ray.origin.distanceTo(h);M<e.near||M>e.far||t.push({distance:M,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(let y=0,v=m.count-1;y<v;y+=u){if(a.fromBufferAttribute(m,y),l.fromBufferAttribute(m,y+1),Ec.distanceSqToSegment(a,l,h,c)>o)continue;h.applyMatrix4(this.matrixWorld);const p=e.ray.origin.distanceTo(h);p<e.near||p>e.far||t.push({distance:p,point:c.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else if(n.isGeometry){const f=n.vertices,d=f.length;for(let m=0;m<d-1;m+=u){if(Ec.distanceSqToSegment(f[m],f[m+1],h,c)>o)continue;h.applyMatrix4(this.matrixWorld);const v=e.ray.origin.distanceTo(h);v<e.near||v>e.far||t.push({distance:v,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){const o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const Ac=new b,Cc=new b;function Jt(e,t){In.call(this,e,t),this.type="LineSegments"}Jt.prototype=Object.assign(Object.create(In.prototype),{constructor:Jt,isLineSegments:!0,computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,r=t.count;i<r;i+=2)Ac.fromBufferAttribute(t,i),Cc.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+Ac.distanceTo(Cc);e.setAttribute("lineDistance",new ie(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;for(let i=0,r=t.length;i<r;i+=2)Ac.copy(t[i]),Cc.copy(t[i+1]),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+Ac.distanceTo(Cc)}return this}});function Yu(e,t){In.call(this,e,t),this.type="LineLoop"}Yu.prototype=Object.assign(Object.create(In.prototype),{constructor:Yu,isLineLoop:!0});function Yn(e){Me.call(this),this.type="PointsMaterial",this.color=new le(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}Yn.prototype=Object.create(Me.prototype);Yn.prototype.constructor=Yn;Yn.prototype.isPointsMaterial=!0;Yn.prototype.copy=function(e){return Me.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};const Dv=new Le,wp=new Vo,Lc=new Gi,Rc=new b;function Ao(e,t){de.call(this),this.type="Points",this.geometry=e!==void 0?e:new ye,this.material=t!==void 0?t:new Yn,this.updateMorphTargets()}Ao.prototype=Object.assign(Object.create(de.prototype),{constructor:Ao,isPoints:!0,copy:function(e){return de.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),Lc.copy(n.boundingSphere),Lc.applyMatrix4(i),Lc.radius+=r,e.ray.intersectsSphere(Lc)===!1)return;Dv.getInverse(i),wp.copy(e.ray).applyMatrix4(Dv);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s;if(n.isBufferGeometry){const a=n.index,c=n.attributes.position;if(a!==null){const h=a.array;for(let u=0,f=h.length;u<f;u++){const d=h[u];Rc.fromBufferAttribute(c,d),qf(Rc,d,o,i,e,t,this)}}else for(let h=0,u=c.count;h<u;h++)Rc.fromBufferAttribute(c,h),qf(Rc,h,o,i,e,t,this)}else{const a=n.vertices;for(let l=0,c=a.length;l<c;l++)qf(a[l],l,o,i,e,t,this)}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){const o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});function qf(e,t,n,i,r,s,o){const a=wp.distanceSqToPoint(e);if(a<n){const l=new b;wp.closestPointToPoint(e,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:t,face:null,object:o})}}function Mp(e,t,n,i,r,s,o,a,l){qe.call(this,e,t,n,i,r,s,o,a,l),this.format=o!==void 0?o:mr,this.minFilter=s!==void 0?s:At,this.magFilter=r!==void 0?r:At,this.generateMipmaps=!1;const c=this;function h(){c.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}Mp.prototype=Object.assign(Object.create(qe.prototype),{constructor:Mp,isVideoTexture:!0,update:function(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function Co(e,t,n,i,r,s,o,a,l,c,h,u){qe.call(this,null,s,o,a,l,c,i,r,h,u),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}Co.prototype=Object.create(qe.prototype);Co.prototype.constructor=Co;Co.prototype.isCompressedTexture=!0;function dl(e,t,n,i,r,s,o,a,l){qe.call(this,e,t,n,i,r,s,o,a,l),this.needsUpdate=!0}dl.prototype=Object.create(qe.prototype);dl.prototype.constructor=dl;dl.prototype.isCanvasTexture=!0;function pl(e,t,n,i,r,s,o,a,l,c){if(c=c!==void 0?c:es,c!==es&&c!==Mo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&c===es&&(n=el),n===void 0&&c===Mo&&(n=ho),qe.call(this,null,i,r,s,o,a,c,n,l),this.image={width:e,height:t},this.magFilter=o!==void 0?o:Mt,this.minFilter=a!==void 0?a:Mt,this.flipY=!1,this.generateMipmaps=!1}pl.prototype=Object.create(qe.prototype);pl.prototype.constructor=pl;pl.prototype.isDepthTexture=!0;let TL=0;const ti=new Le,Xf=new de,Pc=new b;function je(){Object.defineProperty(this,"id",{value:TL+=2}),this.uuid=Se.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}je.prototype=Object.assign(Object.create(gi.prototype),{constructor:je,isGeometry:!0,applyMatrix4:function(e){const t=new qt().getNormalMatrix(e);for(let n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(e);for(let n=0,i=this.faces.length;n<i;n++){const r=this.faces[n];r.normal.applyMatrix3(t).normalize();for(let s=0,o=r.vertexNormals.length;s<o;s++)r.vertexNormals[s].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return ti.makeRotationX(e),this.applyMatrix4(ti),this},rotateY:function(e){return ti.makeRotationY(e),this.applyMatrix4(ti),this},rotateZ:function(e){return ti.makeRotationZ(e),this.applyMatrix4(ti),this},translate:function(e,t,n){return ti.makeTranslation(e,t,n),this.applyMatrix4(ti),this},scale:function(e,t,n){return ti.makeScale(e,t,n),this.applyMatrix4(ti),this},lookAt:function(e){return Xf.lookAt(e),Xf.updateMatrix(),this.applyMatrix4(Xf.matrix),this},fromBufferGeometry:function(e){const t=this,n=e.index!==null?e.index:void 0,i=e.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const r=i.position,s=i.normal,o=i.color,a=i.uv,l=i.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let u=0;u<r.count;u++)t.vertices.push(new b().fromBufferAttribute(r,u)),o!==void 0&&t.colors.push(new le().fromBufferAttribute(o,u));function c(u,f,d,m){const y=o===void 0?[]:[t.colors[u].clone(),t.colors[f].clone(),t.colors[d].clone()],v=s===void 0?[]:[new b().fromBufferAttribute(s,u),new b().fromBufferAttribute(s,f),new b().fromBufferAttribute(s,d)],g=new rl(u,f,d,v,y,m);t.faces.push(g),a!==void 0&&t.faceVertexUvs[0].push([new j().fromBufferAttribute(a,u),new j().fromBufferAttribute(a,f),new j().fromBufferAttribute(a,d)]),l!==void 0&&t.faceVertexUvs[1].push([new j().fromBufferAttribute(l,u),new j().fromBufferAttribute(l,f),new j().fromBufferAttribute(l,d)])}const h=e.groups;if(h.length>0)for(let u=0;u<h.length;u++){const f=h[u],d=f.start,m=f.count;for(let y=d,v=d+m;y<v;y+=3)n!==void 0?c(n.getX(y),n.getX(y+1),n.getX(y+2),f.materialIndex):c(y,y+1,y+2,f.materialIndex)}else if(n!==void 0)for(let u=0;u<n.count;u+=3)c(n.getX(u),n.getX(u+1),n.getX(u+2));else for(let u=0;u<r.count;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Pc).negate(),this.translate(Pc.x,Pc.y,Pc.z),this},normalize:function(){this.computeBoundingSphere();const e=this.boundingSphere.center,t=this.boundingSphere.radius,n=t===0?1:1/t,i=new Le;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){const e=new b,t=new b;for(let n=0,i=this.faces.length;n<i;n++){const r=this.faces[n],s=this.vertices[r.a],o=this.vertices[r.b],a=this.vertices[r.c];e.subVectors(a,o),t.subVectors(s,o),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){e===void 0&&(e=!0);const t=new Array(this.vertices.length);for(let n=0,i=this.vertices.length;n<i;n++)t[n]=new b;if(e){const n=new b,i=new b;for(let r=0,s=this.faces.length;r<s;r++){const o=this.faces[r],a=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c];n.subVectors(c,l),i.subVectors(a,l),n.cross(i),t[o.a].add(n),t[o.b].add(n),t[o.c].add(n)}}else{this.computeFaceNormals();for(let n=0,i=this.faces.length;n<i;n++){const r=this.faces[n];t[r.a].add(r.normal),t[r.b].add(r.normal),t[r.c].add(r.normal)}}for(let n=0,i=this.vertices.length;n<i;n++)t[n].normalize();for(let n=0,i=this.faces.length;n<i;n++){const r=this.faces[n],s=r.vertexNormals;s.length===3?(s[0].copy(t[r.a]),s[1].copy(t[r.b]),s[2].copy(t[r.c])):(s[0]=t[r.a].clone(),s[1]=t[r.b].clone(),s[2]=t[r.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){const n=this.faces[e],i=n.vertexNormals;i.length===3?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let t=0,n=this.faces.length;t<n;t++){const i=this.faces[t];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let r=0,s=i.vertexNormals.length;r<s;r++)i.__originalVertexNormals[r]?i.__originalVertexNormals[r].copy(i.vertexNormals[r]):i.__originalVertexNormals[r]=i.vertexNormals[r].clone()}const e=new je;e.faces=this.faces;for(let t=0,n=this.morphTargets.length;t<n;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];const r=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(let o=0,a=this.faces.length;o<a;o++){const l=new b,c={a:new b,b:new b,c:new b};r.push(l),s.push(c)}}const i=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let r=0,s=this.faces.length;r<s;r++){const o=this.faces[r],a=i.faceNormals[r],l=i.vertexNormals[r];a.copy(o.normal),l.a.copy(o.vertexNormals[0]),l.b.copy(o.vertexNormals[1]),l.c.copy(o.vertexNormals[2])}}for(let t=0,n=this.faces.length;t<n;t++){const i=this.faces[t];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new yi),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Gi),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let i;const r=this.vertices.length,s=this.vertices,o=e.vertices,a=this.faces,l=e.faces,c=this.colors,h=e.colors;n===void 0&&(n=0),t!==void 0&&(i=new qt().getNormalMatrix(t));for(let u=0,f=o.length;u<f;u++){const m=o[u].clone();t!==void 0&&m.applyMatrix4(t),s.push(m)}for(let u=0,f=h.length;u<f;u++)c.push(h[u].clone());for(let u=0,f=l.length;u<f;u++){const d=l[u];let m,y;const v=d.vertexNormals,g=d.vertexColors,p=new rl(d.a+r,d.b+r,d.c+r);p.normal.copy(d.normal),i!==void 0&&p.normal.applyMatrix3(i).normalize();for(let x=0,w=v.length;x<w;x++)m=v[x].clone(),i!==void 0&&m.applyMatrix3(i).normalize(),p.vertexNormals.push(m);p.color.copy(d.color);for(let x=0,w=g.length;x<w;x++)y=g[x],p.vertexColors.push(y.clone());p.materialIndex=d.materialIndex+n,a.push(p)}for(let u=0,f=e.faceVertexUvs.length;u<f;u++){const d=e.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let m=0,y=d.length;m<y;m++){const v=d[m],g=[];for(let p=0,x=v.length;p<x;p++)g.push(v[p].clone());this.faceVertexUvs[u].push(g)}}},mergeMesh:function(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)},mergeVertices:function(){const e={},t=[],n=[],r=Math.pow(10,4);for(let a=0,l=this.vertices.length;a<l;a++){const c=this.vertices[a],h=Math.round(c.x*r)+"_"+Math.round(c.y*r)+"_"+Math.round(c.z*r);e[h]===void 0?(e[h]=a,t.push(this.vertices[a]),n[a]=t.length-1):n[a]=n[e[h]]}const s=[];for(let a=0,l=this.faces.length;a<l;a++){const c=this.faces[a];c.a=n[c.a],c.b=n[c.b],c.c=n[c.c];const h=[c.a,c.b,c.c];for(let u=0;u<3;u++)if(h[u]===h[(u+1)%3]){s.push(a);break}}for(let a=s.length-1;a>=0;a--){const l=s[a];this.faces.splice(l,1);for(let c=0,h=this.faceVertexUvs.length;c<h;c++)this.faceVertexUvs[c].splice(l,1)}const o=this.vertices.length-t.length;return this.vertices=t,o},setFromPoints:function(e){this.vertices=[];for(let t=0,n=e.length;t<n;t++){const i=e[t];this.vertices.push(new b(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){const e=this.faces,t=e.length;for(let a=0;a<t;a++)e[a]._id=a;function n(a,l){return a.materialIndex-l.materialIndex}e.sort(n);const i=this.faceVertexUvs[0],r=this.faceVertexUvs[1];let s,o;i&&i.length===t&&(s=[]),r&&r.length===t&&(o=[]);for(let a=0;a<t;a++){const l=e[a]._id;s&&s.push(i[l]),o&&o.push(r[l])}s&&(this.faceVertexUvs[0]=s),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){const e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){const d=this.parameters;for(const m in d)d[m]!==void 0&&(e[m]=d[m]);return e}const t=[];for(let d=0;d<this.vertices.length;d++){const m=this.vertices[d];t.push(m.x,m.y,m.z)}const n=[],i=[],r={},s=[],o={},a=[],l={};for(let d=0;d<this.faces.length;d++){const m=this.faces[d],y=!0,v=!1,g=this.faceVertexUvs[0][d]!==void 0,p=m.normal.length()>0,x=m.vertexNormals.length>0,w=m.color.r!==1||m.color.g!==1||m.color.b!==1,M=m.vertexColors.length>0;let _=0;if(_=c(_,0,0),_=c(_,1,y),_=c(_,2,v),_=c(_,3,g),_=c(_,4,p),_=c(_,5,x),_=c(_,6,w),_=c(_,7,M),n.push(_),n.push(m.a,m.b,m.c),n.push(m.materialIndex),g){const S=this.faceVertexUvs[0][d];n.push(f(S[0]),f(S[1]),f(S[2]))}if(p&&n.push(h(m.normal)),x){const S=m.vertexNormals;n.push(h(S[0]),h(S[1]),h(S[2]))}if(w&&n.push(u(m.color)),M){const S=m.vertexColors;n.push(u(S[0]),u(S[1]),u(S[2]))}}function c(d,m,y){return y?d|1<<m:d&~(1<<m)}function h(d){const m=d.x.toString()+d.y.toString()+d.z.toString();return r[m]!==void 0||(r[m]=i.length/3,i.push(d.x,d.y,d.z)),r[m]}function u(d){const m=d.r.toString()+d.g.toString()+d.b.toString();return o[m]!==void 0||(o[m]=s.length,s.push(d.getHex())),o[m]}function f(d){const m=d.x.toString()+d.y.toString();return l[m]!==void 0||(l[m]=a.length/2,a.push(d.x,d.y)),l[m]}return e.data={},e.data.vertices=t,e.data.normals=i,s.length>0&&(e.data.colors=s),a.length>0&&(e.data.uvs=[a]),e.data.faces=n,e},clone:function(){return new je().copy(this)},copy:function(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;const t=e.vertices;for(let u=0,f=t.length;u<f;u++)this.vertices.push(t[u].clone());const n=e.colors;for(let u=0,f=n.length;u<f;u++)this.colors.push(n[u].clone());const i=e.faces;for(let u=0,f=i.length;u<f;u++)this.faces.push(i[u].clone());for(let u=0,f=e.faceVertexUvs.length;u<f;u++){const d=e.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let m=0,y=d.length;m<y;m++){const v=d[m],g=[];for(let p=0,x=v.length;p<x;p++){const w=v[p];g.push(w.clone())}this.faceVertexUvs[u].push(g)}}const r=e.morphTargets;for(let u=0,f=r.length;u<f;u++){const d={};if(d.name=r[u].name,r[u].vertices!==void 0){d.vertices=[];for(let m=0,y=r[u].vertices.length;m<y;m++)d.vertices.push(r[u].vertices[m].clone())}if(r[u].normals!==void 0){d.normals=[];for(let m=0,y=r[u].normals.length;m<y;m++)d.normals.push(r[u].normals[m].clone())}this.morphTargets.push(d)}const s=e.morphNormals;for(let u=0,f=s.length;u<f;u++){const d={};if(s[u].vertexNormals!==void 0){d.vertexNormals=[];for(let m=0,y=s[u].vertexNormals.length;m<y;m++){const v=s[u].vertexNormals[m],g={};g.a=v.a.clone(),g.b=v.b.clone(),g.c=v.c.clone(),d.vertexNormals.push(g)}}if(s[u].faceNormals!==void 0){d.faceNormals=[];for(let m=0,y=s[u].faceNormals.length;m<y;m++)d.faceNormals.push(s[u].faceNormals[m].clone())}this.morphNormals.push(d)}const o=e.skinWeights;for(let u=0,f=o.length;u<f;u++)this.skinWeights.push(o[u].clone());const a=e.skinIndices;for(let u=0,f=a.length;u<f;u++)this.skinIndices.push(a[u].clone());const l=e.lineDistances;for(let u=0,f=l.length;u<f;u++)this.lineDistances.push(l[u]);const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class bp extends je{constructor(t,n,i,r,s,o){super(),this.type="BoxGeometry",this.parameters={width:t,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o},this.fromBufferGeometry(new Bl(t,n,i,r,s,o)),this.mergeVertices()}}class Jm extends ye{constructor(t,n,i,r){super(),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:n,thetaStart:i,thetaLength:r},t=t||1,n=n!==void 0?Math.max(3,n):8,i=i!==void 0?i:0,r=r!==void 0?r:Math.PI*2;const s=[],o=[],a=[],l=[],c=new b,h=new j;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let u=0,f=3;u<=n;u++,f+=3){const d=i+u/n*r;c.x=t*Math.cos(d),c.y=t*Math.sin(d),o.push(c.x,c.y,c.z),a.push(0,0,1),h.x=(o[f]/t+1)/2,h.y=(o[f+1]/t+1)/2,l.push(h.x,h.y)}for(let u=1;u<=n;u++)s.push(u,u+1,0);this.setIndex(s),this.setAttribute("position",new ie(o,3)),this.setAttribute("normal",new ie(a,3)),this.setAttribute("uv",new ie(l,2))}}class B1 extends je{constructor(t,n,i,r){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:n,thetaStart:i,thetaLength:r},this.fromBufferGeometry(new Jm(t,n,i,r)),this.mergeVertices()}}class Ul extends ye{constructor(t,n,i,r,s,o,a,l){super(),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;t=t!==void 0?t:1,n=n!==void 0?n:1,i=i||1,r=Math.floor(r)||8,s=Math.floor(s)||1,o=o!==void 0?o:!1,a=a!==void 0?a:0,l=l!==void 0?l:Math.PI*2;const h=[],u=[],f=[],d=[];let m=0;const y=[],v=i/2;let g=0;p(),o===!1&&(t>0&&x(!0),n>0&&x(!1)),this.setIndex(h),this.setAttribute("position",new ie(u,3)),this.setAttribute("normal",new ie(f,3)),this.setAttribute("uv",new ie(d,2));function p(){const w=new b,M=new b;let _=0;const S=(n-t)/i;for(let C=0;C<=s;C++){const L=[],D=C/s,I=D*(n-t)+t;for(let O=0;O<=r;O++){const B=O/r,P=B*l+a,N=Math.sin(P),z=Math.cos(P);M.x=I*N,M.y=-D*i+v,M.z=I*z,u.push(M.x,M.y,M.z),w.set(N,S,z).normalize(),f.push(w.x,w.y,w.z),d.push(B,1-D),L.push(m++)}y.push(L)}for(let C=0;C<r;C++)for(let L=0;L<s;L++){const D=y[L][C],I=y[L+1][C],O=y[L+1][C+1],B=y[L][C+1];h.push(D,I,B),h.push(I,O,B),_+=6}c.addGroup(g,_,0),g+=_}function x(w){const M=m,_=new j,S=new b;let C=0;const L=w===!0?t:n,D=w===!0?1:-1;for(let O=1;O<=r;O++)u.push(0,v*D,0),f.push(0,D,0),d.push(.5,.5),m++;const I=m;for(let O=0;O<=r;O++){const P=O/r*l+a,N=Math.cos(P),z=Math.sin(P);S.x=L*z,S.y=v*D,S.z=L*N,u.push(S.x,S.y,S.z),f.push(0,D,0),_.x=N*.5+.5,_.y=z*.5*D+.5,d.push(_.x,_.y),m++}for(let O=0;O<r;O++){const B=M+O,P=I+O;w===!0?h.push(P,P+1,B):h.push(P+1,P,B),C+=3}c.addGroup(g,C,w===!0?1:2),g+=C}}}class Zm extends je{constructor(t,n,i,r,s,o,a,l){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l},this.fromBufferGeometry(new Ul(t,n,i,r,s,o,a,l)),this.mergeVertices()}}class k1 extends Zm{constructor(t,n,i,r,s,o,a){super(0,t,n,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}}class z1 extends Ul{constructor(t,n,i,r,s,o,a){super(0,t,n,i,r,s,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}}class _s extends ye{constructor(t,n,i,r){super(),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:n,radius:i,detail:r},i=i||1,r=r||0;const s=[],o=[];a(r),c(i),h(),this.setAttribute("position",new ie(s,3)),this.setAttribute("normal",new ie(s.slice(),3)),this.setAttribute("uv",new ie(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(p){const x=new b,w=new b,M=new b;for(let _=0;_<n.length;_+=3)d(n[_+0],x),d(n[_+1],w),d(n[_+2],M),l(x,w,M,p)}function l(p,x,w,M){const _=M+1,S=[];for(let C=0;C<=_;C++){S[C]=[];const L=p.clone().lerp(w,C/_),D=x.clone().lerp(w,C/_),I=_-C;for(let O=0;O<=I;O++)O===0&&C===_?S[C][O]=L:S[C][O]=L.clone().lerp(D,O/I)}for(let C=0;C<_;C++)for(let L=0;L<2*(_-C)-1;L++){const D=Math.floor(L/2);L%2===0?(f(S[C][D+1]),f(S[C+1][D]),f(S[C][D])):(f(S[C][D+1]),f(S[C+1][D+1]),f(S[C+1][D]))}}function c(p){const x=new b;for(let w=0;w<s.length;w+=3)x.x=s[w+0],x.y=s[w+1],x.z=s[w+2],x.normalize().multiplyScalar(p),s[w+0]=x.x,s[w+1]=x.y,s[w+2]=x.z}function h(){const p=new b;for(let x=0;x<s.length;x+=3){p.x=s[x+0],p.y=s[x+1],p.z=s[x+2];const w=v(p)/2/Math.PI+.5,M=g(p)/Math.PI+.5;o.push(w,1-M)}m(),u()}function u(){for(let p=0;p<o.length;p+=6){const x=o[p+0],w=o[p+2],M=o[p+4],_=Math.max(x,w,M),S=Math.min(x,w,M);_>.9&&S<.1&&(x<.2&&(o[p+0]+=1),w<.2&&(o[p+2]+=1),M<.2&&(o[p+4]+=1))}}function f(p){s.push(p.x,p.y,p.z)}function d(p,x){const w=p*3;x.x=t[w+0],x.y=t[w+1],x.z=t[w+2]}function m(){const p=new b,x=new b,w=new b,M=new b,_=new j,S=new j,C=new j;for(let L=0,D=0;L<s.length;L+=9,D+=6){p.set(s[L+0],s[L+1],s[L+2]),x.set(s[L+3],s[L+4],s[L+5]),w.set(s[L+6],s[L+7],s[L+8]),_.set(o[D+0],o[D+1]),S.set(o[D+2],o[D+3]),C.set(o[D+4],o[D+5]),M.copy(p).add(x).add(w).divideScalar(3);const I=v(M);y(_,D+0,p,I),y(S,D+2,x,I),y(C,D+4,w,I)}}function y(p,x,w,M){M<0&&p.x===1&&(o[x]=p.x-1),w.x===0&&w.z===0&&(o[x]=M/2/Math.PI+.5)}function v(p){return Math.atan2(p.z,-p.x)}function g(p){return Math.atan2(-p.y,Math.sqrt(p.x*p.x+p.z*p.z))}}}class Qm extends _s{constructor(t,n){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,t,n),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:n}}}class U1 extends je{constructor(t,n){super(),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:n},this.fromBufferGeometry(new Qm(t,n)),this.mergeVertices()}}const Nc=new b,Ic=new b,Yf=new b,Dc=new Pt;class Km extends ye{constructor(t,n){super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:n},n=n!==void 0?n:1,t.isGeometry&&(t=new ye().fromGeometry(t));const r=Math.pow(10,4),s=Math.cos(Se.DEG2RAD*n),o=t.getIndex(),a=t.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],h=["a","b","c"],u=new Array(3),f={},d=[];for(let m=0;m<l;m+=3){o?(c[0]=o.getX(m),c[1]=o.getX(m+1),c[2]=o.getX(m+2)):(c[0]=m,c[1]=m+1,c[2]=m+2);const{a:y,b:v,c:g}=Dc;if(y.fromBufferAttribute(a,c[0]),v.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),Dc.getNormal(Yf),u[0]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,u[1]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,u[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(u[0]===u[1]||u[1]===u[2]||u[2]===u[0]))for(let p=0;p<3;p++){const x=(p+1)%3,w=u[p],M=u[x],_=Dc[h[p]],S=Dc[h[x]],C=`${w}_${M}`,L=`${M}_${w}`;L in f&&f[L]?(Yf.dot(f[L].normal)<=s&&(d.push(_.x,_.y,_.z),d.push(S.x,S.y,S.z)),f[L]=null):C in f||(f[C]={index0:c[p],index1:c[x],normal:Yf.clone()})}}for(const m in f)if(f[m]){const{index0:y,index1:v}=f[m];Nc.fromBufferAttribute(a,y),Ic.fromBufferAttribute(a,v),d.push(Nc.x,Nc.y,Nc.z),d.push(Ic.x,Ic.y,Ic.z)}this.setAttribute("position",new ie(d,3))}}const AL={triangulate:function(e,t,n){n=n||2;const i=t&&t.length,r=i?t[0]*n:e.length;let s=H1(e,0,r,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,h,u,f,d;if(i&&(s=NL(e,t,s,n)),e.length>80*n){a=c=e[0],l=h=e[1];for(let m=n;m<r;m+=n)u=e[m],f=e[m+1],u<a&&(a=u),f<l&&(l=f),u>c&&(c=u),f>h&&(h=f);d=Math.max(c-a,h-l),d=d!==0?1/d:0}return ml(s,o,n,a,l,d),o}};function H1(e,t,n,i,r){let s,o;if(r===VL(e,t,n,i)>0)for(s=t;s<n;s+=i)o=Ov(s,e[s],e[s+1],o);else for(s=n-i;s>=t;s-=i)o=Ov(s,e[s],e[s+1],o);return o&&Gh(o,o.next)&&(yl(o),o=o.next),o}function Ar(e,t){if(!e)return e;t||(t=e);let n=e,i;do if(i=!1,!n.steiner&&(Gh(n,n.next)||at(n.prev,n,n.next)===0)){if(yl(n),n=t=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==t);return t}function ml(e,t,n,i,r,s,o){if(!e)return;!o&&s&&BL(e,i,r,s);let a=e,l,c;for(;e.prev!==e.next;){if(l=e.prev,c=e.next,s?LL(e,i,r,s):CL(e)){t.push(l.i/n),t.push(e.i/n),t.push(c.i/n),yl(e),e=c.next,a=c.next;continue}if(e=c,e===a){o?o===1?(e=RL(Ar(e),t,n),ml(e,t,n,i,r,s,2)):o===2&&PL(e,t,n,i,r,s):ml(Ar(e),t,n,i,r,s,1);break}}}function CL(e){const t=e.prev,n=e,i=e.next;if(at(t,n,i)>=0)return!1;let r=e.next.next;for(;r!==e.prev;){if(io(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&at(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function LL(e,t,n,i){const r=e.prev,s=e,o=e.next;if(at(r,s,o)>=0)return!1;const a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,l=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,c=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,h=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,u=Sp(a,l,t,n,i),f=Sp(c,h,t,n,i);let d=e.prevZ,m=e.nextZ;for(;d&&d.z>=u&&m&&m.z<=f;){if(d!==e.prev&&d!==e.next&&io(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&at(d.prev,d,d.next)>=0||(d=d.prevZ,m!==e.prev&&m!==e.next&&io(r.x,r.y,s.x,s.y,o.x,o.y,m.x,m.y)&&at(m.prev,m,m.next)>=0))return!1;m=m.nextZ}for(;d&&d.z>=u;){if(d!==e.prev&&d!==e.next&&io(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&at(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;m&&m.z<=f;){if(m!==e.prev&&m!==e.next&&io(r.x,r.y,s.x,s.y,o.x,o.y,m.x,m.y)&&at(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function RL(e,t,n){let i=e;do{const r=i.prev,s=i.next.next;!Gh(r,s)&&G1(r,i,i.next,s)&&gl(r,s)&&gl(s,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(s.i/n),yl(i),yl(i.next),i=e=s),i=i.next}while(i!==e);return Ar(i)}function PL(e,t,n,i,r,s){let o=e;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&UL(o,a)){let l=V1(o,a);o=Ar(o,o.next),l=Ar(l,l.next),ml(o,t,n,i,r,s),ml(l,t,n,i,r,s);return}a=a.next}o=o.next}while(o!==e)}function NL(e,t,n,i){const r=[];let s,o,a,l,c;for(s=0,o=t.length;s<o;s++)a=t[s]*i,l=s<o-1?t[s+1]*i:e.length,c=H1(e,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(zL(c));for(r.sort(IL),s=0;s<r.length;s++)DL(r[s],n),n=Ar(n,n.next);return n}function IL(e,t){return e.x-t.x}function DL(e,t){if(t=OL(e,t),t){const n=V1(t,e);Ar(t,t.next),Ar(n,n.next)}}function OL(e,t){let n=t;const i=e.x,r=e.y;let s=-1/0,o;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const f=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(f<=i&&f>s){if(s=f,f===i){if(r===n.y)return n;if(r===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(i===s)return o;const a=o,l=o.x,c=o.y;let h=1/0,u;n=o;do i>=n.x&&n.x>=l&&i!==n.x&&io(r<c?i:s,r,l,c,r<c?s:i,r,n.x,n.y)&&(u=Math.abs(r-n.y)/(i-n.x),gl(n,e)&&(u<h||u===h&&(n.x>o.x||n.x===o.x&&FL(o,n)))&&(o=n,h=u)),n=n.next;while(n!==a);return o}function FL(e,t){return at(e.prev,e,t.prev)<0&&at(t.next,e,e.next)<0}function BL(e,t,n,i){let r=e;do r.z===null&&(r.z=Sp(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,kL(r)}function kL(e){let t,n,i,r,s,o,a,l,c=1;do{for(n=e,e=null,s=null,o=0;n;){for(o++,i=n,a=0,t=0;t<c&&(a++,i=i.nextZ,!!i);t++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:e=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(o>1);return e}function Sp(e,t,n,i,r){return e=32767*(e-n)*r,t=32767*(t-i)*r,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function zL(e){let t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}function io(e,t,n,i,r,s,o,a){return(r-o)*(t-a)-(e-o)*(s-a)>=0&&(e-o)*(i-a)-(n-o)*(t-a)>=0&&(n-o)*(s-a)-(r-o)*(i-a)>=0}function UL(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!HL(e,t)&&(gl(e,t)&&gl(t,e)&&GL(e,t)&&(at(e.prev,e,t.prev)||at(e,t.prev,t))||Gh(e,t)&&at(e.prev,e,e.next)>0&&at(t.prev,t,t.next)>0)}function at(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Gh(e,t){return e.x===t.x&&e.y===t.y}function G1(e,t,n,i){const r=Fc(at(e,t,n)),s=Fc(at(e,t,i)),o=Fc(at(n,i,e)),a=Fc(at(n,i,t));return!!(r!==s&&o!==a||r===0&&Oc(e,n,t)||s===0&&Oc(e,i,t)||o===0&&Oc(n,e,i)||a===0&&Oc(n,t,i))}function Oc(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Fc(e){return e>0?1:e<0?-1:0}function HL(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&G1(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function gl(e,t){return at(e.prev,e,e.next)<0?at(e,t,e.next)>=0&&at(e,e.prev,t)>=0:at(e,t,e.prev)<0||at(e,e.next,t)<0}function GL(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,s=(e.y+t.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==e);return i}function V1(e,t){const n=new Ep(e.i,e.x,e.y),i=new Ep(t.i,t.x,t.y),r=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function Ov(e,t,n,i){const r=new Ep(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function yl(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Ep(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function VL(e,t,n,i){let r=0;for(let s=t,o=n-i;s<n;s+=i)r+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return r}const Di={area:function(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return n*.5},isClockWise:function(e){return Di.area(e)<0},triangulateShape:function(e,t){const n=[],i=[],r=[];Fv(e),Bv(n,e);let s=e.length;t.forEach(Fv);for(let a=0;a<t.length;a++)i.push(s),s+=t[a].length,Bv(n,t[a]);const o=AL.triangulate(n,i);for(let a=0;a<o.length;a+=3)r.push(o.slice(a,a+3));return r}};function Fv(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Bv(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Hl extends ye{constructor(t,n){super(),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:n},t=Array.isArray(t)?t:[t];const i=this,r=[],s=[];for(let a=0,l=t.length;a<l;a++){const c=t[a];o(c)}this.setAttribute("position",new ie(r,3)),this.setAttribute("uv",new ie(s,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,h=n.steps!==void 0?n.steps:1;let u=n.depth!==void 0?n.depth:100,f=n.bevelEnabled!==void 0?n.bevelEnabled:!0,d=n.bevelThickness!==void 0?n.bevelThickness:6,m=n.bevelSize!==void 0?n.bevelSize:d-2,y=n.bevelOffset!==void 0?n.bevelOffset:0,v=n.bevelSegments!==void 0?n.bevelSegments:3;const g=n.extrudePath,p=n.UVGenerator!==void 0?n.UVGenerator:WL;n.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=n.amount);let x,w=!1,M,_,S,C;g&&(x=g.getSpacedPoints(h),w=!0,f=!1,M=g.computeFrenetFrames(h,!1),_=new b,S=new b,C=new b),f||(v=0,d=0,m=0,y=0);const L=a.extractPoints(c);let D=L.shape;const I=L.holes;if(!Di.isClockWise(D)){D=D.reverse();for(let J=0,ee=I.length;J<ee;J++){const ne=I[J];Di.isClockWise(ne)&&(I[J]=ne.reverse())}}const B=Di.triangulateShape(D,I),P=D;for(let J=0,ee=I.length;J<ee;J++){const ne=I[J];D=D.concat(ne)}function N(J,ee,ne){return ee||console.error("THREE.ExtrudeGeometry: vec does not exist"),ee.clone().multiplyScalar(ne).add(J)}const z=D.length,Y=B.length;function F(J,ee,ne){let xe,ae,A;const E=J.x-ee.x,Q=J.y-ee.y,X=ne.x-J.x,R=ne.y-J.y,K=E*E+Q*Q,oe=E*R-Q*X;if(Math.abs(oe)>Number.EPSILON){const me=Math.sqrt(K),te=Math.sqrt(X*X+R*R),pe=ee.x-Q/me,_e=ee.y+E/me,Te=ne.x-R/te,fe=ne.y+X/te,be=((Te-pe)*R-(fe-_e)*X)/(E*R-Q*X);xe=pe+E*be-J.x,ae=_e+Q*be-J.y;const st=xe*xe+ae*ae;if(st<=2)return new j(xe,ae);A=Math.sqrt(st/2)}else{let me=!1;E>Number.EPSILON?X>Number.EPSILON&&(me=!0):E<-Number.EPSILON?X<-Number.EPSILON&&(me=!0):Math.sign(Q)===Math.sign(R)&&(me=!0),me?(xe=-Q,ae=E,A=Math.sqrt(K)):(xe=E,ae=Q,A=Math.sqrt(K/2))}return new j(xe/A,ae/A)}const G=[];for(let J=0,ee=P.length,ne=ee-1,xe=J+1;J<ee;J++,ne++,xe++)ne===ee&&(ne=0),xe===ee&&(xe=0),G[J]=F(P[J],P[ne],P[xe]);const q=[];let Z,he=G.concat();for(let J=0,ee=I.length;J<ee;J++){const ne=I[J];Z=[];for(let xe=0,ae=ne.length,A=ae-1,E=xe+1;xe<ae;xe++,A++,E++)A===ae&&(A=0),E===ae&&(E=0),Z[xe]=F(ne[xe],ne[A],ne[E]);q.push(Z),he=he.concat(Z)}for(let J=0;J<v;J++){const ee=J/v,ne=d*Math.cos(ee*Math.PI/2),xe=m*Math.sin(ee*Math.PI/2)+y;for(let ae=0,A=P.length;ae<A;ae++){const E=N(P[ae],G[ae],xe);ve(E.x,E.y,-ne)}for(let ae=0,A=I.length;ae<A;ae++){const E=I[ae];Z=q[ae];for(let Q=0,X=E.length;Q<X;Q++){const R=N(E[Q],Z[Q],xe);ve(R.x,R.y,-ne)}}}const Ee=m+y;for(let J=0;J<z;J++){const ee=f?N(D[J],he[J],Ee):D[J];w?(S.copy(M.normals[0]).multiplyScalar(ee.x),_.copy(M.binormals[0]).multiplyScalar(ee.y),C.copy(x[0]).add(S).add(_),ve(C.x,C.y,C.z)):ve(ee.x,ee.y,0)}for(let J=1;J<=h;J++)for(let ee=0;ee<z;ee++){const ne=f?N(D[ee],he[ee],Ee):D[ee];w?(S.copy(M.normals[J]).multiplyScalar(ne.x),_.copy(M.binormals[J]).multiplyScalar(ne.y),C.copy(x[J]).add(S).add(_),ve(C.x,C.y,C.z)):ve(ne.x,ne.y,u/h*J)}for(let J=v-1;J>=0;J--){const ee=J/v,ne=d*Math.cos(ee*Math.PI/2),xe=m*Math.sin(ee*Math.PI/2)+y;for(let ae=0,A=P.length;ae<A;ae++){const E=N(P[ae],G[ae],xe);ve(E.x,E.y,u+ne)}for(let ae=0,A=I.length;ae<A;ae++){const E=I[ae];Z=q[ae];for(let Q=0,X=E.length;Q<X;Q++){const R=N(E[Q],Z[Q],xe);w?ve(R.x,R.y+x[h-1].y,x[h-1].x+ne):ve(R.x,R.y,u+ne)}}}Ue(),W();function Ue(){const J=r.length/3;if(f){let ee=0,ne=z*ee;for(let xe=0;xe<Y;xe++){const ae=B[xe];ke(ae[2]+ne,ae[1]+ne,ae[0]+ne)}ee=h+v*2,ne=z*ee;for(let xe=0;xe<Y;xe++){const ae=B[xe];ke(ae[0]+ne,ae[1]+ne,ae[2]+ne)}}else{for(let ee=0;ee<Y;ee++){const ne=B[ee];ke(ne[2],ne[1],ne[0])}for(let ee=0;ee<Y;ee++){const ne=B[ee];ke(ne[0]+z*h,ne[1]+z*h,ne[2]+z*h)}}i.addGroup(J,r.length/3-J,0)}function W(){const J=r.length/3;let ee=0;nt(P,ee),ee+=P.length;for(let ne=0,xe=I.length;ne<xe;ne++){const ae=I[ne];nt(ae,ee),ee+=ae.length}i.addGroup(J,r.length/3-J,1)}function nt(J,ee){let ne=J.length;for(;--ne>=0;){const xe=ne;let ae=ne-1;ae<0&&(ae=J.length-1);for(let A=0,E=h+v*2;A<E;A++){const Q=z*A,X=z*(A+1),R=ee+xe+Q,K=ee+ae+Q,oe=ee+ae+X,me=ee+xe+X;Ce(R,K,oe,me)}}}function ve(J,ee,ne){l.push(J),l.push(ee),l.push(ne)}function ke(J,ee,ne){He(J),He(ee),He(ne);const xe=r.length/3,ae=p.generateTopUV(i,r,xe-3,xe-2,xe-1);Ne(ae[0]),Ne(ae[1]),Ne(ae[2])}function Ce(J,ee,ne,xe){He(J),He(ee),He(xe),He(ee),He(ne),He(xe);const ae=r.length/3,A=p.generateSideWallUV(i,r,ae-6,ae-3,ae-2,ae-1);Ne(A[0]),Ne(A[1]),Ne(A[3]),Ne(A[1]),Ne(A[2]),Ne(A[3])}function He(J){r.push(l[J*3+0]),r.push(l[J*3+1]),r.push(l[J*3+2])}function Ne(J){s.push(J.x),s.push(J.y)}}}toJSON(){const t=ye.prototype.toJSON.call(this),n=this.parameters.shapes,i=this.parameters.options;return jL(n,i,t)}}const WL={generateTopUV:function(e,t,n,i,r){const s=t[n*3],o=t[n*3+1],a=t[i*3],l=t[i*3+1],c=t[r*3],h=t[r*3+1];return[new j(s,o),new j(a,l),new j(c,h)]},generateSideWallUV:function(e,t,n,i,r,s){const o=t[n*3],a=t[n*3+1],l=t[n*3+2],c=t[i*3],h=t[i*3+1],u=t[i*3+2],f=t[r*3],d=t[r*3+1],m=t[r*3+2],y=t[s*3],v=t[s*3+1],g=t[s*3+2];return Math.abs(a-h)<.01?[new j(o,1-l),new j(c,1-u),new j(f,1-m),new j(y,1-g)]:[new j(a,1-l),new j(h,1-u),new j(d,1-m),new j(v,1-g)]}};function jL(e,t,n){if(n.shapes=[],Array.isArray(e))for(let i=0,r=e.length;i<r;i++){const s=e[i];n.shapes.push(s.uuid)}else n.shapes.push(e.uuid);return t.extrudePath!==void 0&&(n.options.extrudePath=t.extrudePath.toJSON()),n}class eg extends je{constructor(t,n){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:n},this.fromBufferGeometry(new Hl(t,n)),this.mergeVertices()}toJSON(){const t=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return qL(n,i,t)}}function qL(e,t,n){if(n.shapes=[],Array.isArray(e))for(let i=0,r=e.length;i<r;i++){const s=e[i];n.shapes.push(s.uuid)}else n.shapes.push(e.uuid);return t.extrudePath!==void 0&&(n.options.extrudePath=t.extrudePath.toJSON()),n}class tg extends _s{constructor(t,n){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,t,n),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:n}}}class W1 extends je{constructor(t,n){super(),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:n},this.fromBufferGeometry(new tg(t,n)),this.mergeVertices()}}class ng extends ye{constructor(t,n,i,r){super(),this.type="LatheBufferGeometry",this.parameters={points:t,segments:n,phiStart:i,phiLength:r},n=Math.floor(n)||12,i=i||0,r=r||Math.PI*2,r=Se.clamp(r,0,Math.PI*2);const s=[],o=[],a=[],l=1/n,c=new b,h=new j;for(let u=0;u<=n;u++){const f=i+u*l*r,d=Math.sin(f),m=Math.cos(f);for(let y=0;y<=t.length-1;y++)c.x=t[y].x*d,c.y=t[y].y,c.z=t[y].x*m,o.push(c.x,c.y,c.z),h.x=u/n,h.y=y/(t.length-1),a.push(h.x,h.y)}for(let u=0;u<n;u++)for(let f=0;f<t.length-1;f++){const d=f+u*t.length,m=d,y=d+t.length,v=d+t.length+1,g=d+1;s.push(m,y,g),s.push(y,v,g)}if(this.setIndex(s),this.setAttribute("position",new ie(o,3)),this.setAttribute("uv",new ie(a,2)),this.computeVertexNormals(),r===Math.PI*2){const u=this.attributes.normal.array,f=new b,d=new b,m=new b,y=n*t.length*3;for(let v=0,g=0;v<t.length;v++,g+=3)f.x=u[g+0],f.y=u[g+1],f.z=u[g+2],d.x=u[y+g+0],d.y=u[y+g+1],d.z=u[y+g+2],m.addVectors(f,d).normalize(),u[g+0]=u[y+g+0]=m.x,u[g+1]=u[y+g+1]=m.y,u[g+2]=u[y+g+2]=m.z}}}class j1 extends je{constructor(t,n,i,r){super(),this.type="LatheGeometry",this.parameters={points:t,segments:n,phiStart:i,phiLength:r},this.fromBufferGeometry(new ng(t,n,i,r)),this.mergeVertices()}}class Vh extends _s{constructor(t,n){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,t,n),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:n}}}class q1 extends je{constructor(t,n){super(),this.type="OctahedronGeometry",this.parameters={radius:t,detail:n},this.fromBufferGeometry(new Vh(t,n)),this.mergeVertices()}}function Lo(e,t,n){ye.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};const i=[],r=[],s=[],o=[],a=1e-5,l=new b,c=new b,h=new b,u=new b,f=new b;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const d=t+1;for(let m=0;m<=n;m++){const y=m/n;for(let v=0;v<=t;v++){const g=v/t;e(g,y,c),r.push(c.x,c.y,c.z),g-a>=0?(e(g-a,y,h),u.subVectors(c,h)):(e(g+a,y,h),u.subVectors(h,c)),y-a>=0?(e(g,y-a,h),f.subVectors(c,h)):(e(g,y+a,h),f.subVectors(h,c)),l.crossVectors(u,f).normalize(),s.push(l.x,l.y,l.z),o.push(g,y)}}for(let m=0;m<n;m++)for(let y=0;y<t;y++){const v=m*d+y,g=m*d+y+1,p=(m+1)*d+y+1,x=(m+1)*d+y;i.push(v,g,x),i.push(g,p,x)}this.setIndex(i),this.setAttribute("position",new ie(r,3)),this.setAttribute("normal",new ie(s,3)),this.setAttribute("uv",new ie(o,2))}Lo.prototype=Object.create(ye.prototype);Lo.prototype.constructor=Lo;function vl(e,t,n){je.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Lo(e,t,n)),this.mergeVertices()}vl.prototype=Object.create(je.prototype);vl.prototype.constructor=vl;class X1 extends je{constructor(t,n,i,r){super(),this.type="PlaneGeometry",this.parameters={width:t,height:n,widthSegments:i,heightSegments:r},this.fromBufferGeometry(new zh(t,n,i,r)),this.mergeVertices()}}class Y1 extends je{constructor(t,n,i,r){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:n,radius:i,detail:r},this.fromBufferGeometry(new _s(t,n,i,r)),this.mergeVertices()}}class ig extends ye{constructor(t,n,i,r,s,o){super(),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},t=t||.5,n=n||1,s=s!==void 0?s:0,o=o!==void 0?o:Math.PI*2,i=i!==void 0?Math.max(3,i):8,r=r!==void 0?Math.max(1,r):1;const a=[],l=[],c=[],h=[];let u=t;const f=(n-t)/r,d=new b,m=new j;for(let y=0;y<=r;y++){for(let v=0;v<=i;v++){const g=s+v/i*o;d.x=u*Math.cos(g),d.y=u*Math.sin(g),l.push(d.x,d.y,d.z),c.push(0,0,1),m.x=(d.x/n+1)/2,m.y=(d.y/n+1)/2,h.push(m.x,m.y)}u+=f}for(let y=0;y<r;y++){const v=y*(i+1);for(let g=0;g<i;g++){const p=g+v,x=p,w=p+i+1,M=p+i+2,_=p+1;a.push(x,w,_),a.push(w,M,_)}}this.setIndex(a),this.setAttribute("position",new ie(l,3)),this.setAttribute("normal",new ie(c,3)),this.setAttribute("uv",new ie(h,2))}}class $1 extends je{constructor(t,n,i,r,s,o){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},this.fromBufferGeometry(new ig(t,n,i,r,s,o)),this.mergeVertices()}}class rg extends ye{constructor(t,n){super(),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:n},n=n||12;const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(t)===!1)c(t);else for(let h=0;h<t.length;h++)c(t[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new ie(r,3)),this.setAttribute("normal",new ie(s,3)),this.setAttribute("uv",new ie(o,2));function c(h){const u=r.length/3,f=h.extractPoints(n);let d=f.shape;const m=f.holes;Di.isClockWise(d)===!1&&(d=d.reverse());for(let v=0,g=m.length;v<g;v++){const p=m[v];Di.isClockWise(p)===!0&&(m[v]=p.reverse())}const y=Di.triangulateShape(d,m);for(let v=0,g=m.length;v<g;v++){const p=m[v];d=d.concat(p)}for(let v=0,g=d.length;v<g;v++){const p=d[v];r.push(p.x,p.y,0),s.push(0,0,1),o.push(p.x,p.y)}for(let v=0,g=y.length;v<g;v++){const p=y[v],x=p[0]+u,w=p[1]+u,M=p[2]+u;i.push(x,w,M),l+=3}}}toJSON(){const t=ye.prototype.toJSON.call(this),n=this.parameters.shapes;return XL(n,t)}}function XL(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}class sg extends je{constructor(t,n){super(),this.type="ShapeGeometry",typeof n=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),n=n.curveSegments),this.parameters={shapes:t,curveSegments:n},this.fromBufferGeometry(new rg(t,n)),this.mergeVertices()}toJSON(){const t=je.prototype.toJSON.call(this),n=this.parameters.shapes;return YL(n,t)}}function YL(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}class Wh extends ye{constructor(t,n,i,r,s,o,a){super(),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:n,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=t||1,n=Math.max(3,Math.floor(n)||8),i=Math.max(2,Math.floor(i)||6),r=r!==void 0?r:0,s=s!==void 0?s:Math.PI*2,o=o!==void 0?o:0,a=a!==void 0?a:Math.PI;const l=Math.min(o+a,Math.PI);let c=0;const h=[],u=new b,f=new b,d=[],m=[],y=[],v=[];for(let g=0;g<=i;g++){const p=[],x=g/i;let w=0;g==0&&o==0?w=.5/n:g==i&&l==Math.PI&&(w=-.5/n);for(let M=0;M<=n;M++){const _=M/n;u.x=-t*Math.cos(r+_*s)*Math.sin(o+x*a),u.y=t*Math.cos(o+x*a),u.z=t*Math.sin(r+_*s)*Math.sin(o+x*a),m.push(u.x,u.y,u.z),f.copy(u).normalize(),y.push(f.x,f.y,f.z),v.push(_+w,1-x),p.push(c++)}h.push(p)}for(let g=0;g<i;g++)for(let p=0;p<n;p++){const x=h[g][p+1],w=h[g][p],M=h[g+1][p],_=h[g+1][p+1];(g!==0||o>0)&&d.push(x,w,_),(g!==i-1||l<Math.PI)&&d.push(w,M,_)}this.setIndex(d),this.setAttribute("position",new ie(m,3)),this.setAttribute("normal",new ie(y,3)),this.setAttribute("uv",new ie(v,2))}}class J1 extends je{constructor(t,n,i,r,s,o,a){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:n,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Wh(t,n,i,r,s,o,a)),this.mergeVertices()}}class og extends _s{constructor(t,n){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,t,n),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:n}}}class Z1 extends je{constructor(t,n){super(),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:n},this.fromBufferGeometry(new og(t,n)),this.mergeVertices()}}class ag extends Hl{constructor(t,n){n=n||{};const i=n.font;if(!(i&&i.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ye;const r=i.generateShapes(t,n.size);n.depth=n.height!==void 0?n.height:50,n.bevelThickness===void 0&&(n.bevelThickness=10),n.bevelSize===void 0&&(n.bevelSize=8),n.bevelEnabled===void 0&&(n.bevelEnabled=!1),super(r,n),this.type="TextBufferGeometry"}}class Q1 extends je{constructor(t,n){super(),this.type="TextGeometry",this.parameters={text:t,parameters:n},this.fromBufferGeometry(new ag(t,n)),this.mergeVertices()}}class lg extends ye{constructor(t,n,i,r,s){super(),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:n,radialSegments:i,tubularSegments:r,arc:s},t=t||1,n=n||.4,i=Math.floor(i)||8,r=Math.floor(r)||6,s=s||Math.PI*2;const o=[],a=[],l=[],c=[],h=new b,u=new b,f=new b;for(let d=0;d<=i;d++)for(let m=0;m<=r;m++){const y=m/r*s,v=d/i*Math.PI*2;u.x=(t+n*Math.cos(v))*Math.cos(y),u.y=(t+n*Math.cos(v))*Math.sin(y),u.z=n*Math.sin(v),a.push(u.x,u.y,u.z),h.x=t*Math.cos(y),h.y=t*Math.sin(y),f.subVectors(u,h).normalize(),l.push(f.x,f.y,f.z),c.push(m/r),c.push(d/i)}for(let d=1;d<=i;d++)for(let m=1;m<=r;m++){const y=(r+1)*d+m-1,v=(r+1)*(d-1)+m-1,g=(r+1)*(d-1)+m,p=(r+1)*d+m;o.push(y,v,p),o.push(v,g,p)}this.setIndex(o),this.setAttribute("position",new ie(a,3)),this.setAttribute("normal",new ie(l,3)),this.setAttribute("uv",new ie(c,2))}}class K1 extends je{constructor(t,n,i,r,s){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:n,radialSegments:i,tubularSegments:r,arc:s},this.fromBufferGeometry(new lg(t,n,i,r,s)),this.mergeVertices()}}class cg extends ye{constructor(t,n,i,r,s,o){super(),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:n,tubularSegments:i,radialSegments:r,p:s,q:o},t=t||1,n=n||.4,i=Math.floor(i)||64,r=Math.floor(r)||8,s=s||2,o=o||3;const a=[],l=[],c=[],h=[],u=new b,f=new b,d=new b,m=new b,y=new b,v=new b,g=new b;for(let x=0;x<=i;++x){const w=x/i*s*Math.PI*2;p(w,s,o,t,d),p(w+.01,s,o,t,m),v.subVectors(m,d),g.addVectors(m,d),y.crossVectors(v,g),g.crossVectors(y,v),y.normalize(),g.normalize();for(let M=0;M<=r;++M){const _=M/r*Math.PI*2,S=-n*Math.cos(_),C=n*Math.sin(_);u.x=d.x+(S*g.x+C*y.x),u.y=d.y+(S*g.y+C*y.y),u.z=d.z+(S*g.z+C*y.z),l.push(u.x,u.y,u.z),f.subVectors(u,d).normalize(),c.push(f.x,f.y,f.z),h.push(x/i),h.push(M/r)}}for(let x=1;x<=i;x++)for(let w=1;w<=r;w++){const M=(r+1)*(x-1)+(w-1),_=(r+1)*x+(w-1),S=(r+1)*x+w,C=(r+1)*(x-1)+w;a.push(M,_,C),a.push(_,S,C)}this.setIndex(a),this.setAttribute("position",new ie(l,3)),this.setAttribute("normal",new ie(c,3)),this.setAttribute("uv",new ie(h,2));function p(x,w,M,_,S){const C=Math.cos(x),L=Math.sin(x),D=M/w*x,I=Math.cos(D);S.x=_*(2+I)*.5*C,S.y=_*(2+I)*L*.5,S.z=_*Math.sin(D)*.5}}}class eM extends je{constructor(t,n,i,r,s,o,a){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:n,tubularSegments:i,radialSegments:r,p:s,q:o},a!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new cg(t,n,i,r,s,o)),this.mergeVertices()}}class ug extends ye{constructor(t,n,i,r,s){super(),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:n,radius:i,radialSegments:r,closed:s},n=n||64,i=i||1,r=r||8,s=s||!1;const o=t.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new b,l=new b,c=new j;let h=new b;const u=[],f=[],d=[],m=[];y(),this.setIndex(m),this.setAttribute("position",new ie(u,3)),this.setAttribute("normal",new ie(f,3)),this.setAttribute("uv",new ie(d,2));function y(){for(let x=0;x<n;x++)v(x);v(s===!1?n:0),p(),g()}function v(x){h=t.getPointAt(x/n,h);const w=o.normals[x],M=o.binormals[x];for(let _=0;_<=r;_++){const S=_/r*Math.PI*2,C=Math.sin(S),L=-Math.cos(S);l.x=L*w.x+C*M.x,l.y=L*w.y+C*M.y,l.z=L*w.z+C*M.z,l.normalize(),f.push(l.x,l.y,l.z),a.x=h.x+i*l.x,a.y=h.y+i*l.y,a.z=h.z+i*l.z,u.push(a.x,a.y,a.z)}}function g(){for(let x=1;x<=n;x++)for(let w=1;w<=r;w++){const M=(r+1)*(x-1)+(w-1),_=(r+1)*x+(w-1),S=(r+1)*x+w,C=(r+1)*(x-1)+w;m.push(M,_,C),m.push(_,S,C)}}function p(){for(let x=0;x<=n;x++)for(let w=0;w<=r;w++)c.x=x/n,c.y=w/r,d.push(c.x,c.y)}}toJSON(){const t=ye.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t}}class tM extends je{constructor(t,n,i,r,s,o){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:n,radius:i,radialSegments:r,closed:s},o!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");const a=new ug(t,n,i,r,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}}class hg extends ye{constructor(t){super(),this.type="WireframeGeometry";const n=[],i=[0,0],r={},s=["a","b","c"];if(t&&t.isGeometry){const o=t.faces;for(let a=0,l=o.length;a<l;a++){const c=o[a];for(let h=0;h<3;h++){const u=c[s[h]],f=c[s[(h+1)%3]];i[0]=Math.min(u,f),i[1]=Math.max(u,f);const d=i[0]+","+i[1];r[d]===void 0&&(r[d]={index1:i[0],index2:i[1]})}}for(const a in r){const l=r[a];let c=t.vertices[l.index1];n.push(c.x,c.y,c.z),c=t.vertices[l.index2],n.push(c.x,c.y,c.z)}}else if(t&&t.isBufferGeometry){const o=new b;if(t.index!==null){const a=t.attributes.position,l=t.index;let c=t.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let h=0,u=c.length;h<u;++h){const f=c[h],d=f.start,m=f.count;for(let y=d,v=d+m;y<v;y+=3)for(let g=0;g<3;g++){const p=l.getX(y+g),x=l.getX(y+(g+1)%3);i[0]=Math.min(p,x),i[1]=Math.max(p,x);const w=i[0]+","+i[1];r[w]===void 0&&(r[w]={index1:i[0],index2:i[1]})}}for(const h in r){const u=r[h];o.fromBufferAttribute(a,u.index1),n.push(o.x,o.y,o.z),o.fromBufferAttribute(a,u.index2),n.push(o.x,o.y,o.z)}}else{const a=t.attributes.position;for(let l=0,c=a.count/3;l<c;l++)for(let h=0;h<3;h++){const u=3*l+h;o.fromBufferAttribute(a,u),n.push(o.x,o.y,o.z);const f=3*l+(h+1)%3;o.fromBufferAttribute(a,f),n.push(o.x,o.y,o.z)}}}this.setAttribute("position",new ie(n,3))}}var Vt=Object.freeze({__proto__:null,BoxGeometry:bp,BoxBufferGeometry:Bl,CircleGeometry:B1,CircleBufferGeometry:Jm,ConeGeometry:k1,ConeBufferGeometry:z1,CylinderGeometry:Zm,CylinderBufferGeometry:Ul,DodecahedronGeometry:U1,DodecahedronBufferGeometry:Qm,EdgesGeometry:Km,ExtrudeGeometry:eg,ExtrudeBufferGeometry:Hl,IcosahedronGeometry:W1,IcosahedronBufferGeometry:tg,LatheGeometry:j1,LatheBufferGeometry:ng,OctahedronGeometry:q1,OctahedronBufferGeometry:Vh,ParametricGeometry:vl,ParametricBufferGeometry:Lo,PlaneGeometry:X1,PlaneBufferGeometry:zh,PolyhedronGeometry:Y1,PolyhedronBufferGeometry:_s,RingGeometry:$1,RingBufferGeometry:ig,ShapeGeometry:sg,ShapeBufferGeometry:rg,SphereGeometry:J1,SphereBufferGeometry:Wh,TetrahedronGeometry:Z1,TetrahedronBufferGeometry:og,TextGeometry:Q1,TextBufferGeometry:ag,TorusGeometry:K1,TorusBufferGeometry:lg,TorusKnotGeometry:eM,TorusKnotBufferGeometry:cg,TubeGeometry:tM,TubeBufferGeometry:ug,WireframeGeometry:hg});function us(e){Me.call(this),this.type="ShadowMaterial",this.color=new le(0),this.transparent=!0,this.setValues(e)}us.prototype=Object.create(Me.prototype);us.prototype.constructor=us;us.prototype.isShadowMaterial=!0;us.prototype.copy=function(e){return Me.prototype.copy.call(this,e),this.color.copy(e.color),this};function zi(e){$t.call(this,e),this.type="RawShaderMaterial"}zi.prototype=Object.create($t.prototype);zi.prototype.constructor=zi;zi.prototype.isRawShaderMaterial=!0;function fi(e){Me.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new le(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new le(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xs,this.normalScale=new j(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}fi.prototype=Object.create(Me.prototype);fi.prototype.constructor=fi;fi.prototype.isMeshStandardMaterial=!0;fi.prototype.copy=function(e){return Me.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this};function Cr(e){fi.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new j(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=Se.clamp(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e)}Cr.prototype=Object.create(fi.prototype);Cr.prototype.constructor=Cr;Cr.prototype.isMeshPhysicalMaterial=!0;Cr.prototype.copy=function(e){return fi.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new le).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this};function Lr(e){Me.call(this),this.type="MeshPhongMaterial",this.color=new le(16777215),this.specular=new le(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new le(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xs,this.normalScale=new j(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pl,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}Lr.prototype=Object.create(Me.prototype);Lr.prototype.constructor=Lr;Lr.prototype.isMeshPhongMaterial=!0;Lr.prototype.copy=function(e){return Me.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function hs(e){Me.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new le(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new le(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xs,this.normalScale=new j(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}hs.prototype=Object.create(Me.prototype);hs.prototype.constructor=hs;hs.prototype.isMeshToonMaterial=!0;hs.prototype.copy=function(e){return Me.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function fs(e){Me.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xs,this.normalScale=new j(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}fs.prototype=Object.create(Me.prototype);fs.prototype.constructor=fs;fs.prototype.isMeshNormalMaterial=!0;fs.prototype.copy=function(e){return Me.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function ds(e){Me.call(this),this.type="MeshLambertMaterial",this.color=new le(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new le(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pl,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}ds.prototype=Object.create(Me.prototype);ds.prototype.constructor=ds;ds.prototype.isMeshLambertMaterial=!0;ds.prototype.copy=function(e){return Me.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function ps(e){Me.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new le(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xs,this.normalScale=new j(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}ps.prototype=Object.create(Me.prototype);ps.prototype.constructor=ps;ps.prototype.isMeshMatcapMaterial=!0;ps.prototype.copy=function(e){return Me.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function ms(e){rt.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}ms.prototype=Object.create(rt.prototype);ms.prototype.constructor=ms;ms.prototype.isLineDashedMaterial=!0;ms.prototype.copy=function(e){return rt.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var $L=Object.freeze({__proto__:null,ShadowMaterial:us,SpriteMaterial:Tr,RawShaderMaterial:zi,ShaderMaterial:$t,PointsMaterial:Yn,MeshPhysicalMaterial:Cr,MeshStandardMaterial:fi,MeshPhongMaterial:Lr,MeshToonMaterial:hs,MeshNormalMaterial:fs,MeshLambertMaterial:ds,MeshDepthMaterial:br,MeshDistanceMaterial:Sr,MeshBasicMaterial:Pn,MeshMatcapMaterial:ps,LineDashedMaterial:ms,LineBasicMaterial:rt,Material:Me});const Ke={arraySlice:function(e,t,n){return Ke.isTypedArray(e)?new e.constructor(e.subarray(t,n!==void 0?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(r,s){return e[r]-e[s]}const n=e.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(t),i},sortedArray:function(e,t,n){const i=e.length,r=new e.constructor(i);for(let s=0,o=0;o!==i;++s){const a=n[s]*t;for(let l=0;l!==t;++l)r[o++]=e[a+l]}return r},flattenJSON:function(e,t,n,i){let r=1,s=e[0];for(;s!==void 0&&s[i]===void 0;)s=e[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(t.push(s.time),n.push.apply(n,o)),s=e[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(t.push(s.time),o.toArray(n,n.length)),s=e[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(t.push(s.time),n.push(o)),s=e[r++];while(s!==void 0)},subclip:function(e,t,n,i,r){r=r||30;const s=e.clone();s.name=t;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],h=c.getValueSize(),u=[],f=[];for(let d=0;d<c.times.length;++d){const m=c.times[d]*r;if(!(m<n||m>=i)){u.push(c.times[d]);for(let y=0;y<h;++y)f.push(c.values[d*h+y])}}u.length!==0&&(c.times=Ke.convertArray(u,c.times.constructor),c.values=Ke.convertArray(f,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(e,t,n,i){t===void 0&&(t=0),n===void 0&&(n=e),(i===void 0||i<=0)&&(i=30);const r=n.tracks.length,s=t/i;for(let o=0;o<r;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=e.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let h=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=u/3);let f=0;const d=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);const m=a.times.length-1;let y;if(s<=a.times[0]){const g=h,p=u-h;y=Ke.arraySlice(a.values,g,p)}else if(s>=a.times[m]){const g=m*u+h,p=g+u-h;y=Ke.arraySlice(a.values,g,p)}else{const g=a.createInterpolant(),p=h,x=u-h;g.evaluate(s),y=Ke.arraySlice(g.resultBuffer,p,x)}l==="quaternion"&&new zt().fromArray(y).normalize().conjugate().toArray(y);const v=c.times.length;for(let g=0;g<v;++g){const p=g*d+f;if(l==="quaternion")zt.multiplyQuaternionsFlat(c.values,p,y,0,c.values,p);else{const x=d-f*2;for(let w=0;w<x;++w)c.values[p+w]-=y[w]}}}return e.blendMode=Wm,e}};function gn(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}Object.assign(gn.prototype,{evaluate:function(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let s;n:{i:if(!(e<i)){for(let o=n+2;;){if(i===void 0){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===o)break;if(r=i,i=t[++n],e<i)break t}s=t.length;break n}if(!(e>=r)){const o=t[1];e<o&&(n=2,r=o);for(let a=n-2;;){if(r===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===a)break;if(i=r,r=t[--n-1],e>=r)break t}s=n,n=0;break n}break e}for(;n<s;){const o=n+s>>>1;e<t[o]?s=o:n=o+1}if(i=t[n],r=t[n-1],r===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(i===void 0)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let s=0;s!==i;++s)t[s]=n[r+s];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(gn.prototype,{beforeStart_:gn.prototype.copySampleValue_,afterEnd_:gn.prototype.copySampleValue_});function $u(e,t,n,i){gn.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}$u.prototype=Object.assign(Object.create(gn.prototype),{constructor:$u,DefaultSettings_:{endingStart:$r,endingEnd:$r},intervalChanged_:function(e,t,n){const i=this.parameterPositions;let r=e-2,s=e+1,o=i[r],a=i[s];if(o===void 0)switch(this.getSettings_().endingStart){case Jr:r=e,o=2*t-n;break;case il:r=i.length-2,o=t+i[r]-i[r+1];break;default:r=e,o=n}if(a===void 0)switch(this.getSettings_().endingEnd){case Jr:s=e,a=2*n-t;break;case il:s=1,a=n+i[1]-i[0];break;default:s=e-1,a=t}const l=(n-t)*.5,c=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(a-n),this._offsetPrev=r*c,this._offsetNext=s*c},interpolate_:function(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o,l=a-o,c=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,f=this._weightNext,d=(n-t)/(i-t),m=d*d,y=m*d,v=-u*y+2*u*m-u*d,g=(1+u)*y+(-1.5-2*u)*m+(-.5+u)*d+1,p=(-1-f)*y+(1.5+f)*m+.5*d,x=f*y-f*m;for(let w=0;w!==o;++w)r[w]=v*s[c+w]+g*s[l+w]+p*s[a+w]+x*s[h+w];return r}});function xl(e,t,n,i){gn.call(this,e,t,n,i)}xl.prototype=Object.assign(Object.create(gn.prototype),{constructor:xl,interpolate_:function(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o,l=a-o,c=(n-t)/(i-t),h=1-c;for(let u=0;u!==o;++u)r[u]=s[l+u]*h+s[a+u]*c;return r}});function Ju(e,t,n,i){gn.call(this,e,t,n,i)}Ju.prototype=Object.assign(Object.create(gn.prototype),{constructor:Ju,interpolate_:function(e){return this.copySampleValue_(e-1)}});function Dt(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ke.convertArray(t,this.TimeBufferType),this.values=Ke.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}Object.assign(Dt,{toJSON:function(e){const t=e.constructor;let n;if(t.toJSON!==void 0)n=t.toJSON(e);else{n={name:e.name,times:Ke.convertArray(e.times,Array),values:Ke.convertArray(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}});Object.assign(Dt.prototype,{constructor:Dt,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:La,InterpolantFactoryMethodDiscrete:function(e){return new Ju(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new xl(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new $u(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){let t;switch(e){case nl:t=this.InterpolantFactoryMethodDiscrete;break;case La:t=this.InterpolantFactoryMethodLinear;break;case uu:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return nl;case this.InterpolantFactoryMethodLinear:return La;case this.InterpolantFactoryMethodSmooth:return uu}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this},scale:function(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this},trim:function(e,t){const n=this.times,i=n.length;let r=0,s=i-1;for(;r!==i&&n[r]<e;)++r;for(;s!==-1&&n[s]>t;)--s;if(++s,r!==0||s!==i){r>=s&&(s=Math.max(s,1),r=s-1);const o=this.getValueSize();this.times=Ke.arraySlice(n,r,s),this.values=Ke.arraySlice(this.values,r*o,s*o)}return this},validate:function(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==r;o++){const a=n[o];if(typeof a=="number"&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,a),e=!1;break}if(s!==null&&s>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,a,s),e=!1;break}s=a}if(i!==void 0&&Ke.isTypedArray(i))for(let o=0,a=i.length;o!==a;++o){const l=i[o];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,l),e=!1;break}}return e},optimize:function(){const e=Ke.arraySlice(this.times),t=Ke.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===uu,r=e.length-1;let s=1;for(let o=1;o<r;++o){let a=!1;const l=e[o],c=e[o+1];if(l!==c&&(o!==1||l!==l[0]))if(i)a=!0;else{const h=o*n,u=h-n,f=h+n;for(let d=0;d!==n;++d){const m=t[h+d];if(m!==t[u+d]||m!==t[f+d]){a=!0;break}}}if(a){if(o!==s){e[s]=e[o];const h=o*n,u=s*n;for(let f=0;f!==n;++f)t[u+f]=t[h+f]}++s}}if(r>0){e[s]=e[r];for(let o=r*n,a=s*n,l=0;l!==n;++l)t[a+l]=t[o+l];++s}return s!==e.length?(this.times=Ke.arraySlice(e,0,s),this.values=Ke.arraySlice(t,0,s*n)):(this.times=e,this.values=t),this},clone:function(){const e=Ke.arraySlice(this.times,0),t=Ke.arraySlice(this.values,0),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}});function Zu(e,t,n){Dt.call(this,e,t,n)}Zu.prototype=Object.assign(Object.create(Dt.prototype),{constructor:Zu,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:nl,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function Qu(e,t,n,i){Dt.call(this,e,t,n,i)}Qu.prototype=Object.assign(Object.create(Dt.prototype),{constructor:Qu,ValueTypeName:"color"});function Ro(e,t,n,i){Dt.call(this,e,t,n,i)}Ro.prototype=Object.assign(Object.create(Dt.prototype),{constructor:Ro,ValueTypeName:"number"});function Ku(e,t,n,i){gn.call(this,e,t,n,i)}Ku.prototype=Object.assign(Object.create(gn.prototype),{constructor:Ku,interpolate_:function(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=(n-t)/(i-t);let l=e*o;for(let c=l+o;l!==c;l+=4)zt.slerpFlat(r,0,s,l-o,s,l,a);return r}});function _l(e,t,n,i){Dt.call(this,e,t,n,i)}_l.prototype=Object.assign(Object.create(Dt.prototype),{constructor:_l,ValueTypeName:"quaternion",DefaultInterpolation:La,InterpolantFactoryMethodLinear:function(e){return new Ku(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0});function eh(e,t,n,i){Dt.call(this,e,t,n,i)}eh.prototype=Object.assign(Object.create(Dt.prototype),{constructor:eh,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:nl,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function Po(e,t,n,i){Dt.call(this,e,t,n,i)}Po.prototype=Object.assign(Object.create(Dt.prototype),{constructor:Po,ValueTypeName:"vector"});function Sn(e,t,n,i){this.name=e,this.tracks=n,this.duration=t!==void 0?t:-1,this.blendMode=i!==void 0?i:Fh,this.uuid=Se.generateUUID(),this.duration<0&&this.resetDuration()}function JL(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ro;case"vector":case"vector2":case"vector3":case"vector4":return Po;case"color":return Qu;case"quaternion":return _l;case"bool":case"boolean":return Zu;case"string":return eh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function ZL(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=JL(e.type);if(e.times===void 0){const n=[],i=[];Ke.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(Sn,{parse:function(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let r=0,s=n.length;r!==s;++r)t.push(ZL(n[r]).scale(i));return new Sn(e.name,e.duration,t,e.blendMode)},toJSON:function(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,s=n.length;r!==s;++r)t.push(Dt.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){const r=t.length,s=[];for(let o=0;o<r;o++){let a=[],l=[];a.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);const c=Ke.getKeyframeOrder(a);a=Ke.sortedArray(a,1,c),l=Ke.sortedArray(l,1,c),!i&&a[0]===0&&(a.push(r),l.push(l[0])),s.push(new Ro(".morphTargetInfluences["+t[o].name+"]",a,l).scale(1/n))}return new Sn(e,-1,s)},findByName:function(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.name.match(r);if(c&&c.length>1){const h=c[1];let u=i[h];u||(i[h]=u=[]),u.push(l)}}const s=[];for(const o in i)s.push(Sn.CreateFromMorphTargetSequence(o,i[o],t,n));return s},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(h,u,f,d,m){if(f.length!==0){const y=[],v=[];Ke.flattenJSON(f,y,v,d),y.length!==0&&m.push(new h(u,y,v))}},i=[],r=e.name||"default",s=e.fps||30,o=e.blendMode;let a=e.length||-1;const l=e.hierarchy||[];for(let h=0;h<l.length;h++){const u=l[h].keys;if(!(!u||u.length===0))if(u[0].morphTargets){const f={};let d;for(d=0;d<u.length;d++)if(u[d].morphTargets)for(let m=0;m<u[d].morphTargets.length;m++)f[u[d].morphTargets[m]]=-1;for(const m in f){const y=[],v=[];for(let g=0;g!==u[d].morphTargets.length;++g){const p=u[d];y.push(p.time),v.push(p.morphTarget===m?1:0)}i.push(new Ro(".morphTargetInfluence["+m+"]",y,v))}a=f.length*(s||1)}else{const f=".bones["+t[h].name+"]";n(Po,f+".position",u,"pos",i),n(_l,f+".quaternion",u,"rot",i),n(Po,f+".scale",u,"scl",i)}}return i.length===0?null:new Sn(r,a,i,o)}});Object.assign(Sn.prototype,{resetDuration:function(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this},trim:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new Sn(this.name,this.duration,e,this.blendMode)}});const gs={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function fg(e,t,n){const i=this;let r=!1,s=0,o=0,a;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(c){o++,r===!1&&i.onStart!==void 0&&i.onStart(c,s,o),r=!0},this.itemEnd=function(c){s++,i.onProgress!==void 0&&i.onProgress(c,s,o),s===o&&(r=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return a?a(c):c},this.setURLModifier=function(c){return a=c,this},this.addHandler=function(c,h){return l.push(c,h),this},this.removeHandler=function(c){const h=l.indexOf(c);return h!==-1&&l.splice(h,2),this},this.getHandler=function(c){for(let h=0,u=l.length;h<u;h+=2){const f=l[h],d=l[h+1];if(f.global&&(f.lastIndex=0),f.test(c))return d}return null}}const nM=new fg;function Ve(e){this.manager=e!==void 0?e:nM,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Ve.prototype,{load:function(){},loadAsync:function(e,t){const n=this;return new Promise(function(i,r){n.load(e,i,t,r)})},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});const zn={};function Dn(e){Ve.call(this,e)}Dn.prototype=Object.assign(Object.create(Ve.prototype),{constructor:Dn,load:function(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=gs.get(e);if(s!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(s),r.manager.itemEnd(e)},0),s;if(zn[e]!==void 0){zn[e].push({onLoad:t,onProgress:n,onError:i});return}const o=/^data:(.*?)(;base64)?,(.*)$/,a=e.match(o);let l;if(a){const c=a[1],h=!!a[2];let u=a[3];u=decodeURIComponent(u),h&&(u=atob(u));try{let f;const d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":const m=new Uint8Array(u.length);for(let v=0;v<u.length;v++)m[v]=u.charCodeAt(v);d==="blob"?f=new Blob([m.buffer],{type:c}):f=m.buffer;break;case"document":f=new DOMParser().parseFromString(u,c);break;case"json":f=JSON.parse(u);break;default:f=u;break}setTimeout(function(){t&&t(f),r.manager.itemEnd(e)},0)}catch(f){setTimeout(function(){i&&i(f),r.manager.itemError(e),r.manager.itemEnd(e)},0)}}else{zn[e]=[],zn[e].push({onLoad:t,onProgress:n,onError:i}),l=new XMLHttpRequest,l.open("GET",e,!0),l.addEventListener("load",function(c){const h=this.response,u=zn[e];if(delete zn[e],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),gs.add(e,h);for(let f=0,d=u.length;f<d;f++){const m=u[f];m.onLoad&&m.onLoad(h)}r.manager.itemEnd(e)}else{for(let f=0,d=u.length;f<d;f++){const m=u[f];m.onError&&m.onError(c)}r.manager.itemError(e),r.manager.itemEnd(e)}},!1),l.addEventListener("progress",function(c){const h=zn[e];for(let u=0,f=h.length;u<f;u++){const d=h[u];d.onProgress&&d.onProgress(c)}},!1),l.addEventListener("error",function(c){const h=zn[e];delete zn[e];for(let u=0,f=h.length;u<f;u++){const d=h[u];d.onError&&d.onError(c)}r.manager.itemError(e),r.manager.itemEnd(e)},!1),l.addEventListener("abort",function(c){const h=zn[e];delete zn[e];for(let u=0,f=h.length;u<f;u++){const d=h[u];d.onError&&d.onError(c)}r.manager.itemError(e),r.manager.itemEnd(e)},!1),this.responseType!==void 0&&(l.responseType=this.responseType),this.withCredentials!==void 0&&(l.withCredentials=this.withCredentials),l.overrideMimeType&&l.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const c in this.requestHeader)l.setRequestHeader(c,this.requestHeader[c]);l.send(null)}return r.manager.itemStart(e),l},setResponseType:function(e){return this.responseType=e,this},setMimeType:function(e){return this.mimeType=e,this}});function Tp(e){Ve.call(this,e)}Tp.prototype=Object.assign(Object.create(Ve.prototype),{constructor:Tp,load:function(e,t,n,i){const r=this,s=new Dn(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,function(o){try{t(r.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}},n,i)},parse:function(e){const t=[];for(let n=0;n<e.length;n++){const i=Sn.parse(e[n]);t.push(i)}return t}});function Ap(e){Ve.call(this,e)}Ap.prototype=Object.assign(Object.create(Ve.prototype),{constructor:Ap,load:function(e,t,n,i){const r=this,s=[],o=new Co;o.image=s;const a=new Dn(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials);let l=0;function c(h){a.load(e[h],function(u){const f=r.parse(u,!0);s[h]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},l+=1,l===6&&(f.mipmapCount===1&&(o.minFilter=At),o.format=f.format,o.needsUpdate=!0,t&&t(o))},n,i)}if(Array.isArray(e))for(let h=0,u=e.length;h<u;++h)c(h);else a.load(e,function(h){const u=r.parse(h,!0);if(u.isCubemap){const f=u.mipmaps.length/u.mipmapCount;for(let d=0;d<f;d++){s[d]={mipmaps:[]};for(let m=0;m<u.mipmapCount;m++)s[d].mipmaps.push(u.mipmaps[d*u.mipmapCount+m]),s[d].format=u.format,s[d].width=u.width,s[d].height=u.height}}else o.image.width=u.width,o.image.height=u.height,o.mipmaps=u.mipmaps;u.mipmapCount===1&&(o.minFilter=At),o.format=u.format,o.needsUpdate=!0,t&&t(o)},n,i);return o}});function No(e){Ve.call(this,e)}No.prototype=Object.assign(Object.create(Ve.prototype),{constructor:No,load:function(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=gs.get(e);if(s!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(s),r.manager.itemEnd(e)},0),s;const o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function a(){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1),gs.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(c){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1),i&&i(c),r.manager.itemError(e),r.manager.itemEnd(e)}return o.addEventListener("load",a,!1),o.addEventListener("error",l,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o}});function th(e){Ve.call(this,e)}th.prototype=Object.assign(Object.create(Ve.prototype),{constructor:th,load:function(e,t,n,i){const r=new hi,s=new No(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function a(l){s.load(e[l],function(c){r.images[l]=c,o++,o===6&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(let l=0;l<e.length;++l)a(l);return r}});function nh(e){Ve.call(this,e)}nh.prototype=Object.assign(Object.create(Ve.prototype),{constructor:nh,load:function(e,t,n,i){const r=this,s=new cs,o=new Dn(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(e,function(a){const l=r.parse(a);l&&(l.image!==void 0?s.image=l.image:l.data!==void 0&&(s.image.width=l.width,s.image.height=l.height,s.image.data=l.data),s.wrapS=l.wrapS!==void 0?l.wrapS:jt,s.wrapT=l.wrapT!==void 0?l.wrapT:jt,s.magFilter=l.magFilter!==void 0?l.magFilter:At,s.minFilter=l.minFilter!==void 0?l.minFilter:At,s.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.format!==void 0&&(s.format=l.format),l.type!==void 0&&(s.type=l.type),l.mipmaps!==void 0&&(s.mipmaps=l.mipmaps,s.minFilter=Ho),l.mipmapCount===1&&(s.minFilter=At),s.needsUpdate=!0,t&&t(s,l))},n,i),s}});function ih(e){Ve.call(this,e)}ih.prototype=Object.assign(Object.create(Ve.prototype),{constructor:ih,load:function(e,t,n,i){const r=new qe,s=new No(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){r.image=o;const a=e.search(/\.jpe?g($|\?)/i)>0||e.search(/^data\:image\/jpeg/)===0;r.format=a?mr:pn,r.needsUpdate=!0,t!==void 0&&t(r)},n,i),r}});function ge(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(ge.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){e===void 0&&(e=5);const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){e===void 0&&(e=5);const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){const e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===void 0&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){const n=this.getLengths();let i=0;const r=n.length;let s;t?s=t:s=e*n[r-1];let o=0,a=r-1,l;for(;o<=a;)if(i=Math.floor(o+(a-o)/2),l=n[i]-s,l<0)o=i+1;else if(l>0)a=i-1;else{a=i;break}if(i=a,n[i]===s)return i/(r-1);const c=n[i],u=n[i+1]-c,f=(s-c)/u;return(i+f)/(r-1)},getTangent:function(e,t){let i=e-1e-4,r=e+1e-4;i<0&&(i=0),r>1&&(r=1);const s=this.getPoint(i),o=this.getPoint(r),a=t||(s.isVector2?new j:new b);return a.copy(o).sub(s).normalize(),a},getTangentAt:function(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){const n=new b,i=[],r=[],s=[],o=new b,a=new Le;for(let f=0;f<=e;f++){const d=f/e;i[f]=this.getTangentAt(d,new b),i[f].normalize()}r[0]=new b,s[0]=new b;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),h=Math.abs(i[0].y),u=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),h<=l&&(l=h,n.set(0,1,0)),u<=l&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),s[0].crossVectors(i[0],r[0]);for(let f=1;f<=e;f++){if(r[f]=r[f-1].clone(),s[f]=s[f-1].clone(),o.crossVectors(i[f-1],i[f]),o.length()>Number.EPSILON){o.normalize();const d=Math.acos(Se.clamp(i[f-1].dot(i[f]),-1,1));r[f].applyMatrix4(a.makeRotationAxis(o,d))}s[f].crossVectors(i[f],r[f])}if(t===!0){let f=Math.acos(Se.clamp(r[0].dot(r[e]),-1,1));f/=e,i[0].dot(o.crossVectors(r[0],r[e]))>0&&(f=-f);for(let d=1;d<=e;d++)r[d].applyMatrix4(a.makeRotationAxis(i[d],f*d)),s[d].crossVectors(i[d],r[d])}return{tangents:i,normals:r,binormals:s}},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}});function xn(e,t,n,i,r,s,o,a){ge.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=s||2*Math.PI,this.aClockwise=o||!1,this.aRotation=a||0}xn.prototype=Object.create(ge.prototype);xn.prototype.constructor=xn;xn.prototype.isEllipseCurve=!0;xn.prototype.getPoint=function(e,t){const n=t||new j,i=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(s?r=0:r=i),this.aClockwise===!0&&!s&&(r===i?r=-i:r=r-i);const o=this.aStartAngle+e*r;let a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),u=a-this.aX,f=l-this.aY;a=u*c-f*h+this.aX,l=u*h+f*c+this.aY}return n.set(a,l)};xn.prototype.copy=function(e){return ge.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this};xn.prototype.toJSON=function(){const e=ge.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e};xn.prototype.fromJSON=function(e){return ge.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this};function Io(e,t,n,i,r,s){xn.call(this,e,t,n,n,i,r,s),this.type="ArcCurve"}Io.prototype=Object.create(xn.prototype);Io.prototype.constructor=Io;Io.prototype.isArcCurve=!0;function dg(){let e=0,t=0,n=0,i=0;function r(s,o,a,l){e=s,t=a,n=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,h,u){let f=(o-s)/c-(a-s)/(c+h)+(a-o)/h,d=(a-o)/h-(l-o)/(h+u)+(l-a)/u;f*=h,d*=h,r(o,a,f,d)},calc:function(s){const o=s*s,a=o*s;return e+t*s+n*o+i*a}}}const Bc=new b,$f=new dg,Jf=new dg,Zf=new dg;function Gt(e,t,n,i){ge.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=i!==void 0?i:.5}Gt.prototype=Object.create(ge.prototype);Gt.prototype.constructor=Gt;Gt.prototype.isCatmullRomCurve3=!0;Gt.prototype.getPoint=function(e,t){const n=t||new b,i=this.points,r=i.length,s=(r-(this.closed?0:1))*e;let o=Math.floor(s),a=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/r)+1)*r:a===0&&o===r-1&&(o=r-2,a=1);let l,c;this.closed||o>0?l=i[(o-1)%r]:(Bc.subVectors(i[0],i[1]).add(i[0]),l=Bc);const h=i[o%r],u=i[(o+1)%r];if(this.closed||o+2<r?c=i[(o+2)%r]:(Bc.subVectors(i[r-1],i[r-2]).add(i[r-1]),c=Bc),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let d=Math.pow(l.distanceToSquared(h),f),m=Math.pow(h.distanceToSquared(u),f),y=Math.pow(u.distanceToSquared(c),f);m<1e-4&&(m=1),d<1e-4&&(d=m),y<1e-4&&(y=m),$f.initNonuniformCatmullRom(l.x,h.x,u.x,c.x,d,m,y),Jf.initNonuniformCatmullRom(l.y,h.y,u.y,c.y,d,m,y),Zf.initNonuniformCatmullRom(l.z,h.z,u.z,c.z,d,m,y)}else this.curveType==="catmullrom"&&($f.initCatmullRom(l.x,h.x,u.x,c.x,this.tension),Jf.initCatmullRom(l.y,h.y,u.y,c.y,this.tension),Zf.initCatmullRom(l.z,h.z,u.z,c.z,this.tension));return n.set($f.calc(a),Jf.calc(a),Zf.calc(a)),n};Gt.prototype.copy=function(e){ge.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this};Gt.prototype.toJSON=function(){const e=ge.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e};Gt.prototype.fromJSON=function(e){ge.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new b().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this};function kv(e,t,n,i,r){const s=(i-t)*.5,o=(r-n)*.5,a=e*e,l=e*a;return(2*n-2*i+s+o)*l+(-3*n+3*i-2*s-o)*a+s*e+n}function QL(e,t){const n=1-e;return n*n*t}function KL(e,t){return 2*(1-e)*e*t}function eR(e,t){return e*e*t}function Na(e,t,n,i){return QL(e,t)+KL(e,n)+eR(e,i)}function tR(e,t){const n=1-e;return n*n*n*t}function nR(e,t){const n=1-e;return 3*n*n*e*t}function iR(e,t){return 3*(1-e)*e*e*t}function rR(e,t){return e*e*e*t}function Ia(e,t,n,i,r){return tR(e,t)+nR(e,n)+iR(e,i)+rR(e,r)}function $n(e,t,n,i){ge.call(this),this.type="CubicBezierCurve",this.v0=e||new j,this.v1=t||new j,this.v2=n||new j,this.v3=i||new j}$n.prototype=Object.create(ge.prototype);$n.prototype.constructor=$n;$n.prototype.isCubicBezierCurve=!0;$n.prototype.getPoint=function(e,t){const n=t||new j,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(Ia(e,i.x,r.x,s.x,o.x),Ia(e,i.y,r.y,s.y,o.y)),n};$n.prototype.copy=function(e){return ge.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this};$n.prototype.toJSON=function(){const e=ge.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e};$n.prototype.fromJSON=function(e){return ge.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this};function di(e,t,n,i){ge.call(this),this.type="CubicBezierCurve3",this.v0=e||new b,this.v1=t||new b,this.v2=n||new b,this.v3=i||new b}di.prototype=Object.create(ge.prototype);di.prototype.constructor=di;di.prototype.isCubicBezierCurve3=!0;di.prototype.getPoint=function(e,t){const n=t||new b,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(Ia(e,i.x,r.x,s.x,o.x),Ia(e,i.y,r.y,s.y,o.y),Ia(e,i.z,r.z,s.z,o.z)),n};di.prototype.copy=function(e){return ge.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this};di.prototype.toJSON=function(){const e=ge.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e};di.prototype.fromJSON=function(e){return ge.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this};function an(e,t){ge.call(this),this.type="LineCurve",this.v1=e||new j,this.v2=t||new j}an.prototype=Object.create(ge.prototype);an.prototype.constructor=an;an.prototype.isLineCurve=!0;an.prototype.getPoint=function(e,t){const n=t||new j;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n};an.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};an.prototype.getTangent=function(e,t){const n=t||new j;return n.copy(this.v2).sub(this.v1).normalize(),n};an.prototype.copy=function(e){return ge.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this};an.prototype.toJSON=function(){const e=ge.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};an.prototype.fromJSON=function(e){return ge.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function Jn(e,t){ge.call(this),this.type="LineCurve3",this.v1=e||new b,this.v2=t||new b}Jn.prototype=Object.create(ge.prototype);Jn.prototype.constructor=Jn;Jn.prototype.isLineCurve3=!0;Jn.prototype.getPoint=function(e,t){const n=t||new b;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n};Jn.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};Jn.prototype.copy=function(e){return ge.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this};Jn.prototype.toJSON=function(){const e=ge.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};Jn.prototype.fromJSON=function(e){return ge.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function Zn(e,t,n){ge.call(this),this.type="QuadraticBezierCurve",this.v0=e||new j,this.v1=t||new j,this.v2=n||new j}Zn.prototype=Object.create(ge.prototype);Zn.prototype.constructor=Zn;Zn.prototype.isQuadraticBezierCurve=!0;Zn.prototype.getPoint=function(e,t){const n=t||new j,i=this.v0,r=this.v1,s=this.v2;return n.set(Na(e,i.x,r.x,s.x),Na(e,i.y,r.y,s.y)),n};Zn.prototype.copy=function(e){return ge.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this};Zn.prototype.toJSON=function(){const e=ge.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};Zn.prototype.fromJSON=function(e){return ge.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function pi(e,t,n){ge.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new b,this.v1=t||new b,this.v2=n||new b}pi.prototype=Object.create(ge.prototype);pi.prototype.constructor=pi;pi.prototype.isQuadraticBezierCurve3=!0;pi.prototype.getPoint=function(e,t){const n=t||new b,i=this.v0,r=this.v1,s=this.v2;return n.set(Na(e,i.x,r.x,s.x),Na(e,i.y,r.y,s.y),Na(e,i.z,r.z,s.z)),n};pi.prototype.copy=function(e){return ge.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this};pi.prototype.toJSON=function(){const e=ge.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};pi.prototype.fromJSON=function(e){return ge.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function Qn(e){ge.call(this),this.type="SplineCurve",this.points=e||[]}Qn.prototype=Object.create(ge.prototype);Qn.prototype.constructor=Qn;Qn.prototype.isSplineCurve=!0;Qn.prototype.getPoint=function(e,t){const n=t||new j,i=this.points,r=(i.length-1)*e,s=Math.floor(r),o=r-s,a=i[s===0?s:s-1],l=i[s],c=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return n.set(kv(o,a.x,l.x,c.x,h.x),kv(o,a.y,l.y,c.y,h.y)),n};Qn.prototype.copy=function(e){ge.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this};Qn.prototype.toJSON=function(){const e=ge.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e};Qn.prototype.fromJSON=function(e){ge.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new j().fromArray(i))}return this};var Cp=Object.freeze({__proto__:null,ArcCurve:Io,CatmullRomCurve3:Gt,CubicBezierCurve:$n,CubicBezierCurve3:di,EllipseCurve:xn,LineCurve:an,LineCurve3:Jn,QuadraticBezierCurve:Zn,QuadraticBezierCurve3:pi,SplineCurve:Qn});function Ri(){ge.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}Ri.prototype=Object.assign(Object.create(ge.prototype),{constructor:Ri,add:function(e){this.curves.push(e)},closePath:function(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new an(t,e))},getPoint:function(e){const t=e*this.getLength(),n=this.getCurveLengths();let i=0;for(;i<n.length;){if(n[i]>=t){const r=n[i]-t,s=this.curves[i],o=s.getLength(),a=o===0?0:1-r/o;return s.getPointAt(a)}i++}return null},getLength:function(){const e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){e===void 0&&(e=40);const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const s=r[i],o=s&&s.isEllipseCurve?e*2:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?e*s.points.length:e,a=s.getPoints(o);for(let l=0;l<a.length;l++){const c=a[l];n&&n.equals(c)||(t.push(c),n=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},copy:function(e){ge.prototype.copy.call(this,e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){const e=ge.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e},fromJSON:function(e){ge.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new Cp[i.type]().fromJSON(i))}return this}});function Wn(e){Ri.call(this),this.type="Path",this.currentPoint=new j,e&&this.setFromPoints(e)}Wn.prototype=Object.assign(Object.create(Ri.prototype),{constructor:Wn,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){const n=new an(this.currentPoint.clone(),new j(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,i){const r=new Zn(this.currentPoint.clone(),new j(e,t),new j(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this},bezierCurveTo:function(e,t,n,i,r,s){const o=new $n(this.currentPoint.clone(),new j(e,t),new j(n,i),new j(r,s));return this.curves.push(o),this.currentPoint.set(r,s),this},splineThru:function(e){const t=[this.currentPoint.clone()].concat(e),n=new Qn(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,i,r,s){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+o,t+a,n,i,r,s),this},absarc:function(e,t,n,i,r,s){return this.absellipse(e,t,n,n,i,r,s),this},ellipse:function(e,t,n,i,r,s,o,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,i,r,s,o,a),this},absellipse:function(e,t,n,i,r,s,o,a){const l=new xn(e,t,n,i,r,s,o,a);if(this.curves.length>0){const h=l.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(e){return Ri.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){const e=Ri.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Ri.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}});function yr(e){Wn.call(this,e),this.uuid=Se.generateUUID(),this.type="Shape",this.holes=[]}yr.prototype=Object.assign(Object.create(Wn.prototype),{constructor:yr,getPointsHoles:function(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Wn.prototype.copy.call(this,e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this},toJSON:function(){const e=Wn.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e},fromJSON:function(e){Wn.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new Wn().fromJSON(i))}return this}});function Ze(e,t){de.call(this),this.type="Light",this.color=new le(e),this.intensity=t!==void 0?t:1}Ze.prototype=Object.assign(Object.create(de.prototype),{constructor:Ze,isLight:!0,copy:function(e){return de.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){const t=de.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}});function rh(e,t,n){Ze.call(this,e,n),this.type="HemisphereLight",this.position.copy(de.DefaultUp),this.updateMatrix(),this.groundColor=new le(t)}rh.prototype=Object.assign(Object.create(Ze.prototype),{constructor:rh,isHemisphereLight:!0,copy:function(e){return Ze.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}});function Ui(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new j(512,512),this.map=null,this.mapPass=null,this.matrix=new Le,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new kl,this._frameExtents=new j(1,1),this._viewportCount=1,this._viewports=[new We(0,0,1,1)]}Object.assign(Ui.prototype,{_projScreenMatrix:new Le,_lightPositionWorld:new b,_lookTarget:new b,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){const t=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,s=this._lightPositionWorld;s.setFromMatrixPosition(e.matrixWorld),t.position.copy(s),r.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(r),t.updateMatrixWorld(),i.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}});function Lp(){Ui.call(this,new yt(50,1,.5,500)),this.focus=1}Lp.prototype=Object.assign(Object.create(Ui.prototype),{constructor:Lp,isSpotLightShadow:!0,updateMatrices:function(e){const t=this.camera,n=Se.RAD2DEG*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(n!==t.fov||i!==t.aspect||r!==t.far)&&(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),Ui.prototype.updateMatrices.call(this,e)}});function sh(e,t,n,i,r,s){Ze.call(this,e,t),this.type="SpotLight",this.position.copy(de.DefaultUp),this.updateMatrix(),this.target=new de,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(o){this.intensity=o/Math.PI}}),this.distance=n!==void 0?n:0,this.angle=i!==void 0?i:Math.PI/3,this.penumbra=r!==void 0?r:0,this.decay=s!==void 0?s:1,this.shadow=new Lp}sh.prototype=Object.assign(Object.create(Ze.prototype),{constructor:sh,isSpotLight:!0,copy:function(e){return Ze.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function Rp(){Ui.call(this,new yt(90,1,.5,500)),this._frameExtents=new j(4,2),this._viewportCount=6,this._viewports=[new We(2,1,1,1),new We(0,1,1,1),new We(3,1,1,1),new We(1,1,1,1),new We(3,0,1,1),new We(1,0,1,1)],this._cubeDirections=[new b(1,0,0),new b(-1,0,0),new b(0,0,1),new b(0,0,-1),new b(0,1,0),new b(0,-1,0)],this._cubeUps=[new b(0,1,0),new b(0,1,0),new b(0,1,0),new b(0,1,0),new b(0,0,1),new b(0,0,-1)]}Rp.prototype=Object.assign(Object.create(Ui.prototype),{constructor:Rp,isPointLightShadow:!0,updateMatrices:function(e,t){t===void 0&&(t=0);const n=this.camera,i=this.matrix,r=this._lightPositionWorld,s=this._lookTarget,o=this._projScreenMatrix;r.setFromMatrixPosition(e.matrixWorld),n.position.copy(r),s.copy(n.position),s.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(s),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),o.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o)}});function oh(e,t,n,i){Ze.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(r){this.intensity=r/(4*Math.PI)}}),this.distance=n!==void 0?n:0,this.decay=i!==void 0?i:1,this.shadow=new Rp}oh.prototype=Object.assign(Object.create(Ze.prototype),{constructor:oh,isPointLight:!0,copy:function(e){return Ze.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}});function Do(e,t,n,i,r,s){ui.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e!==void 0?e:-1,this.right=t!==void 0?t:1,this.top=n!==void 0?n:1,this.bottom=i!==void 0?i:-1,this.near=r!==void 0?r:.1,this.far=s!==void 0?s:2e3,this.updateProjectionMatrix()}Do.prototype=Object.assign(Object.create(ui.prototype),{constructor:Do,isOrthographicCamera:!0,copy:function(e,t){return ui.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,s=n+e,o=i+t,a=i-t;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=l*this.view.offsetX,s=r+l*this.view.width,o-=c*this.view.offsetY,a=o-c*this.view.height}this.projectionMatrix.makeOrthographic(r,s,o,a,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){const t=de.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}});function Pp(){Ui.call(this,new Do(-5,5,5,-5,.5,500))}Pp.prototype=Object.assign(Object.create(Ui.prototype),{constructor:Pp,isDirectionalLightShadow:!0,updateMatrices:function(e){Ui.prototype.updateMatrices.call(this,e)}});function ah(e,t){Ze.call(this,e,t),this.type="DirectionalLight",this.position.copy(de.DefaultUp),this.updateMatrix(),this.target=new de,this.shadow=new Pp}ah.prototype=Object.assign(Object.create(Ze.prototype),{constructor:ah,isDirectionalLight:!0,copy:function(e){return Ze.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function lh(e,t){Ze.call(this,e,t),this.type="AmbientLight"}lh.prototype=Object.assign(Object.create(Ze.prototype),{constructor:lh,isAmbientLight:!0});function ch(e,t,n,i){Ze.call(this,e,t),this.type="RectAreaLight",this.width=n!==void 0?n:10,this.height=i!==void 0?i:10}ch.prototype=Object.assign(Object.create(Ze.prototype),{constructor:ch,isRectAreaLight:!0,copy:function(e){return Ze.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){const t=Ze.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});class iM{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new b)}set(t){for(let n=0;n<9;n++)this.coefficients[n].copy(t[n]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,n){const i=t.x,r=t.y,s=t.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*r),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*i),n.addScaledVector(o[4],1.092548*(i*r)),n.addScaledVector(o[5],1.092548*(r*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(i*s)),n.addScaledVector(o[8],.546274*(i*i-r*r)),n}getIrradianceAt(t,n){const i=t.x,r=t.y,s=t.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*r),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*i),n.addScaledVector(o[4],2*.429043*i*r),n.addScaledVector(o[5],2*.429043*r*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*i*s),n.addScaledVector(o[8],.429043*(i*i-r*r)),n}add(t){for(let n=0;n<9;n++)this.coefficients[n].add(t.coefficients[n]);return this}addScaledSH(t,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],n);return this}scale(t){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(t);return this}lerp(t,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],n);return this}equals(t){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(t.coefficients[n]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,n){n===void 0&&(n=0);const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(t,n+r*3);return this}toArray(t,n){t===void 0&&(t=[]),n===void 0&&(n=0);const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(t,n+r*3);return t}static getBasisAt(t,n){const i=t.x,r=t.y,s=t.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*s,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*i*s,n[8]=.546274*(i*i-r*r)}}function Cn(e,t){Ze.call(this,void 0,t),this.type="LightProbe",this.sh=e!==void 0?e:new iM}Cn.prototype=Object.assign(Object.create(Ze.prototype),{constructor:Cn,isLightProbe:!0,copy:function(e){return Ze.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){const t=Ze.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t}});function uh(e){Ve.call(this,e),this.textures={}}uh.prototype=Object.assign(Object.create(Ve.prototype),{constructor:uh,load:function(e,t,n,i){const r=this,s=new Dn(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,function(o){try{t(r.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}},n,i)},parse:function(e){const t=this.textures;function n(r){return t[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),t[r]}const i=new $L[e.type];if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=new le().setHex(e.sheen)),e.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular.setHex(e.specular),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.skinning!==void 0&&(i.skinning=e.skinning),e.morphTargets!==void 0&&(i.morphTargets=e.morphTargets),e.morphNormals!==void 0&&(i.morphNormals=e.morphNormals),e.dithering!==void 0&&(i.dithering=e.dithering),e.vertexTangents!==void 0&&(i.vertexTangents=e.vertexTangents),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const s=e.uniforms[r];switch(i.uniforms[r]={},s.type){case"t":i.uniforms[r].value=n(s.value);break;case"c":i.uniforms[r].value=new le().setHex(s.value);break;case"v2":i.uniforms[r].value=new j().fromArray(s.value);break;case"v3":i.uniforms[r].value=new b().fromArray(s.value);break;case"v4":i.uniforms[r].value=new We().fromArray(s.value);break;case"m3":i.uniforms[r].value=new qt().fromArray(s.value);break;case"m4":i.uniforms[r].value=new Le().fromArray(s.value);break;default:i.uniforms[r].value=s.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const r in e.extensions)i.extensions[r]=e.extensions[r];if(e.shading!==void 0&&(i.flatShading=e.shading===1),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),i.normalScale=new j().fromArray(r)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new j().fromArray(e.clearcoatNormalScale)),e.transmission!==void 0&&(i.transmission=e.transmission),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),i},setTextures:function(e){return this.textures=e,this}});const pg={decodeText:function(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}},extractUrlBase:function(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}};function wl(){ye.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}wl.prototype=Object.assign(Object.create(ye.prototype),{constructor:wl,isInstancedBufferGeometry:!0,copy:function(e){return ye.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const e=ye.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}});function hh(e,t,n,i){typeof n=="number"&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),we.call(this,e,t,n),this.meshPerAttribute=i||1}hh.prototype=Object.assign(Object.create(we.prototype),{constructor:hh,isInstancedBufferAttribute:!0,copy:function(e){return we.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){const e=we.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}});function fh(e){Ve.call(this,e)}fh.prototype=Object.assign(Object.create(Ve.prototype),{constructor:fh,load:function(e,t,n,i){const r=this,s=new Dn(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,function(o){try{t(r.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}},n,i)},parse:function(e){const t={},n={};function i(f,d){if(t[d]!==void 0)return t[d];const y=f.interleavedBuffers[d],v=r(f,y.buffer),g=new kc[y.type](v),p=new fn(g,y.stride);return p.uuid=y.uuid,t[d]=p,p}function r(f,d){if(n[d]!==void 0)return n[d];const y=f.arrayBuffers[d],v=new Uint32Array(y).buffer;return n[d]=v,v}const s=e.isInstancedBufferGeometry?new wl:new ye,o=e.data.index;if(o!==void 0){const f=new kc[o.type](o.array);s.setIndex(new we(f,1))}const a=e.data.attributes;for(const f in a){const d=a[f];let m;if(d.isInterleavedBufferAttribute){const y=i(e.data,d.data);m=new Er(y,d.itemSize,d.offset,d.normalized)}else{const y=new kc[d.type](d.array),v=d.isInstancedBufferAttribute?hh:we;m=new v(y,d.itemSize,d.normalized)}d.name!==void 0&&(m.name=d.name),s.setAttribute(f,m)}const l=e.data.morphAttributes;if(l)for(const f in l){const d=l[f],m=[];for(let y=0,v=d.length;y<v;y++){const g=d[y];let p;if(g.isInterleavedBufferAttribute){const x=i(e.data,g.data);p=new Er(x,g.itemSize,g.offset,g.normalized)}else{const x=new kc[g.type](g.array);p=new we(x,g.itemSize,g.normalized)}g.name!==void 0&&(p.name=g.name),m.push(p)}s.morphAttributes[f]=m}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let f=0,d=h.length;f!==d;++f){const m=h[f];s.addGroup(m.start,m.count,m.materialIndex)}const u=e.data.boundingSphere;if(u!==void 0){const f=new b;u.center!==void 0&&f.fromArray(u.center),s.boundingSphere=new Gi(f,u.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}});const kc={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};class sR extends Ve{constructor(t){super(t)}load(t,n,i,r){const s=this,o=this.path===""?pg.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;const a=new Dn(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(l){let c=null;try{c=JSON.parse(l)}catch(u){r!==void 0&&r(u),console.error("THREE:ObjectLoader: Can't parse "+t+".",u.message);return}const h=c.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+t);return}s.parse(c,n)},i,r)}parse(t,n){const i=this.parseShape(t.shapes),r=this.parseGeometries(t.geometries,i),s=this.parseImages(t.images,function(){n!==void 0&&n(l)}),o=this.parseTextures(t.textures,s),a=this.parseMaterials(t.materials,o),l=this.parseObject(t.object,r,a);return t.animations&&(l.animations=this.parseAnimations(t.animations)),(t.images===void 0||t.images.length===0)&&n!==void 0&&n(l),l}parseShape(t){const n={};if(t!==void 0)for(let i=0,r=t.length;i<r;i++){const s=new yr().fromJSON(t[i]);n[s.uuid]=s}return n}parseGeometries(t,n){const i={};let r;if(t!==void 0){const s=new fh;for(let o=0,a=t.length;o<a;o++){let l;const c=t[o];switch(c.type){case"PlaneGeometry":case"PlaneBufferGeometry":l=new Vt[c.type](c.width,c.height,c.widthSegments,c.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":l=new Vt[c.type](c.width,c.height,c.depth,c.widthSegments,c.heightSegments,c.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":l=new Vt[c.type](c.radius,c.segments,c.thetaStart,c.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":l=new Vt[c.type](c.radiusTop,c.radiusBottom,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":l=new Vt[c.type](c.radius,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":l=new Vt[c.type](c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":l=new Vt[c.type](c.radius,c.detail);break;case"RingGeometry":case"RingBufferGeometry":l=new Vt[c.type](c.innerRadius,c.outerRadius,c.thetaSegments,c.phiSegments,c.thetaStart,c.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":l=new Vt[c.type](c.radius,c.tube,c.radialSegments,c.tubularSegments,c.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":l=new Vt[c.type](c.radius,c.tube,c.tubularSegments,c.radialSegments,c.p,c.q);break;case"TubeGeometry":case"TubeBufferGeometry":l=new Vt[c.type](new Cp[c.path.type]().fromJSON(c.path),c.tubularSegments,c.radius,c.radialSegments,c.closed);break;case"LatheGeometry":case"LatheBufferGeometry":l=new Vt[c.type](c.points,c.segments,c.phiStart,c.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":l=new Vt[c.type](c.vertices,c.indices,c.radius,c.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":r=[];for(let u=0,f=c.shapes.length;u<f;u++){const d=n[c.shapes[u]];r.push(d)}l=new Vt[c.type](r,c.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":r=[];for(let u=0,f=c.shapes.length;u<f;u++){const d=n[c.shapes[u]];r.push(d)}const h=c.options.extrudePath;h!==void 0&&(c.options.extrudePath=new Cp[h.type]().fromJSON(h)),l=new Vt[c.type](r,c.options);break;case"BufferGeometry":case"InstancedBufferGeometry":l=s.parse(c);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+c.type+'"');continue}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),l.isBufferGeometry===!0&&c.userData!==void 0&&(l.userData=c.userData),i[c.uuid]=l}}return i}parseMaterials(t,n){const i={},r={};if(t!==void 0){const s=new uh;s.setTextures(n);for(let o=0,a=t.length;o<a;o++){const l=t[o];if(l.type==="MultiMaterial"){const c=[];for(let h=0;h<l.materials.length;h++){const u=l.materials[h];i[u.uuid]===void 0&&(i[u.uuid]=s.parse(u)),c.push(i[u.uuid])}r[l.uuid]=c}else i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(t){const n=[];for(let i=0;i<t.length;i++){const r=t[i],s=Sn.parse(r);r.uuid!==void 0&&(s.uuid=r.uuid),n.push(s)}return n}parseImages(t,n){const i=this,r={};let s;function o(a){return i.manager.itemStart(a),s.load(a,function(){i.manager.itemEnd(a)},void 0,function(){i.manager.itemError(a),i.manager.itemEnd(a)})}if(t!==void 0&&t.length>0){const a=new fg(n);s=new No(a),s.setCrossOrigin(this.crossOrigin);for(let l=0,c=t.length;l<c;l++){const h=t[l],u=h.url;if(Array.isArray(u)){r[h.uuid]=[];for(let f=0,d=u.length;f<d;f++){const m=u[f],y=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(m)?m:i.resourcePath+m;r[h.uuid].push(o(y))}}else{const f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h.url)?h.url:i.resourcePath+h.url;r[h.uuid]=o(f)}}}return r}parseTextures(t,n){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(t!==void 0)for(let s=0,o=t.length;s<o;s++){const a=t[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);let l;Array.isArray(n[a.image])?l=new hi(n[a.image]):l=new qe(n[a.image]),l.needsUpdate=!0,l.uuid=a.uuid,a.name!==void 0&&(l.name=a.name),a.mapping!==void 0&&(l.mapping=i(a.mapping,oR)),a.offset!==void 0&&l.offset.fromArray(a.offset),a.repeat!==void 0&&l.repeat.fromArray(a.repeat),a.center!==void 0&&l.center.fromArray(a.center),a.rotation!==void 0&&(l.rotation=a.rotation),a.wrap!==void 0&&(l.wrapS=i(a.wrap[0],zv),l.wrapT=i(a.wrap[1],zv)),a.format!==void 0&&(l.format=a.format),a.type!==void 0&&(l.type=a.type),a.encoding!==void 0&&(l.encoding=a.encoding),a.minFilter!==void 0&&(l.minFilter=i(a.minFilter,Uv)),a.magFilter!==void 0&&(l.magFilter=i(a.magFilter,Uv)),a.anisotropy!==void 0&&(l.anisotropy=a.anisotropy),a.flipY!==void 0&&(l.flipY=a.flipY),a.premultiplyAlpha!==void 0&&(l.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(l.unpackAlignment=a.unpackAlignment),r[a.uuid]=l}return r}parseObject(t,n,i){let r;function s(c){return n[c]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",c),n[c]}function o(c){if(c!==void 0){if(Array.isArray(c)){const h=[];for(let u=0,f=c.length;u<f;u++){const d=c[u];i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),h.push(i[d])}return h}return i[c]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",c),i[c]}}let a,l;switch(t.type){case"Scene":r=new $m,t.background!==void 0&&Number.isInteger(t.background)&&(r.background=new le(t.background)),t.fog!==void 0&&(t.fog.type==="Fog"?r.fog=new Hh(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(r.fog=new Uh(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":r=new yt(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(r.focus=t.focus),t.zoom!==void 0&&(r.zoom=t.zoom),t.filmGauge!==void 0&&(r.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(r.filmOffset=t.filmOffset),t.view!==void 0&&(r.view=Object.assign({},t.view));break;case"OrthographicCamera":r=new Do(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(r.zoom=t.zoom),t.view!==void 0&&(r.view=Object.assign({},t.view));break;case"AmbientLight":r=new lh(t.color,t.intensity);break;case"DirectionalLight":r=new ah(t.color,t.intensity);break;case"PointLight":r=new oh(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":r=new ch(t.color,t.intensity,t.width,t.height);break;case"SpotLight":r=new sh(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":r=new rh(t.color,t.groundColor,t.intensity);break;case"LightProbe":r=new Cn().fromJSON(t);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":a=s(t.geometry),l=o(t.material),r=new tt(a,l);break;case"InstancedMesh":a=s(t.geometry),l=o(t.material);const c=t.count,h=t.instanceMatrix;r=new Xu(a,l,c),r.instanceMatrix=new we(new Float32Array(h.array),16);break;case"LOD":r=new fl;break;case"Line":r=new In(s(t.geometry),o(t.material),t.mode);break;case"LineLoop":r=new Yu(s(t.geometry),o(t.material));break;case"LineSegments":r=new Jt(s(t.geometry),o(t.material));break;case"PointCloud":case"Points":r=new Ao(s(t.geometry),o(t.material));break;case"Sprite":r=new hl(o(t.material));break;case"Group":r=new sr;break;default:r=new de}if(r.uuid=t.uuid,t.name!==void 0&&(r.name=t.name),t.matrix!==void 0?(r.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(r.matrixAutoUpdate=t.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(t.position!==void 0&&r.position.fromArray(t.position),t.rotation!==void 0&&r.rotation.fromArray(t.rotation),t.quaternion!==void 0&&r.quaternion.fromArray(t.quaternion),t.scale!==void 0&&r.scale.fromArray(t.scale)),t.castShadow!==void 0&&(r.castShadow=t.castShadow),t.receiveShadow!==void 0&&(r.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.bias!==void 0&&(r.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(r.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(r.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&r.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(r.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(r.visible=t.visible),t.frustumCulled!==void 0&&(r.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(r.renderOrder=t.renderOrder),t.userData!==void 0&&(r.userData=t.userData),t.layers!==void 0&&(r.layers.mask=t.layers),t.children!==void 0){const c=t.children;for(let h=0;h<c.length;h++)r.add(this.parseObject(c[h],n,i))}if(t.type==="LOD"){t.autoUpdate!==void 0&&(r.autoUpdate=t.autoUpdate);const c=t.levels;for(let h=0;h<c.length;h++){const u=c[h],f=r.getObjectByProperty("uuid",u.object);f!==void 0&&r.addLevel(f,u.distance)}}return r}setTexturePath(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}const oR={UVMapping:Oh,CubeReflectionMapping:Nl,CubeRefractionMapping:Il,EquirectangularReflectionMapping:Uu,EquirectangularRefractionMapping:Hu,CubeUVReflectionMapping:Uo,CubeUVRefractionMapping:Dl},zv={RepeatWrapping:Qa,ClampToEdgeWrapping:jt,MirroredRepeatWrapping:Ka},Uv={NearestFilter:Mt,NearestMipmapNearestFilter:Gu,NearestMipmapLinearFilter:Vu,LinearFilter:At,LinearMipmapNearestFilter:Vm,LinearMipmapLinearFilter:Ho};function Np(e){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Ve.call(this,e),this.options={premultiplyAlpha:"none"}}Np.prototype=Object.assign(Object.create(Ve.prototype),{constructor:Np,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=gs.get(e);if(s!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(s),r.manager.itemEnd(e)},0),s;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",fetch(e,o).then(function(a){return a.blob()}).then(function(a){return createImageBitmap(a,r.options)}).then(function(a){gs.add(e,a),t&&t(a),r.manager.itemEnd(e)}).catch(function(a){i&&i(a),r.manager.itemError(e),r.manager.itemEnd(e)}),r.manager.itemStart(e)}});function mg(){this.type="ShapePath",this.color=new le,this.subPaths=[],this.currentPath=null}Object.assign(mg.prototype,{moveTo:function(e,t){return this.currentPath=new Wn,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this},bezierCurveTo:function(e,t,n,i,r,s){return this.currentPath.bezierCurveTo(e,t,n,i,r,s),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(g){const p=[];for(let x=0,w=g.length;x<w;x++){const M=g[x],_=new yr;_.curves=M.curves,p.push(_)}return p}function i(g,p){const x=p.length;let w=!1;for(let M=x-1,_=0;_<x;M=_++){let S=p[M],C=p[_],L=C.x-S.x,D=C.y-S.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(S=p[_],L=-L,C=p[M],D=-D),g.y<S.y||g.y>C.y)continue;if(g.y===S.y){if(g.x===S.x)return!0}else{const I=D*(g.x-S.x)-L*(g.y-S.y);if(I===0)return!0;if(I<0)continue;w=!w}}else{if(g.y!==S.y)continue;if(C.x<=g.x&&g.x<=S.x||S.x<=g.x&&g.x<=C.x)return!0}}return w}const r=Di.isClockWise,s=this.subPaths;if(s.length===0)return[];if(t===!0)return n(s);let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new yr,l.curves=a.curves,c.push(l),c;let h=!r(s[0].getPoints());h=e?!h:h;const u=[],f=[];let d=[],m=0,y;f[m]=void 0,d[m]=[];for(let g=0,p=s.length;g<p;g++)a=s[g],y=a.getPoints(),o=r(y),o=e?!o:o,o?(!h&&f[m]&&m++,f[m]={s:new yr,p:y},f[m].s.curves=a.curves,h&&m++,d[m]=[]):d[m].push({h:a,p:y[0]});if(!f[0])return n(s);if(f.length>1){let g=!1;const p=[];for(let x=0,w=f.length;x<w;x++)u[x]=[];for(let x=0,w=f.length;x<w;x++){const M=d[x];for(let _=0;_<M.length;_++){const S=M[_];let C=!0;for(let L=0;L<f.length;L++)i(S.p,f[L].p)&&(x!==L&&p.push({froms:x,tos:L,hole:_}),C?(C=!1,u[L].push(S)):g=!0);C&&u[x].push(S)}}p.length>0&&(g||(d=u))}let v;for(let g=0,p=f.length;g<p;g++){l=f[g].s,c.push(l),v=d[g];for(let x=0,w=v.length;x<w;x++)l.holes.push(v[x].h)}return c}});function gg(e){this.type="Font",this.data=e}Object.assign(gg.prototype,{isFont:!0,generateShapes:function(e,t){t===void 0&&(t=100);const n=[],i=aR(e,t,this.data);for(let r=0,s=i.length;r<s;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}});function aR(e,t,n){const i=Array.from?Array.from(e):String(e).split(""),r=t/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,o=[];let a=0,l=0;for(let c=0;c<i.length;c++){const h=i[c];if(h===`
`)a=0,l-=s;else{const u=lR(h,r,a,l,n);a+=u.offsetX,o.push(u.path)}}return o}function lR(e,t,n,i,r){const s=r.glyphs[e]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+e+'" does not exists in font family '+r.familyName+".");return}const o=new mg;let a,l,c,h,u,f,d,m;if(s.o){const y=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let v=0,g=y.length;v<g;)switch(y[v++]){case"m":a=y[v++]*t+n,l=y[v++]*t+i,o.moveTo(a,l);break;case"l":a=y[v++]*t+n,l=y[v++]*t+i,o.lineTo(a,l);break;case"q":c=y[v++]*t+n,h=y[v++]*t+i,u=y[v++]*t+n,f=y[v++]*t+i,o.quadraticCurveTo(u,f,c,h);break;case"b":c=y[v++]*t+n,h=y[v++]*t+i,u=y[v++]*t+n,f=y[v++]*t+i,d=y[v++]*t+n,m=y[v++]*t+i,o.bezierCurveTo(u,f,d,m,c,h);break}}return{offsetX:s.ha*t,path:o}}function Ip(e){Ve.call(this,e)}Ip.prototype=Object.assign(Object.create(Ve.prototype),{constructor:Ip,load:function(e,t,n,i){const r=this,s=new Dn(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,function(o){let a;try{a=JSON.parse(o)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),a=JSON.parse(o.substring(65,o.length-2))}const l=r.parse(a);t&&t(l)},n,i)},parse:function(e){return new gg(e)}});let zc;const yg={getContext:function(){return zc===void 0&&(zc=new(window.AudioContext||window.webkitAudioContext)),zc},setContext:function(e){zc=e}};function dh(e){Ve.call(this,e)}dh.prototype=Object.assign(Object.create(Ve.prototype),{constructor:dh,load:function(e,t,n,i){const r=this,s=new Dn(r.manager);s.setResponseType("arraybuffer"),s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,function(o){try{const a=o.slice(0);yg.getContext().decodeAudioData(a,function(c){t(c)})}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}},n,i)}});function Dp(e,t,n){Cn.call(this,void 0,n);const i=new le().set(e),r=new le().set(t),s=new b(i.r,i.g,i.b),o=new b(r.r,r.g,r.b),a=Math.sqrt(Math.PI),l=a*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(o).multiplyScalar(a),this.sh.coefficients[1].copy(s).sub(o).multiplyScalar(l)}Dp.prototype=Object.assign(Object.create(Cn.prototype),{constructor:Dp,isHemisphereLightProbe:!0,copy:function(e){return Cn.prototype.copy.call(this,e),this},toJSON:function(e){return Cn.prototype.toJSON.call(this,e)}});function Op(e,t){Cn.call(this,void 0,t);const n=new le().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Op.prototype=Object.assign(Object.create(Cn.prototype),{constructor:Op,isAmbientLightProbe:!0,copy:function(e){return Cn.prototype.copy.call(this,e),this},toJSON:function(e){return Cn.prototype.toJSON.call(this,e)}});const Hv=new Le,Gv=new Le;function rM(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new yt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new yt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(rM.prototype,{update:function(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const i=e.projectionMatrix.clone(),r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Se.DEG2RAD*t.fov*.5)/t.zoom;let a,l;Gv.elements[12]=-r,Hv.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,i.elements[0]=2*t.near/(l-a),i.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(i),a=-o*t.aspect-s,l=o*t.aspect-s,i.elements[0]=2*t.near/(l-a),i.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Gv),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Hv)}});class sM{constructor(t){this.autoStart=t!==void 0?t:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=(typeof performance>"u"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=(typeof performance>"u"?Date:performance).now();t=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=t}return t}}const kr=new b,Vv=new zt,cR=new b,zr=new b;class uR extends de{constructor(){super(),this.type="AudioListener",this.context=yg.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new sM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const n=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(kr,Vv,cR),zr.set(0,0,-1).applyQuaternion(Vv),n.positionX){const r=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(kr.x,r),n.positionY.linearRampToValueAtTime(kr.y,r),n.positionZ.linearRampToValueAtTime(kr.z,r),n.forwardX.linearRampToValueAtTime(zr.x,r),n.forwardY.linearRampToValueAtTime(zr.y,r),n.forwardZ.linearRampToValueAtTime(zr.z,r),n.upX.linearRampToValueAtTime(i.x,r),n.upY.linearRampToValueAtTime(i.y,r),n.upZ.linearRampToValueAtTime(i.z,r)}else n.setPosition(kr.x,kr.y,kr.z),n.setOrientation(zr.x,zr.y,zr.z,i.x,i.y,i.z)}}class vg extends de{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t){if(t===void 0&&(t=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,n=this.filters.length;t<n;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,n=this.filters.length;t<n;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this}setDetune(t){if(this.detune=t,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const Ur=new b,Wv=new zt,hR=new b,Hr=new b;class fR extends vg{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,n,i){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ur,Wv,hR),Hr.set(0,0,1).applyQuaternion(Wv);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Ur.x,i),n.positionY.linearRampToValueAtTime(Ur.y,i),n.positionZ.linearRampToValueAtTime(Ur.z,i),n.orientationX.linearRampToValueAtTime(Hr.x,i),n.orientationY.linearRampToValueAtTime(Hr.y,i),n.orientationZ.linearRampToValueAtTime(Hr.z,i)}else n.setPosition(Ur.x,Ur.y,Ur.z),n.setOrientation(Hr.x,Hr.y,Hr.z)}}class oM{constructor(t,n){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n!==void 0?n:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)t+=n[i];return t/n.length}}function xg(e,t,n){this.binding=e,this.valueSize=n;let i,r,s;switch(t){case"quaternion":i=this._slerp,r=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(xg.prototype,{accumulate:function(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==i;++o)n[r+o]=n[o];s=t}else{s+=t;const o=t/s;this._mixBufferRegion(n,r,0,o,i)}this.cumulativeWeight=s},accumulateAdditive:function(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e},apply:function(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const a=t*this._origIndex;this._mixBufferRegion(n,i,a,1-r,t)}s>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let a=t,l=t+t;a!==l;++a)if(n[a]!==n[a+t]){o.setValue(n,i);break}},saveOriginalState:function(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let r=n,s=i;r!==s;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)},_setAdditiveIdentityNumeric:function(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]},_select:function(e,t,n,i,r){if(i>=.5)for(let s=0;s!==r;++s)e[t+s]=e[n+s]},_slerp:function(e,t,n,i){zt.slerpFlat(e,t,e,t,e,n,i)},_slerpAdditive:function(e,t,n,i,r){const s=this._workIndex*r;zt.multiplyQuaternionsFlat(e,s,e,t,e,n),zt.slerpFlat(e,t,e,t,e,s,i)},_lerp:function(e,t,n,i,r){const s=1-i;for(let o=0;o!==r;++o){const a=t+o;e[a]=e[a]*s+e[n+o]*i}},_lerpAdditive:function(e,t,n,i,r){for(let s=0;s!==r;++s){const o=t+s;e[o]=e[o]+e[n+s]*i}}});const _g="\\[\\]\\.:\\/",dR=new RegExp("["+_g+"]","g"),wg="[^"+_g+"]",pR="[^"+_g.replace("\\.","")+"]",mR=/((?:WC+[\/:])*)/.source.replace("WC",wg),gR=/(WCOD+)?/.source.replace("WCOD",pR),yR=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",wg),vR=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",wg),xR=new RegExp("^"+mR+gR+yR+vR+"$"),_R=["material","materials","bones"];function aM(e,t,n){const i=n||Ut.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}Object.assign(aM.prototype,{getValue:function(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)},setValue:function(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}});function Ut(e,t,n){this.path=t,this.parsedPath=n||Ut.parseTrackName(t),this.node=Ut.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}Object.assign(Ut,{Composite:aM,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Ut.Composite(e,t,n):new Ut(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(dR,"")},parseTrackName:function(e){const t=xR.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const r=n.nodeName.substring(i+1);_R.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(r){for(let s=0;s<r.length;s++){const o=r[s];if(o.name===t||o.uuid===t)return o;const a=n(o.children);if(a)return a}return null},i=n(e.children);if(i)return i}return null}});Object.assign(Ut.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,n){t[n]=this.node[this.propertyName]},function(t,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)t[n++]=i[r]},function(t,n){t[n]=this.resolvedProperty[this.propertyIndex]},function(t,n){this.resolvedProperty.toArray(t,n)}],SetterByBindingTypeAndVersioning:[[function(t,n){this.targetObject[this.propertyName]=t[n]},function(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=t[n++]},function(t,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=t[n++];this.targetObject.needsUpdate=!0},function(t,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty[this.propertyIndex]=t[n]},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty.fromArray(t,n)},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,n){this.bind(),this.getValue(t,n)},setValue:function(t,n){this.bind(),this.setValue(t,n)},bind:function(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=Ut.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let l=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===l){l=c;break}break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}const s=e[i];if(s===void 0){const l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(r!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}a=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else s.fromArray!==void 0&&s.toArray!==void 0?(a=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(a=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(Ut.prototype,{_getValue_unbound:Ut.prototype.getValue,_setValue_unbound:Ut.prototype.setValue});function lM(){this.uuid=Se.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}Object.assign(lM.prototype,{isAnimationObjectGroup:!0,add:function(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,s=r.length;let o,a=e.length,l=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const u=arguments[c],f=u.uuid;let d=t[f];if(d===void 0){d=a++,t[f]=d,e.push(u);for(let m=0,y=s;m!==y;++m)r[m].push(new Ut(u,n[m],i[m]))}else if(d<l){o=e[d];const m=--l,y=e[m];t[y.uuid]=d,e[d]=y,t[f]=m,e[m]=u;for(let v=0,g=s;v!==g;++v){const p=r[v],x=p[m];let w=p[d];p[d]=x,w===void 0&&(w=new Ut(u,n[v],i[v])),p[m]=w}}else e[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const a=arguments[s],l=a.uuid,c=t[l];if(c!==void 0&&c>=r){const h=r++,u=e[h];t[u.uuid]=c,e[c]=u,t[l]=h,e[h]=a;for(let f=0,d=i;f!==d;++f){const m=n[f],y=m[h],v=m[c];m[c]=y,m[h]=v}}}this.nCachedObjects_=r},uncache:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,s=e.length;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,h=t[c];if(h!==void 0)if(delete t[c],h<r){const u=--r,f=e[u],d=--s,m=e[d];t[f.uuid]=h,e[h]=f,t[m.uuid]=u,e[u]=m,e.pop();for(let y=0,v=i;y!==v;++y){const g=n[y],p=g[u],x=g[d];g[h]=p,g[u]=x,g.pop()}}else{const u=--s,f=e[u];t[f.uuid]=h,e[h]=f,e.pop();for(let d=0,m=i;d!==m;++d){const y=n[d];y[h]=y[u],y.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(i!==void 0)return r[i];const s=this._paths,o=this._parsedPaths,a=this._objects,l=a.length,c=this.nCachedObjects_,h=new Array(l);i=r.length,n[e]=i,s.push(e),o.push(t),r.push(h);for(let u=c,f=a.length;u!==f;++u){const d=a[u];h[u]=new Ut(d,e,t)}return h},unsubscribe_:function(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length-1,a=s[o],l=e[o];t[l]=n,s[n]=a,s.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}});class wR{constructor(t,n,i,r){this._mixer=t,this._clip=n,this._localRoot=i||null,this.blendMode=r||n.blendMode;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:$r,endingEnd:$r};for(let c=0;c!==o;++c){const h=s[c].createInterpolant(null);a[c]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=d1,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,n){return this.loop=t,this.repetitions=n,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,n,i){if(t.fadeOut(n),this.fadeIn(n),i){const r=this._clip.duration,s=t._clip.duration,o=s/r,a=r/s;t.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(t,n,i){return t.crossFadeFrom(this,n,i)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,n,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=t/o,c[1]=n/o,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,n,i,r){if(!this.enabled){this._updateWeight(t);return}const s=this._startTime;if(s!==null){const l=(t-s)*i;if(l<0||i===0)return;this._startTime=null,n=i*l}n*=this._updateTimeScale(t);const o=this._updateTime(n),a=this._updateWeight(t);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case Wm:for(let h=0,u=l.length;h!==u;++h)l[h].evaluate(o),c[h].accumulateAdditive(a);break;case Fh:default:for(let h=0,u=l.length;h!==u;++h)l[h].evaluate(o),c[h].accumulate(r,a)}}}_updateWeight(t){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(t)[0];n*=r,t>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(t){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(t)[0];n*=r,t>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(t){const n=this._clip.duration,i=this.loop;let r=this.time+t,s=this._loopCount;const o=i===p1;if(t===0)return s===-1?r:o&&(s&1)===1?n-r:r;if(i===f1){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(s===-1&&(t>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=n||r<0){const a=Math.floor(r/n);r-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(l===1){const c=t<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return n-r}return r}_setEndings(t,n,i){const r=this._interpolantSettings;i?(r.endingStart=Jr,r.endingEnd=Jr):(t?r.endingStart=this.zeroSlopeAtStart?Jr:$r:r.endingStart=il,n?r.endingEnd=this.zeroSlopeAtEnd?Jr:$r:r.endingEnd=il)}_scheduleFading(t,n,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+t,l[1]=i,this}}function Fp(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}Fp.prototype=Object.assign(Object.create(gi.prototype),{constructor:Fp,_bindAction:function(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,s=e._propertyBindings,o=e._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let c=l[a];c===void 0&&(c={},l[a]=c);for(let h=0;h!==r;++h){const u=i[h],f=u.name;let d=c[f];if(d!==void 0)s[h]=d;else{if(d=s[h],d!==void 0){d._cacheIndex===null&&(++d.referenceCount,this._addInactiveBinding(d,a,f));continue}const m=t&&t._propertyBindings[h].binding.parsedPath;d=new xg(Ut.create(n,f,m),u.ValueTypeName,u.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,a,f),s[h]=d}o[h].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,r=this._actionsByClip[i];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){const i=this._actions,r=this._actionsByClip;let s=r[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[n]=e},_removeInactiveAction:function(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,s=this._actionsByClip,o=s[r],a=o.knownActions,l=a[a.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),e._byClipCacheIndex=null;const h=o.actionByRoot,u=(e._localRoot||this._root).uuid;delete h[u],a.length===0&&delete s[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}},_lendAction:function(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let s=i[t];s===void 0&&(s={},i[t]=s),s[n]=e,e._cacheIndex=r.length,r.push(e)},_removeInactiveBinding:function(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,s=this._bindingsByRootAndName,o=s[i],a=t[t.length-1],l=e._cacheIndex;a._cacheIndex=l,t[l]=a,t.pop(),delete o[r],Object.keys(o).length===0&&delete s[i]},_lendBinding:function(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new xl(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,n){const i=t||this._root,r=i.uuid;let s=typeof e=="string"?Sn.findByName(i,e):e;const o=s!==null?s.uuid:e,a=this._actionsByClip[o];let l=null;if(n===void 0&&(s!==null?n=s.blendMode:n=Fh),a!==void 0){const h=a.actionByRoot[r];if(h!==void 0&&h.blendMode===n)return h;l=a.knownActions[0],s===null&&(s=l._clip)}if(s===null)return null;const c=new wR(this,s,t,n);return this._bindAction(c,l),this._addInactiveAction(c,o,r),c},existingAction:function(e,t){const n=t||this._root,i=n.uuid,r=typeof e=="string"?Sn.findByName(n,e):e,s=r?r.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[i]||null},stopAllAction:function(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this},update:function(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),s=this._accuIndex^=1;for(let l=0;l!==n;++l)t[l]._update(i,e,r,s);const o=this._bindings,a=this._nActiveBindings;for(let l=0;l!==a;++l)o[l].apply(s);return this},setTime:function(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(r!==void 0){const s=r.knownActions;for(let o=0,a=s.length;o!==a;++o){const l=s[o];this._deactivateAction(l);const c=l._cacheIndex,h=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,h._cacheIndex=c,t[c]=h,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(e){const t=e.uuid,n=this._actionsByClip;for(const s in n){const o=n[s].actionByRoot,a=o[t];a!==void 0&&(this._deactivateAction(a),this._removeInactiveAction(a))}const i=this._bindingsByRootAndName,r=i[t];if(r!==void 0)for(const s in r){const o=r[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}},uncacheAction:function(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}});class jh{constructor(t){typeof t=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new jh(this.value.clone===void 0?this.value:this.value.clone())}}function Bp(e,t,n){fn.call(this,e,t),this.meshPerAttribute=n||1}Bp.prototype=Object.assign(Object.create(fn.prototype),{constructor:Bp,isInstancedInterleavedBuffer:!0,copy:function(e){return fn.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){const t=fn.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){const t=fn.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}});function Mg(e,t,n,i,r){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}Object.defineProperty(Mg.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(Mg.prototype,{isGLBufferAttribute:!0,setBuffer:function(e){return this.buffer=e,this},setType:function(e,t){return this.type=e,this.elementSize=t,this},setItemSize:function(e){return this.itemSize=e,this},setCount:function(e){return this.count=e,this}});function bg(e,t,n,i){this.ray=new Vo(e,t),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new Ym,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function jv(e,t){return e.distance-t.distance}function kp(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),i===!0){const r=e.children;for(let s=0,o=r.length;s<o;s++)kp(r[s],t,n,!0)}}Object.assign(bg.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){const i=n||[];return kp(e,this,i,t),i.sort(jv),i},intersectObjects:function(e,t,n){const i=n||[];if(Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(let r=0,s=e.length;r<s;r++)kp(e[r],this,i,t);return i.sort(jv),i}});class MR{constructor(t=1,n=0,i=0){return this.radius=t,this.phi=n,this.theta=i,this}set(t,n,i){return this.radius=t,this.phi=n,this.theta=i,this}clone(){return new this.constructor().copy(this)}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,n,i){return this.radius=Math.sqrt(t*t+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(Se.clamp(n/this.radius,-1,1))),this}}class bR{constructor(t,n,i){return this.radius=t!==void 0?t:1,this.theta=n!==void 0?n:0,this.y=i!==void 0?i:0,this}set(t,n,i){return this.radius=t,this.theta=n,this.y=i,this}clone(){return new this.constructor().copy(this)}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,n,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=n,this}}const qv=new j;class cM{constructor(t,n){Object.defineProperty(this,"isBox2",{value:!0}),this.min=t!==void 0?t:new j(1/0,1/0),this.max=n!==void 0?n:new j(-1/0,-1/0)}set(t,n){return this.min.copy(t),this.max.copy(n),this}setFromPoints(t){this.makeEmpty();for(let n=0,i=t.length;n<i;n++)this.expandByPoint(t[n]);return this}setFromCenterAndSize(t,n){const i=qv.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return t===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new j),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return t===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new j),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,n){return n===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),n=new j),n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,n){return n===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),n=new j),n.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return qv.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Xv=new b,Uc=new b;class uM{constructor(t,n){this.start=t!==void 0?t:new b,this.end=n!==void 0?n:new b}set(t,n){return this.start.copy(t),this.end.copy(n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new b),t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),t=new b),t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,n){return n===void 0&&(console.warn("THREE.Line3: .at() target is now required"),n=new b),this.delta(n).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,n){Xv.subVectors(t,this.start),Uc.subVectors(this.end,this.start);const i=Uc.dot(Uc);let s=Uc.dot(Xv)/i;return n&&(s=Se.clamp(s,0,1)),s}closestPointToPoint(t,n,i){const r=this.closestPointToPointParameter(t,n);return i===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new b),this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}function Ml(e){de.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Ml.prototype=Object.create(de.prototype);Ml.prototype.constructor=Ml;Ml.prototype.isImmediateRenderObject=!0;const Yv=new b;class SR extends de{constructor(t,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const i=new ye,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new ie(r,3));const s=new rt({fog:!1,toneMapped:!1});this.cone=new Jt(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const t=this.light.distance?this.light.distance:1e3,n=t*Math.tan(this.light.angle);this.cone.scale.set(n,n,t),Yv.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Yv),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Qi=new b,Hc=new Le,Qf=new Le;class hM extends Jt{constructor(t){const n=fM(t),i=new ye,r=[],s=[],o=new le(0,0,1),a=new le(0,1,0);for(let c=0;c<n.length;c++){const h=n[c];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new ie(r,3)),i.setAttribute("color",new ie(s,3));const l=new rt({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=n,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const n=this.bones,i=this.geometry,r=i.getAttribute("position");Qf.getInverse(this.root.matrixWorld);for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(Hc.multiplyMatrices(Qf,a.matrixWorld),Qi.setFromMatrixPosition(Hc),r.setXYZ(o,Qi.x,Qi.y,Qi.z),Hc.multiplyMatrices(Qf,a.parent.matrixWorld),Qi.setFromMatrixPosition(Hc),r.setXYZ(o+1,Qi.x,Qi.y,Qi.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}function fM(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,fM(e.children[n]));return t}class ER extends tt{constructor(t,n,i){const r=new Wh(n,4,2),s=new Pn({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=t,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const TR=new b,$v=new le,Jv=new le;class AR extends de{constructor(t,n,i){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const r=new Vh(n);r.rotateY(Math.PI*.5),this.material=new Pn({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new we(o,3)),this.add(new tt(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=t.geometry.getAttribute("color");$v.copy(this.light.color),Jv.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const s=i<r/2?$v:Jv;n.setXYZ(i,s.r,s.g,s.b)}n.needsUpdate=!0}t.lookAt(TR.setFromMatrixPosition(this.light.matrixWorld).negate())}}class dM extends Jt{constructor(t,n,i,r){t=t||10,n=n||10,i=new le(i!==void 0?i:4473924),r=new le(r!==void 0?r:8947848);const s=n/2,o=t/n,a=t/2,l=[],c=[];for(let f=0,d=0,m=-a;f<=n;f++,m+=o){l.push(-a,0,m,a,0,m),l.push(m,0,-a,m,0,a);const y=f===s?i:r;y.toArray(c,d),d+=3,y.toArray(c,d),d+=3,y.toArray(c,d),d+=3,y.toArray(c,d),d+=3}const h=new ye;h.setAttribute("position",new ie(l,3)),h.setAttribute("color",new ie(c,3));const u=new rt({vertexColors:!0,toneMapped:!1});super(h,u),this.type="GridHelper"}}class CR extends Jt{constructor(t,n,i,r,s,o){t=t||10,n=n||16,i=i||8,r=r||64,s=new le(s!==void 0?s:4473924),o=new le(o!==void 0?o:8947848);const a=[],l=[];for(let u=0;u<=n;u++){const f=u/n*(Math.PI*2),d=Math.sin(f)*t,m=Math.cos(f)*t;a.push(0,0,0),a.push(d,0,m);const y=u&1?s:o;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let u=0;u<=i;u++){const f=u&1?s:o,d=t-t/i*u;for(let m=0;m<r;m++){let y=m/r*(Math.PI*2),v=Math.sin(y)*d,g=Math.cos(y)*d;a.push(v,0,g),l.push(f.r,f.g,f.b),y=(m+1)/r*(Math.PI*2),v=Math.sin(y)*d,g=Math.cos(y)*d,a.push(v,0,g),l.push(f.r,f.g,f.b)}}const c=new ye;c.setAttribute("position",new ie(a,3)),c.setAttribute("color",new ie(l,3));const h=new rt({vertexColors:!0,toneMapped:!1});super(c,h),this.type="PolarGridHelper"}}const Zv=new b,Gc=new b,Qv=new b;class LR extends de{constructor(t,n,i){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,n===void 0&&(n=1);let r=new ye;r.setAttribute("position",new ie([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new rt({fog:!1,toneMapped:!1});this.lightPlane=new In(r,s),this.add(this.lightPlane),r=new ye,r.setAttribute("position",new ie([0,0,0,0,0,1],3)),this.targetLine=new In(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Zv.setFromMatrixPosition(this.light.matrixWorld),Gc.setFromMatrixPosition(this.light.target.matrixWorld),Qv.subVectors(Gc,Zv),this.lightPlane.lookAt(Gc),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Gc),this.targetLine.scale.z=Qv.length()}}const Vc=new b,ut=new ui;class RR extends Jt{constructor(t){const n=new ye,i=new rt({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={},a=new le(16755200),l=new le(16711680),c=new le(43775),h=new le(16777215),u=new le(3355443);f("n1","n2",a),f("n2","n4",a),f("n4","n3",a),f("n3","n1",a),f("f1","f2",a),f("f2","f4",a),f("f4","f3",a),f("f3","f1",a),f("n1","f1",a),f("n2","f2",a),f("n3","f3",a),f("n4","f4",a),f("p","n1",l),f("p","n2",l),f("p","n3",l),f("p","n4",l),f("u1","u2",c),f("u2","u3",c),f("u3","u1",c),f("c","t",h),f("p","c",u),f("cn1","cn2",u),f("cn3","cn4",u),f("cf1","cf2",u),f("cf3","cf4",u);function f(m,y,v){d(m,v),d(y,v)}function d(m,y){r.push(0,0,0),s.push(y.r,y.g,y.b),o[m]===void 0&&(o[m]=[]),o[m].push(r.length/3-1)}n.setAttribute("position",new ie(r,3)),n.setAttribute("color",new ie(s,3)),super(n,i),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const t=this.geometry,n=this.pointMap,i=1,r=1;ut.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),dt("c",n,t,ut,0,0,-1),dt("t",n,t,ut,0,0,1),dt("n1",n,t,ut,-i,-r,-1),dt("n2",n,t,ut,i,-r,-1),dt("n3",n,t,ut,-i,r,-1),dt("n4",n,t,ut,i,r,-1),dt("f1",n,t,ut,-i,-r,1),dt("f2",n,t,ut,i,-r,1),dt("f3",n,t,ut,-i,r,1),dt("f4",n,t,ut,i,r,1),dt("u1",n,t,ut,i*.7,r*1.1,-1),dt("u2",n,t,ut,-i*.7,r*1.1,-1),dt("u3",n,t,ut,0,r*2,-1),dt("cf1",n,t,ut,-i,0,1),dt("cf2",n,t,ut,i,0,1),dt("cf3",n,t,ut,0,-r,1),dt("cf4",n,t,ut,0,r,1),dt("cn1",n,t,ut,-i,0,-1),dt("cn2",n,t,ut,i,0,-1),dt("cn3",n,t,ut,0,-r,-1),dt("cn4",n,t,ut,0,r,-1),t.getAttribute("position").needsUpdate=!0}}function dt(e,t,n,i,r,s,o){Vc.set(r,s,o).unproject(i);const a=t[e];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],Vc.x,Vc.y,Vc.z)}}const Wc=new yi;class pM extends Jt{constructor(t,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new ye;s.setIndex(new we(i,1)),s.setAttribute("position",new we(r,3)),super(s,new rt({color:n,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(t!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Wc.setFromObject(this.object),Wc.isEmpty())return;const n=Wc.min,i=Wc.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=n.x,s[4]=i.y,s[5]=i.z,s[6]=n.x,s[7]=n.y,s[8]=i.z,s[9]=i.x,s[10]=n.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=n.z,s[15]=n.x,s[16]=i.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=i.x,s[22]=n.y,s[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t){return Jt.prototype.copy.call(this,t),this.object=t.object,this}}class PR extends Jt{constructor(t,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new ye;s.setIndex(new we(i,1)),s.setAttribute("position",new ie(r,3)),super(s,new rt({color:n,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}}class NR extends In{constructor(t,n,i){const r=i!==void 0?i:16776960,s=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new ye;o.setAttribute("position",new ie(s,3)),o.computeBoundingSphere(),super(o,new rt({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=n===void 0?1:n;const a=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],l=new ye;l.setAttribute("position",new ie(a,3)),l.computeBoundingSphere(),this.add(new tt(l,new Pn({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){let n=-this.plane.constant;Math.abs(n)<1e-8&&(n=1e-8),this.scale.set(.5*this.size,.5*this.size,n),this.children[0].material.side=n<0?_t:zo,this.lookAt(this.plane.normal),super.updateMatrixWorld(t)}}const Kv=new b;let jc,Kf;class IR extends de{constructor(t,n,i,r,s,o){super(),this.type="ArrowHelper",t===void 0&&(t=new b(0,0,1)),n===void 0&&(n=new b(0,0,0)),i===void 0&&(i=1),r===void 0&&(r=16776960),s===void 0&&(s=.2*i),o===void 0&&(o=.2*s),jc===void 0&&(jc=new ye,jc.setAttribute("position",new ie([0,0,0,0,1,0],3)),Kf=new Ul(0,.5,1,5,1),Kf.translate(0,-.5,0)),this.position.copy(n),this.line=new In(jc,new rt({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new tt(Kf,new Pn({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,s,o)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Kv.set(t.z,0,-t.x).normalize();const n=Math.acos(t.y);this.quaternion.setFromAxisAngle(Kv,n)}}setLength(t,n,i){n===void 0&&(n=.2*t),i===void 0&&(i=.2*n),this.line.scale.set(1,Math.max(1e-4,t-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}}class mM extends Jt{constructor(t=1){const n=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new ye;r.setAttribute("position",new ie(n,3)),r.setAttribute("color",new ie(i,3));const s=new rt({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}}const fo=4,vr=8,ii=Math.pow(2,vr),gM=[.125,.215,.35,.446,.526,.582],yM=vr-fo+1+gM.length,zs=20,ai={[Yt]:0,[Ol]:1,[kh]:2,[jm]:3,[qm]:4,[Xm]:5,[Bh]:6},ed=new Do,{_lodPlanes:da,_sizeLods:e0,_sigmas:qc}=FR();let td=null;const Wr=(1+Math.sqrt(5))/2,Us=1/Wr,t0=[new b(1,1,1),new b(-1,1,1),new b(1,1,-1),new b(-1,1,-1),new b(0,Wr,Us),new b(0,Wr,-Us),new b(Us,0,Wr),new b(-Us,0,Wr),new b(Wr,Us,0),new b(-Wr,Us,0)];class DR{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=BR(zs),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,n=0,i=.1,r=100){td=this._renderer.getRenderTarget();const s=this._allocateTargets();return this._sceneToCubeUV(t,i,r,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=r0(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=i0(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let t=0;t<da.length;t++)da[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(td),t.scissorTest=!1,Xc(t,0,0,t.width,t.height)}_fromTexture(t){td=this._renderer.getRenderTarget();const n=this._allocateTargets(t);return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(t){const n={magFilter:Mt,minFilter:Mt,generateMipmaps:!1,type:Go,format:Lw,encoding:OR(t)?t.encoding:kh,depthBuffer:!1},i=n0(n);return i.depthBuffer=!t,this._pingPongRenderTarget=n0(n),i}_compileMaterial(t){const n=new tt(da[0],t);this._renderer.compile(n,ed)}_sceneToCubeUV(t,n,i,r){const a=new yt(90,1,n,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],h=this._renderer,u=h.outputEncoding,f=h.toneMapping,d=h.getClearColor(),m=h.getClearAlpha();h.toneMapping=Kr,h.outputEncoding=Yt;let y=t.background;if(y&&y.isColor){y.convertSRGBToLinear();const v=Math.max(y.r,y.g,y.b),g=Math.min(Math.max(Math.ceil(Math.log2(v)),-128),127);y=y.multiplyScalar(Math.pow(2,-g));const p=(g+128)/255;h.setClearColor(y,p),t.background=null}for(let v=0;v<6;v++){const g=v%3;g==0?(a.up.set(0,l[v],0),a.lookAt(c[v],0,0)):g==1?(a.up.set(0,0,l[v]),a.lookAt(0,c[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,c[v])),Xc(r,g*ii,v>2?ii:0,ii,ii),h.setRenderTarget(r),h.render(t,a)}h.toneMapping=f,h.outputEncoding=u,h.setClearColor(d,m)}_textureToCubeUV(t,n){const i=this._renderer;t.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=r0()):this._equirectShader==null&&(this._equirectShader=i0());const r=t.isCubeTexture?this._cubemapShader:this._equirectShader,s=new tt(da[0],r),o=r.uniforms;o.envMap.value=t,t.isCubeTexture||o.texelSize.value.set(1/t.image.width,1/t.image.height),o.inputEncoding.value=ai[t.encoding],o.outputEncoding.value=ai[n.texture.encoding],Xc(n,0,0,3*ii,2*ii),i.setRenderTarget(n),i.render(s,ed)}_applyPMREM(t){const n=this._renderer,i=n.autoClear;n.autoClear=!1;for(let r=1;r<yM;r++){const s=Math.sqrt(qc[r]*qc[r]-qc[r-1]*qc[r-1]),o=t0[(r-1)%t0.length];this._blur(t,r-1,r,s,o)}n.autoClear=i}_blur(t,n,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(t,o,n,i,r,"latitudinal",s),this._halfBlur(o,t,i,i,r,"longitudinal",s)}_halfBlur(t,n,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,u=new tt(da[r],c),f=c.uniforms,d=e0[i]-1,m=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*zs-1),y=s/m,v=isFinite(s)?1+Math.floor(h*y):zs;v>zs&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${zs}`);const g=[];let p=0;for(let _=0;_<zs;++_){const S=_/y,C=Math.exp(-S*S/2);g.push(C),_==0?p+=C:_<v&&(p+=2*C)}for(let _=0;_<g.length;_++)g[_]=g[_]/p;f.envMap.value=t.texture,f.samples.value=v,f.weights.value=g,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a),f.dTheta.value=m,f.mipInt.value=vr-i,f.inputEncoding.value=ai[t.texture.encoding],f.outputEncoding.value=ai[t.texture.encoding];const x=e0[r],w=3*Math.max(0,ii-2*x),M=(r===0?0:2*ii)+2*x*(r>vr-fo?r-vr+fo:0);Xc(n,w,M,3*x,2*x),l.setRenderTarget(n),l.render(u,ed)}}function OR(e){return e===void 0||e.type!==Go?!1:e.encoding===Yt||e.encoding===Ol||e.encoding===Bh}function FR(){const e=[],t=[],n=[];let i=vr;for(let r=0;r<yM;r++){const s=Math.pow(2,i);t.push(s);let o=1/s;r>vr-fo?o=gM[r-vr+fo-1]:r==0&&(o=0),n.push(o);const a=1/(s-1),l=-a/2,c=1+a/2,h=[l,l,c,l,c,c,l,l,c,c,l,c],u=6,f=6,d=3,m=2,y=1,v=new Float32Array(d*f*u),g=new Float32Array(m*f*u),p=new Float32Array(y*f*u);for(let w=0;w<u;w++){const M=w%3*2/3-1,_=w>2?0:-1,S=[M,_,0,M+2/3,_,0,M+2/3,_+1,0,M,_,0,M+2/3,_+1,0,M,_+1,0];v.set(S,d*f*w),g.set(h,m*f*w);const C=[w,w,w,w,w,w];p.set(C,y*f*w)}const x=new ye;x.setAttribute("position",new we(v,d)),x.setAttribute("uv",new we(g,m)),x.setAttribute("faceIndex",new we(p,y)),e.push(x),i>fo&&i--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function n0(e){const t=new mn(3*ii,3*ii,e);return t.texture.mapping=Uo,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function Xc(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function BR(e){const t=new Float32Array(e),n=new b(0,1,0);return new zi({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:ai[Yt]},outputEncoding:{value:ai[Yt]}},vertexShader:Sg(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${Eg()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Ii,depthTest:!1,depthWrite:!1})}function i0(){const e=new j(1,1);return new zi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:ai[Yt]},outputEncoding:{value:ai[Yt]}},vertexShader:Sg(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${Eg()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Ii,depthTest:!1,depthWrite:!1})}function r0(){return new zi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:ai[Yt]},outputEncoding:{value:ai[Yt]}},vertexShader:Sg(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${Eg()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Ii,depthTest:!1,depthWrite:!1})}function Sg(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Eg(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function kR(e,t,n,i,r,s,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new rl(e,t,n,r,s,o)}const zR=0,UR=1,HR=0,GR=1,VR=2;function WR(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function jR(e){return e===void 0&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function qR(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Ao(e,t)}function XR(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new hl(e)}function YR(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Ao(e,t)}function $R(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Yn(e)}function JR(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Yn(e)}function ZR(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Yn(e)}function QR(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new b(e,t,n)}function KR(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new we(e,t).setUsage(os)}function eP(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new sl(e,t)}function tP(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new ol(e,t)}function nP(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new al(e,t)}function iP(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new ll(e,t)}function rP(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new as(e,t)}function sP(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new cl(e,t)}function oP(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new ls(e,t)}function aP(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new ie(e,t)}function lP(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new ul(e,t)}ge.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(ge.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e};Object.assign(Ri.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=new je;for(let n=0,i=e.length;n<i;n++){const r=e[n];t.vertices.push(new b(r.x,r.y,r.z||0))}return t}});Object.assign(Wn.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}});function vM(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Gt.call(this,e),this.type="catmullrom",this.closed=!0}vM.prototype=Object.create(Gt.prototype);function xM(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Gt.call(this,e),this.type="catmullrom"}xM.prototype=Object.create(Gt.prototype);function Tg(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Gt.call(this,e),this.type="catmullrom"}Tg.prototype=Object.create(Gt.prototype);Object.assign(Tg.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function cP(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new mM(e)}function uP(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new pM(e,t)}function hP(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Jt(new Km(e.geometry),new rt({color:t!==void 0?t:16777215}))}dM.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};hM.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function fP(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Jt(new hg(e.geometry),new rt({color:t!==void 0?t:16777215}))}Object.assign(Ve.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),pg.extractUrlBase(e)}});Ve.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function dP(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Dn(e)}function pP(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new nh(e)}Object.assign(cM.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}});Object.assign(yi.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}});Object.assign(Gi.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});kl.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)};uM.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)};Object.assign(Se,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Se.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Se.ceilPowerOfTwo(e)}});Object.assign(qt.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Le.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new b().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,s)}});ri.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)};zt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)};Object.assign(Vo.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}});Object.assign(Pt.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}});Object.assign(Pt,{barycoordFromPoint:function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Pt.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Pt.getNormal(e,t,n,i)}});Object.assign(yr.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new eg(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new sg(this,e)}});Object.assign(j.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(b.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(We.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(je.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}});Object.assign(de.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}});Object.defineProperties(de.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(tt.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(tt.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),m1},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(fl.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(qu.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});ju.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(ge.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}});yt.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(e)};Object.defineProperties(Ze.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}});Object.defineProperties(we.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===os},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(os)}}});Object.assign(we.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?os:Fl),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(ye.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new we(arguments[1],arguments[2]))):e==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t)},addDrawCall:function(e,t,n){n!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}});Object.defineProperties(ye.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(wl.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}});Object.defineProperties(bg.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}});Object.defineProperties(fn.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===os},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}});Object.assign(fn.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?os:Fl),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(Hl.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.assign($m.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}});Object.defineProperties(jh.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Me.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new le}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===Um}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}});Object.defineProperties(Lr.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Cr.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(e){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=e}}});Object.defineProperties($t.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}});Object.assign(zl.prototype,{clearTarget:function(e,t,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,i)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(zl.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=e===!0?Ol:Yt}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(I1.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function mP(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Mr(e,n)}Object.defineProperties(mn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}});Object.defineProperties(vg.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return new dh().load(e,function(i){t.setBuffer(i)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});oM.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};So.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};const gP={merge:function(e,t,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");let i;t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};wr.crossOrigin=void 0;wr.loadTexture=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new ih;r.setCrossOrigin(this.crossOrigin);const s=r.load(e,n,void 0,i);return t&&(s.mapping=t),s};wr.loadTextureCube=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new th;r.setCrossOrigin(this.crossOrigin);const s=r.load(e,n,void 0,i);return t&&(s.mapping=t),s};wr.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};wr.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function yP(){console.error("THREE.CanvasRenderer has been removed")}function vP(){console.error("THREE.JSONLoader has been removed.")}const xP={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function _P(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:W_}}));const wP=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:vw,AddEquation:jr,AddOperation:pw,AdditiveAnimationBlendMode:Wm,AdditiveBlending:tp,AlphaFormat:Tw,AlwaysDepth:aw,AlwaysStencilFunc:_1,AmbientLight:lh,AmbientLightProbe:Op,AnimationClip:Sn,AnimationLoader:Tp,AnimationMixer:Fp,AnimationObjectGroup:lM,AnimationUtils:Ke,ArcCurve:Io,ArrayCamera:Wu,ArrowHelper:IR,Audio:vg,AudioAnalyser:oM,AudioContext:yg,AudioListener:uR,AudioLoader:dh,AxesHelper:mM,AxisHelper:cP,BackSide:_t,BasicDepthPacking:y1,BasicShadowMap:BT,BinaryTextureLoader:pP,Bone:_p,BooleanKeyframeTrack:Zu,BoundingBoxHelper:uP,Box2:cM,Box3:yi,Box3Helper:PR,BoxBufferGeometry:Bl,BoxGeometry:bp,BoxHelper:pM,BufferAttribute:we,BufferGeometry:ye,BufferGeometryLoader:fh,ByteType:_w,Cache:gs,Camera:ui,CameraHelper:RR,CanvasRenderer:yP,CanvasTexture:dl,CatmullRomCurve3:Gt,CineonToneMapping:yw,CircleBufferGeometry:Jm,CircleGeometry:B1,ClampToEdgeWrapping:jt,Clock:sM,ClosedSplineCurve3:vM,Color:le,ColorKeyframeTrack:Qu,CompressedTexture:Co,CompressedTextureLoader:Ap,ConeBufferGeometry:z1,ConeGeometry:k1,CubeCamera:So,CubeGeometry:bp,CubeReflectionMapping:Nl,CubeRefractionMapping:Il,CubeTexture:hi,CubeTextureLoader:th,CubeUVReflectionMapping:Uo,CubeUVRefractionMapping:Dl,CubicBezierCurve:$n,CubicBezierCurve3:di,CubicInterpolant:$u,CullFaceBack:ep,CullFaceFront:q_,CullFaceFrontBack:FT,CullFaceNone:j_,Curve:ge,CurvePath:Ri,CustomBlending:Y_,CustomToneMapping:xw,CylinderBufferGeometry:Ul,CylinderGeometry:Zm,Cylindrical:bR,DataTexture:cs,DataTexture2DArray:Eo,DataTexture3D:To,DataTextureLoader:nh,DecrementStencilOp:YT,DecrementWrapStencilOp:JT,DefaultLoadingManager:nM,DepthFormat:es,DepthStencilFormat:Mo,DepthTexture:pl,DirectionalLight:ah,DirectionalLightHelper:LR,DiscreteInterpolant:Ju,DodecahedronBufferGeometry:Qm,DodecahedronGeometry:U1,DoubleSide:Rl,DstAlphaFactor:tw,DstColorFactor:iw,DynamicBufferAttribute:KR,DynamicCopyUsage:u2,DynamicDrawUsage:os,DynamicReadUsage:a2,EdgesGeometry:Km,EdgesHelper:hP,EllipseCurve:xn,EqualDepth:cw,EqualStencilFunc:e2,EquirectangularReflectionMapping:Uu,EquirectangularRefractionMapping:Hu,Euler:Wo,EventDispatcher:gi,ExtrudeBufferGeometry:Hl,ExtrudeGeometry:eg,Face3:rl,Face4:kR,FaceColors:GR,FileLoader:Dn,FlatShading:Um,Float32Attribute:aP,Float32BufferAttribute:ie,Float64Attribute:lP,Float64BufferAttribute:ul,FloatType:Ai,Fog:Hh,FogExp2:Uh,Font:gg,FontLoader:Ip,FrontSide:zo,Frustum:kl,GLBufferAttribute:Mg,GLSL1:f2,GLSL3:gp,GammaEncoding:Bh,Geometry:je,GeometryUtils:gP,GreaterDepth:hw,GreaterEqualDepth:uw,GreaterEqualStencilFunc:r2,GreaterStencilFunc:n2,GridHelper:dM,Group:sr,HalfFloatType:tl,HemisphereLight:rh,HemisphereLightHelper:AR,HemisphereLightProbe:Dp,IcosahedronBufferGeometry:tg,IcosahedronGeometry:W1,ImageBitmapLoader:Np,ImageLoader:No,ImageUtils:wr,ImmediateRenderObject:Ml,IncrementStencilOp:XT,IncrementWrapStencilOp:$T,InstancedBufferAttribute:hh,InstancedBufferGeometry:wl,InstancedInterleavedBuffer:Bp,InstancedMesh:Xu,Int16Attribute:iP,Int16BufferAttribute:ll,Int32Attribute:sP,Int32BufferAttribute:cl,Int8Attribute:eP,Int8BufferAttribute:sl,IntType:Mw,InterleavedBuffer:fn,InterleavedBufferAttribute:Er,Interpolant:gn,InterpolateDiscrete:nl,InterpolateLinear:La,InterpolateSmooth:uu,InvertStencilOp:ZT,JSONLoader:vP,KeepStencilOp:hu,KeyframeTrack:Dt,LOD:fl,LatheBufferGeometry:ng,LatheGeometry:j1,Layers:Ym,LensFlare:_P,LessDepth:lw,LessEqualDepth:zu,LessEqualStencilFunc:t2,LessStencilFunc:KT,Light:Ze,LightProbe:Cn,Line:In,Line3:uM,LineBasicMaterial:rt,LineCurve:an,LineCurve3:Jn,LineDashedMaterial:ms,LineLoop:Yu,LinePieces:UR,LineSegments:Jt,LineStrip:zR,LinearEncoding:Yt,LinearFilter:At,LinearInterpolant:xl,LinearMipMapLinearFilter:GT,LinearMipMapNearestFilter:HT,LinearMipmapLinearFilter:Ho,LinearMipmapNearestFilter:Vm,LinearToneMapping:mw,Loader:Ve,LoaderUtils:pg,LoadingManager:fg,LogLuvEncoding:g1,LoopOnce:f1,LoopPingPong:p1,LoopRepeat:d1,LuminanceAlphaFormat:Cw,LuminanceFormat:Aw,MOUSE:DT,Material:Me,MaterialLoader:uh,Math:Se,MathUtils:Se,Matrix3:qt,Matrix4:Le,MaxEquation:sp,Mesh:tt,MeshBasicMaterial:Pn,MeshDepthMaterial:br,MeshDistanceMaterial:Sr,MeshFaceMaterial:WR,MeshLambertMaterial:ds,MeshMatcapMaterial:ps,MeshNormalMaterial:fs,MeshPhongMaterial:Lr,MeshPhysicalMaterial:Cr,MeshStandardMaterial:fi,MeshToonMaterial:hs,MinEquation:rp,MirroredRepeatWrapping:Ka,MixOperation:dw,MultiMaterial:jR,MultiplyBlending:ip,MultiplyOperation:Pl,NearestFilter:Mt,NearestMipMapLinearFilter:UT,NearestMipMapNearestFilter:zT,NearestMipmapLinearFilter:Vu,NearestMipmapNearestFilter:Gu,NeverDepth:ow,NeverStencilFunc:QT,NoBlending:Ii,NoColors:HR,NoToneMapping:Kr,NormalAnimationBlendMode:Fh,NormalBlending:uo,NotEqualDepth:fw,NotEqualStencilFunc:i2,NumberKeyframeTrack:Ro,Object3D:de,ObjectLoader:sR,ObjectSpaceNormalMap:x1,OctahedronBufferGeometry:Vh,OctahedronGeometry:q1,OneFactor:Q_,OneMinusDstAlphaFactor:nw,OneMinusDstColorFactor:rw,OneMinusSrcAlphaFactor:Gm,OneMinusSrcColorFactor:ew,OrthographicCamera:Do,PCFShadowMap:zm,PCFSoftShadowMap:X_,PMREMGenerator:DR,ParametricBufferGeometry:Lo,ParametricGeometry:vl,Particle:XR,ParticleBasicMaterial:JR,ParticleSystem:YR,ParticleSystemMaterial:ZR,Path:Wn,PerspectiveCamera:yt,Plane:ri,PlaneBufferGeometry:zh,PlaneGeometry:X1,PlaneHelper:NR,PointCloud:qR,PointCloudMaterial:$R,PointLight:oh,PointLightHelper:ER,Points:Ao,PointsMaterial:Yn,PolarGridHelper:CR,PolyhedronBufferGeometry:_s,PolyhedronGeometry:Y1,PositionalAudio:fR,PropertyBinding:Ut,PropertyMixer:xg,QuadraticBezierCurve:Zn,QuadraticBezierCurve3:pi,Quaternion:zt,QuaternionKeyframeTrack:_l,QuaternionLinearInterpolant:Ku,REVISION:W_,RGBADepthPacking:v1,RGBAFormat:pn,RGBAIntegerFormat:Ow,RGBA_ASTC_10x10_Format:Yw,RGBA_ASTC_10x5_Format:jw,RGBA_ASTC_10x6_Format:qw,RGBA_ASTC_10x8_Format:Xw,RGBA_ASTC_12x10_Format:$w,RGBA_ASTC_12x12_Format:Jw,RGBA_ASTC_4x4_Format:Bw,RGBA_ASTC_5x4_Format:kw,RGBA_ASTC_5x5_Format:zw,RGBA_ASTC_6x5_Format:Uw,RGBA_ASTC_6x6_Format:Hw,RGBA_ASTC_8x5_Format:Gw,RGBA_ASTC_8x6_Format:Vw,RGBA_ASTC_8x8_Format:Ww,RGBA_BPTC_Format:Zw,RGBA_ETC2_EAC_Format:mp,RGBA_PVRTC_2BPPV1_Format:dp,RGBA_PVRTC_4BPPV1_Format:fp,RGBA_S3TC_DXT1_Format:ap,RGBA_S3TC_DXT3_Format:lp,RGBA_S3TC_DXT5_Format:cp,RGBDEncoding:Xm,RGBEEncoding:kh,RGBEFormat:Lw,RGBFormat:mr,RGBIntegerFormat:Dw,RGBM16Encoding:qm,RGBM7Encoding:jm,RGB_ETC1_Format:Fw,RGB_ETC2_Format:pp,RGB_PVRTC_2BPPV1_Format:hp,RGB_PVRTC_4BPPV1_Format:up,RGB_S3TC_DXT1_Format:op,RGFormat:Nw,RGIntegerFormat:Iw,RawShaderMaterial:zi,Ray:Vo,Raycaster:bg,RectAreaLight:ch,RedFormat:Rw,RedIntegerFormat:Pw,ReinhardToneMapping:gw,RepeatWrapping:Qa,ReplaceStencilOp:qT,ReverseSubtractEquation:J_,RingBufferGeometry:ig,RingGeometry:$1,SRGB8_ALPHA8_ASTC_10x10_Format:c1,SRGB8_ALPHA8_ASTC_10x5_Format:o1,SRGB8_ALPHA8_ASTC_10x6_Format:a1,SRGB8_ALPHA8_ASTC_10x8_Format:l1,SRGB8_ALPHA8_ASTC_12x10_Format:u1,SRGB8_ALPHA8_ASTC_12x12_Format:h1,SRGB8_ALPHA8_ASTC_4x4_Format:Qw,SRGB8_ALPHA8_ASTC_5x4_Format:Kw,SRGB8_ALPHA8_ASTC_5x5_Format:e1,SRGB8_ALPHA8_ASTC_6x5_Format:t1,SRGB8_ALPHA8_ASTC_6x6_Format:n1,SRGB8_ALPHA8_ASTC_8x5_Format:i1,SRGB8_ALPHA8_ASTC_8x6_Format:r1,SRGB8_ALPHA8_ASTC_8x8_Format:s1,Scene:$m,SceneUtils:xP,ShaderChunk:Ie,ShaderLib:Vn,ShaderMaterial:$t,ShadowMaterial:us,Shape:yr,ShapeBufferGeometry:rg,ShapeGeometry:sg,ShapePath:mg,ShapeUtils:Di,ShortType:ww,Skeleton:qu,SkeletonHelper:hM,SkinnedMesh:ju,SmoothShading:kT,Sphere:Gi,SphereBufferGeometry:Wh,SphereGeometry:J1,Spherical:MR,SphericalHarmonics3:iM,Spline:Tg,SplineCurve:Qn,SplineCurve3:xM,SpotLight:sh,SpotLightHelper:SR,Sprite:hl,SpriteMaterial:Tr,SrcAlphaFactor:Hm,SrcAlphaSaturateFactor:sw,SrcColorFactor:K_,StaticCopyUsage:c2,StaticDrawUsage:Fl,StaticReadUsage:o2,StereoCamera:rM,StreamCopyUsage:h2,StreamDrawUsage:s2,StreamReadUsage:l2,StringKeyframeTrack:eh,SubtractEquation:$_,SubtractiveBlending:np,TOUCH:OT,TangentSpaceNormalMap:xs,TetrahedronBufferGeometry:og,TetrahedronGeometry:Z1,TextBufferGeometry:ag,TextGeometry:Q1,Texture:qe,TextureLoader:ih,TorusBufferGeometry:lg,TorusGeometry:K1,TorusKnotBufferGeometry:cg,TorusKnotGeometry:eM,Triangle:Pt,TriangleFanDrawMode:WT,TriangleStripDrawMode:VT,TrianglesDrawMode:m1,TubeBufferGeometry:ug,TubeGeometry:tM,UVMapping:Oh,Uint16Attribute:rP,Uint16BufferAttribute:as,Uint32Attribute:oP,Uint32BufferAttribute:ls,Uint8Attribute:tP,Uint8BufferAttribute:ol,Uint8ClampedAttribute:nP,Uint8ClampedBufferAttribute:al,Uniform:jh,UniformsLib:se,UniformsUtils:S1,UnsignedByteType:Go,UnsignedInt248Type:ho,UnsignedIntType:Ca,UnsignedShort4444Type:bw,UnsignedShort5551Type:Sw,UnsignedShort565Type:Ew,UnsignedShortType:el,VSMShadowMap:Ks,Vector2:j,Vector3:b,Vector4:We,VectorKeyframeTrack:Po,Vertex:QR,VertexColors:VR,VideoTexture:Mp,WebGL1Renderer:xp,WebGLCubeRenderTarget:Mr,WebGLMultisampleRenderTarget:yp,WebGLRenderTarget:mn,WebGLRenderTargetCube:mP,WebGLRenderer:zl,WebGLUtils:D1,WireframeGeometry:hg,WireframeHelper:fP,WrapAroundEnding:il,XHRLoader:dP,ZeroCurvatureEnding:$r,ZeroFactor:Z_,ZeroSlopeEnding:Jr,ZeroStencilOp:jT,sRGBEncoding:Ol},Symbol.toStringTag,{value:"Module"}));function MP(){const[e,t]=pt.useState({}),[n,i]=pt.useState(""),[r,s]=pt.useState(""),[o,a]=pt.useState([]),[l,c]=pt.useState({lat:"",long:""}),[h,u]=pt.useState("metric"),[f,d]=pt.useState(0),m=pt.useRef(!0),y=pt.useRef(null);return pt.useEffect(()=>{(async()=>{try{const g=await cu.get("https://countriesnow.space/api/v0.1/countries");a(g.data.data)}catch(g){console.error(g)}})()},[]),pt.useEffect(()=>(f||d(IT({el:y.current,THREE:wP,mouseControls:!0,touchControls:!0,gyroControls:!1,minHeight:200,minWidth:200,highlightColor:2818303,midtoneColor:12648703,lowlightColor:9699583,blurFactor:.7})),()=>{f&&f.destroy()}),[f]),pt.useEffect(()=>{const v=async()=>{if(n!==""){let[g,p]=n.split(", ");g=g.toLowerCase(),p=p.toLowerCase();try{const x=await cu.get(`https://nominatim.openstreetmap.org/search?city=${g}&country=${p}&format=json`);if(x.data.length!==0){let w=x.data[0].lat,M=x.data[0].lon;c({lat:w,long:M})}else alert("weather data not available for this city"),i(r)}catch(x){console.error(x)}}};m.current?m.current=!1:v()},[n,h]),pt.useEffect(()=>{const v=async()=>{if(!Object.values(l).every(g=>g===null||g===""))try{const g="e950e22f1eed08a058697a6dc48180a1",p=await cu.get(`https://api.openweathermap.org/data/2.5/weather?lat=${l.lat}&lon=${l.long}&units=${h}&appid=${g}`);t(p.data)}catch(g){console.error(g)}};m.current?m.current=!1:v()},[l]),ue.jsx("div",{ref:y,className:"outer bg-azure-radiance-200 h-screen font-montserrat text-white flex items-center",children:ue.jsxs("div",{className:"w-full lg:w-9/12 m-auto p-4 flex flex-col justify-center",children:[ue.jsx(oE,{}),ue.jsx(lE,{cityData:o,currentCity:n,setCurrentCity:i,setPrevCity:s,unit:h,setUnit:u}),Object.keys(e).length===0?ue.jsx(ue.Fragment,{}):ue.jsxs(ue.Fragment,{children:[ue.jsx(RT,{weatherDataWind:e.wind}),ue.jsx(LT,{weatherDataSun:{sun:e.sys,timezone:e.timezone}})]}),ue.jsx(CT,{weatherData:e}),ue.jsx(AT,{lat:l.lat,lon:l.long,isInitialMount:m.current,unit:h}),ue.jsx(PT,{})]})})}nd.createRoot(document.getElementById("root")).render(ue.jsx(or.StrictMode,{children:ue.jsx(MP,{})}));
